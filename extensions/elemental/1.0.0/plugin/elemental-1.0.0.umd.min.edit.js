(("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_0"]=("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_0"]||[]).push([[3],{1:function(e,t){},2:function(e,t){},"2ff0":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,'.clearfix:after,.clearfix:before{content:" ";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.grouped-type{position:relative}.rke-switch{margin-top:-10px;position:absolute;right:0}',""]),e.exports=t},"35a4":function(e,t,s){var a=s("2ff0");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("649f01cc",a,!0,{sourceMap:!1,shadowMode:!1})},"499d":function(e,t,s){var a={"./aks-black.svg":"3a7d","./aks.svg":"6b1c","./aliyun-black.svg":"073d","./aliyun.svg":"817e","./aliyunecs-black.svg":"cfa4","./aliyunecs.svg":"6673","./amazonec2-black.svg":"1ca7","./amazonec2.svg":"b3fa","./amazoneks-black.svg":"b111","./amazoneks.svg":"a734","./aws.svg":"d1df","./azure-black.svg":"f9f9","./azure.svg":"ff0f","./azuread-black.svg":"34d3","./azuread.svg":"7c72","./azureaks-black.svg":"0dc3","./azureaks.svg":"89ef","./baidu-black.svg":"7c76","./baidu.svg":"8c46","./cloudca-black.svg":"0965","./cloudca.svg":"68b8","./cloudscale-black.svg":"bdf2","./cloudscale.svg":"05fa4","./custom.svg":"ab8e","./digitalocean-black.svg":"460c","./digitalocean.svg":"11f4","./equinix-black.svg":"3e8d","./equinix.svg":"2e41","./exoscale.svg":"04e7","./gcp.svg":"2e3b","./gke-black.svg":"394b","./gke.svg":"d10d","./google.svg":"6de9","./googlegke-black.svg":"38e0","./googlegke.svg":"29f9","./harvester.svg":"481a","./huaweicce-black.svg":"d7b3","./huaweicce.svg":"03cb","./import.svg":"4eb1","./k3s-black.svg":"bf04","./k3s.svg":"fbfb","./kubernetes-black.svg":"7b99","./kubernetes.svg":"ecef","./linode.svg":"4f2d","./linodelke-black.svg":"d904","./linodelke.svg":"58dc","./local-cluster.svg":"a46f","./minikube-black.svg":"001a","./minikube.svg":"5abd","./oci-black.svg":"e518","./oci.svg":"6a48","./openstack-black.svg":"a409","./openstack.svg":"d8b2","./oracle.svg":"ce4d","./oracleoke-black.svg":"8ebd","./oracleoke.svg":"8faa","./otc-black.svg":"eae0","./otc.svg":"271c","./otccce.svg":"25b5","./packet-black.svg":"798e","./packet.svg":"a67d","./pinganyunecs-black.svg":"c28c","./pinganyunecs.svg":"f63b","./pnap-black.svg":"5ad1","./pnap.svg":"0353","./rackspace-black.svg":"b20c","./rackspace.svg":"1b53","./rke.svg":"7a27","./rke2.svg":"43bd","./softlayer.svg":"da9b","./tencenttke-black.svg":"af66","./tencenttke.svg":"39ca","./vmwarevsphere-black.svg":"6cfe","./vmwarevsphere.svg":"0a79"};function r(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="499d"},"79f2":function(e,t,s){"use strict";s("35a4")},"7bb6":function(e,t,s){"use strict";s("bf7e")},"8e04":function(e,t,s){"use strict";s("b9ef")},"9d12":function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,'.clearfix[data-v-ce1d46be]:after,.clearfix[data-v-ce1d46be]:before{content:" ";display:table}.clearfix[data-v-ce1d46be]:after{clear:both}.list-unstyled[data-v-ce1d46be]{margin:0;padding:0;list-style-type:none}.no-select[data-v-ce1d46be]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-ce1d46be]{resize:none}.hand[data-v-ce1d46be]{cursor:pointer;cursor:hand}.fixed[data-v-ce1d46be]{table-layout:fixed}.clip[data-v-ce1d46be]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-ce1d46be],.force-wrap[data-v-ce1d46be]{word-wrap:break-word}.force-wrap[data-v-ce1d46be]{white-space:normal}.bordered-section[data-v-ce1d46be]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-ce1d46be]{margin-bottom:20px;margin-top:20px}.patch-version[data-v-ce1d46be]{margin-top:5px}',""]),e.exports=t},a6ba:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.value?s("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors},on:{error:function(t){return e.errors=t},finish:e.save,cancel:e.done}},[s("div",{staticClass:"row mb-40",class:{"mt-40":!e.hasBeenCreated}},[s("div",{staticClass:"col span-12"},[s("h3",[e._v(e._s(e.t("elemental.machineRegistration.create.configuration")))]),s("NameNsDescription",{attrs:{mode:e.mode,"description-hidden":!0,namespaced:!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),s("div",{staticClass:"row mb-20"},[s("div",{staticClass:"col span-6"},[s("h3",[e._v(e._s(e.t("elemental.machineRegistration.create.cloudConfiguration")))]),s("YamlEditor",{ref:"yamleditor",staticClass:"mb-20",attrs:{"editor-mode":e.editorMode},model:{value:e.cloudConfig,callback:function(t){e.cloudConfig=t},expression:"cloudConfig"}}),e.isView?e._e():s("div",{staticClass:"mb-20"},[s("FileSelector",{staticClass:"btn role-secondary",attrs:{label:e.t("elemental.machineRegistration.create.readFromFile")},on:{selected:e.onFileSelected}})],1),e._l(e.yamlErrors,(function(e,t){return s("Banner",{key:t,attrs:{color:"error",label:e}})}))],2)]),s("div",{staticClass:"row mb-40"},[s("div",{staticClass:"col span-12"},[s("h3",{staticClass:"mt-10"},[e._v(" "+e._s(e.t("elemental.machineRegistration.create.labelsAndAnnotations"))+" ")]),s("Tabbed",[s("Tab",{attrs:{"label-key":"elemental.machineRegistration.create.machineInv",name:"machine-inventory",weight:3}},[s("Banner",{staticClass:"mb-40",attrs:{color:"info"},domProps:{innerHTML:e._s(e.t("elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner",{},!0))}}),s("div",{staticClass:"row mb-30"},[s("KeyValue",{key:"labels",attrs:{value:e.value.machineInventoryLabels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setLabels(t,"machineInventoryLabels",!0)}}})],1),s("div",{staticClass:"row mb-10"},[s("KeyValue",{key:"annotations",attrs:{value:e.value.machineInventoryAnnotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setAnnotations(t,"machineInventoryAnnotations",!0)}}})],1)],1),s("Tab",{attrs:{"label-key":"elemental.machineRegistration.create.machineReg",name:"machine-reg",weight:2}},[s("Banner",{staticClass:"mb-40",attrs:{color:"info"},domProps:{innerHTML:e._s(e.t("elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner",{},!0))}}),s("div",{staticClass:"row mb-30"},[s("KeyValue",{key:"labels",attrs:{value:e.value.labels,"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("labels.labels.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setLabels(t)}}})],1),s("div",{staticClass:"row mb-10"},[s("KeyValue",{key:"annotations",attrs:{value:e.value.annotations,"add-label":e.t("labels.addAnnotation"),mode:e.mode,title:e.t("labels.annotations.title"),"read-allowed":!1,"value-can-be-empty":!0},on:{input:function(t){return e.value.setAnnotations(t)}}})],1)],1)],1)],1)])]):s("Loading")},r=[],o=s("15ca"),i=s("fd5f"),n=s("305c"),l=s("6418"),c=s("870a"),d=s("8b2c"),u=s("a232"),v=s("3c8c"),h=s("7838"),p=s.n(h),m=s("c5e6"),g=s("da25"),f=s("3e9d"),b=s("0cb2"),C=s("38de"),k={name:"MachineRegistrationEditView",components:{Loading:o["a"],CruResource:i["a"],YamlEditor:c["b"],KeyValue:u["a"],Banner:l["a"],FileSelector:d["b"],NameNsDescription:v["a"],Tabbed:b["a"],Tab:C["a"]},mixins:[n["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},data(){return{cloudConfig:"string"===typeof this.value.spec?this.value.spec:Object(m["c"])(this.value.spec),yamlErrors:null}},watch:{cloudConfig:{handler(e){try{const t=p.a.load(e);this.value.spec=t,this.yamlErrors=null}catch(t){this.yamlErrors=Object(f["c"])(t)}},immediate:!0}},computed:{isCreate(){return this.mode===g["m"]},isView(){return this.mode!==g["m"]&&this.mode!==g["o"]},editorMode(){return this.isView?c["a"].VIEW_CODE:c["a"].EDIT_CODE},hasBeenCreated(){return!!this.value.id}},methods:{async save(e){this.errors=[];try{await this.value.save(),e(!0),this.isCreate?this.$router.replace(this.value.detailLocation):this.done()}catch(t){this.errors=Object(f["c"])(t),e(!1)}},onFileSelected(e){const t=this.$refs.yamleditor;t&&t.updateValue(e)}}},y=k,w=s("d802"),S=Object(w["a"])(y,a,r,!1,null,"3ef57ade",null);t["default"]=S.exports},b9ef:function(e,t,s){var a=s("9d12");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("03377cf4",a,!0,{sourceMap:!1,shadowMode:!1})},be44:function(e,t,s){var a={"./example.vue":"ce60","./istio.vue":"826d","./logging/index.vue":"3c69","./monitoring/ClusterSelector.vue":"9d63","./monitoring/StorageClassSelector.vue":"3e15","./monitoring/alerting/index.vue":"72af","./monitoring/grafana/index.vue":"28b8","./monitoring/index.vue":"1c3e","./monitoring/prometheus/index.vue":"0a93","./monitoring/steps/uninstall-v1.vue":"29af","./rancher-alerting-drivers.vue":"ca1f","./rancher-backup/S3.vue":"8b03","./rancher-backup/index.vue":"39f3","./rancher-gatekeeper.vue":"dd1b"};function r(e){var t=o(e);return s(t)}function o(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="be44"},bf7e:function(e,t,s){var a=s("f168");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=s("0ed3").default;r("67b113fe",a,!0,{sourceMap:!1,shadowMode:!1})},f09e:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.value?s("CruResource",{attrs:{"done-route":e.doneRoute,"can-yaml":!0,mode:e.mode,resource:e.value,errors:e.errors},on:{error:function(t){return e.errors=t},finish:e.save,cancel:e.done}},[s("div",{staticClass:"row mt-40 mb-20"},[s("div",{staticClass:"col span-12 mb-20"},[s("h3",[e._v(e._s(e.t("elemental.osimage.create.configuration")))]),s("NameNsDescription",{attrs:{mode:e.mode,"description-hidden":!0,namespaced:!1},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)]),e.value.spec?s("div",{staticClass:"row mb-20"},[s("div",{staticClass:"col span-6 mb-20"},[s("h3",[e._v(e._s(e.t("elemental.osimage.create.spec")))]),s("LabeledSelect",{staticClass:"mb-40",attrs:{label:e.t("elemental.osimage.create.targetCluster.label"),placeholder:e.t("elemental.osimage.create.targetCluster.placeholder",null,!0),mode:e.mode,options:e.clusterTargetOptions,multiple:!0},model:{value:e.clusterTargets,callback:function(t){e.clusterTargets=t},expression:"clusterTargets"}}),s("LabeledInput",{attrs:{label:e.t("elemental.osimage.create.osImage.label"),placeholder:e.t("elemental.osimage.create.osImage.placeholder",null,!0),mode:e.mode},model:{value:e.value.spec.osImage,callback:function(t){e.$set(e.value.spec,"osImage","string"===typeof t?t.trim():t)},expression:"value.spec.osImage"}})],1)]):e._e()]):s("Loading")},r=[],o=s("15ca"),i=s("fd5f"),n=s("305c"),l=s("8e93"),c=s("466b"),d=s("3c8c"),u=s("da25"),v=s("907c"),h=s("a655"),p={name:"ManagedOsImagesEditView",components:{Loading:o["a"],LabeledInput:l["a"],LabeledSelect:c["a"],CruResource:i["a"],NameNsDescription:d["a"]},mixins:[n["a"]],props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){const e=await this.$store.dispatch("management/findAll",{type:v["c"].RANCHER_CLUSTER});this.elementalClusters=Object(h["a"])(e)},data(){return{elementalClusters:[],clusterTargets:this.handleClusterTargets()}},computed:{clusterTargetOptions(){return this.elementalClusters.map(e=>({label:e.name,value:e.name}))},isCreate(){return this.mode===u["m"]}},watch:{clusterTargets(e){this.value.spec.clusterTargets=e.map(e=>({clusterName:e}))}},methods:{handleClusterTargets(){var e,t;const s=null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.clusterTargets;if(null!==s&&void 0!==s&&s.length){const e=[];return s.forEach(t=>{e.push(t.clusterName)}),e}return[]}}},m=p,g=s("d802"),f=Object(g["a"])(m,a,r,!1,null,null,null);t["default"]=f.exports},f168:function(e,t,s){var a=s("5eaa");t=a(!1),t.push([e.i,'.clearfix[data-v-fe1286b6]:after,.clearfix[data-v-fe1286b6]:before{content:" ";display:table}.clearfix[data-v-fe1286b6]:after{clear:both}.list-unstyled[data-v-fe1286b6]{margin:0;padding:0;list-style-type:none}.no-select[data-v-fe1286b6]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-fe1286b6]{resize:none}.hand[data-v-fe1286b6]{cursor:pointer;cursor:hand}.fixed[data-v-fe1286b6]{table-layout:fixed}.clip[data-v-fe1286b6]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-fe1286b6],.force-wrap[data-v-fe1286b6]{word-wrap:break-word}.force-wrap[data-v-fe1286b6]{white-space:normal}.bordered-section[data-v-fe1286b6]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-fe1286b6]{margin-bottom:20px;margin-top:20px}.advanced[data-v-fe1286b6] >.vue-portal-target:empty,.advanced[data-v-fe1286b6] >.vue-portal-target:empty+.spacer{display:none}',""]),e.exports=t},fb41:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.$fetchState.pending?s("Loading"):e.emberLink?s("div",{staticClass:"embed"},[s("EmberPage",{attrs:{"force-new":!0,src:e.emberLink}})],1):s("CruResource",{staticClass:"create-cluster",attrs:{mode:e.mode,"validation-passed":!0,"selected-subtype":e.subType,resource:e.value,errors:e.errors,subtypes:e.subTypes,"cancel-event":!0},on:{finish:e.save,cancel:e.cancel,"select-type":e.selectType,error:function(t){return e.errors=t}},scopedSlots:e._u([{key:"subtypes",fn:function(){return e._l(e.groupedSubTypes,(function(t,a){return s("div",{key:t.id,staticClass:"mb-20",staticStyle:{width:"100%"}},[s("h4",[e.showRkeToggle&&[e._RKE1,e._RKE2].includes(t.name)?s("div",{staticClass:"grouped-type"},[s("ToggleSwitch",{staticClass:"rke-switch",attrs:{"data-testid":"cluster-manager-create-rke-switch","off-value":"rke1","off-label":e.t("cluster.toggle.v1"),"on-value":"rke2","on-label":e.t("cluster.toggle.v2")},model:{value:e.provisioner,callback:function(t){e.provisioner=t},expression:"provisioner"}})],1):e._e(),e._v(" "+e._s(t.label)+" ")]),s("SelectIconGrid",{attrs:{rows:t.types,"key-field":"id","name-field":"label","side-label-field":"tag","color-for":e.colorFor,"component-testid":"cluster-manager-create-grid-"+a},on:{clicked:e.clickedType}})],1)}))},proxy:!0},e.subType?{key:"form-footer",fn:function(){return[s("div")]},proxy:!0}:null],null,!0)},[e.isImport?s("Import",{attrs:{mode:e.mode,provider:e.subType},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e.subType?s("Rke2Config",{attrs:{"initial-value":e.initialValue,"live-value":e.liveValue,mode:e.mode,provider:e.subType},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}):e._e()],1)},r=[],o=s("305c"),i=s("15ca"),n=s("fd5f"),l=s("500e"),c=s("4a40"),d=s("061c"),u=s("da25"),v=s("9ce4"),h=s("1d19"),p=s("e24b"),m=s("5000"),g=s("ab70"),f=s("4ac6"),b=s("907c"),C=s("9c36"),k=s("a8b9"),y=s("6642"),w=s("b010"),S=s("c41f"),P=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.$fetchState.pending&&!e.loadedOnce?s("Loading"):e.$fetchState.error?s("Banner",{attrs:{color:"error",label:e.$fetchState.error}}):s("CruResource",{ref:"cruresource",staticClass:"rke2",attrs:{mode:e.mode,"validation-passed":e.validationPassed()&&e.fvFormIsValid,resource:e.value,errors:e.errors,"cancel-event":!0,"done-route":e.doneRoute,"apply-hooks":e.applyHooks,"generate-yaml":e.generateYaml,"component-testid":"rke2-custom-create"},on:{done:e.done,finish:e.saveOverride,cancel:e.cancel,error:e.fvUnreportedValidationErrors},scopedSlots:e._u([e.needCredential&&!e.credentialId?{key:"form-footer",fn:function(){return[s("div")]},proxy:!0}:null],null,!0)},[e.isEdit?s("Banner",{attrs:{color:"warning"}},[s("span",{domProps:{innerHTML:e._s(e.t("cluster.banner.rke2-k3-reprovisioning",{},!0))}})]):e._e(),e.needCredential?s("SelectCredential",{attrs:{mode:e.mode,provider:e.provider,cancel:e.cancelCredential,"showing-form":e.showForm},model:{value:e.credentialId,callback:function(t){e.credentialId=t},expression:"credentialId"}}):e._e(),e.showForm?s("div",{staticClass:"mt-20"},[e.isView?e._e():s("NameNsDescription",{attrs:{mode:e.mode,namespaced:!1,"name-label":"cluster.name.label","name-placeholder":"cluster.name.placeholder","description-label":"cluster.description.label","description-placeholder":"cluster.description.placeholder",rules:{name:e.fvGetAndReportPathRules("metadata.name")}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e.appsOSWarning?s("Banner",{attrs:{color:"error"}},[e._v(" "+e._s(e.appsOSWarning)+" ")]):e._e(),e.hasMachinePools?[s("div",{staticClass:"clearfix"},[s("h2",{directives:[{name:"t",rawName:"v-t",value:"cluster.tabs.machinePools",expression:"'cluster.tabs.machinePools'"}],staticClass:"pull-left"}),e.isView?e._e():s("div",{staticClass:"pull-right"},[s("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.nodeTotals.tooltip.etcd,expression:"nodeTotals.tooltip.etcd"}],staticClass:"mr-10",attrs:{color:e.nodeTotals.color.etcd,icon:e.nodeTotals.icon.etcd,label:e.nodeTotals.label.etcd}}),s("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.nodeTotals.tooltip.controlPlane,expression:"nodeTotals.tooltip.controlPlane"}],staticClass:"mr-10",attrs:{color:e.nodeTotals.color.controlPlane,icon:e.nodeTotals.icon.controlPlane,label:e.nodeTotals.label.controlPlane}}),s("BadgeState",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.nodeTotals.tooltip.worker,expression:"nodeTotals.tooltip.worker"}],attrs:{color:e.nodeTotals.color.worker,icon:e.nodeTotals.icon.worker,label:e.nodeTotals.label.worker}})],1)]),s("Tabbed",{ref:"pools",attrs:{"side-tabs":!0,"show-tabs-add-remove":!e.isView},on:{addTab:function(t){return e.addMachinePool(t)},removeTab:function(t){return e.removeMachinePool(t)}}},[e._l(e.machinePools,(function(t,a){return[t.remove?e._e():s("Tab",{key:t.id,attrs:{name:t.id,label:t.pool.name||"(Not Named)","show-header":!1}},[s("MachinePool",{ref:"pool",refInFor:!0,attrs:{value:t,cluster:e.value,mode:e.mode,provider:e.provider,"credential-id":e.credentialId,idx:a,"machine-pools":e.machinePools},on:{error:function(t){return e.errors=t}}})],1)]})),e.unremovedMachinePools.length?e._e():s("div",[e._v(" "+e._s(e.t("cluster.machinePool.noPoolsDisclaimer"))+" ")])],2),s("div",{staticClass:"spacer"})]:e._e(),s("h2",{directives:[{name:"t",rawName:"v-t",value:"cluster.tabs.cluster",expression:"'cluster.tabs.cluster'"}]}),s("Tabbed",{attrs:{"side-tabs":!0}},[s("Tab",{attrs:{name:"basic","label-key":"cluster.tabs.basic",weight:11},on:{active:e.refreshYamls}},[e.haveArgInfo?e._e():s("Banner",{attrs:{color:"warning",label:"Configuration information is not available for the selected Kubernetes version.  The options available in this screen will be limited, you may want to use the YAML editor."}}),e.showk8s21LegacyWarning?s("Banner",{attrs:{color:"warning",label:e.t("cluster.legacyWarning")}}):e._e(),e.isHarvesterDriver&&e.isHarvesterIncompatible&&e.showCloudProvider?s("Banner",{attrs:{color:"warning"}},[s("span",{domProps:{innerHTML:e._s(e.t("cluster.harvester.warning.cloudProvider.incompatible",null,!0))}})]):e._e(),s("div",{staticClass:"row mb-10"},[s("div",{staticClass:"col span-6"},[s("LabeledSelect",{attrs:{mode:e.mode,options:e.versionOptions,"label-key":"cluster.kubernetesVersion.label"},model:{value:e.value.spec.kubernetesVersion,callback:function(t){e.$set(e.value.spec,"kubernetesVersion",t)},expression:"value.spec.kubernetesVersion"}}),s("Checkbox",{staticClass:"patch-version",attrs:{label:e.t("cluster.kubernetesVersion.deprecatedPatches"),tooltip:e.t("cluster.kubernetesVersion.deprecatedPatchWarning")},model:{value:e.showDeprecatedPatchVersions,callback:function(t){e.showDeprecatedPatchVersions=t},expression:"showDeprecatedPatchVersions"}})],1),e.showCloudProvider?s("div",{staticClass:"col span-6"},[s("LabeledSelect",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,options:e.cloudProviderOptions,label:e.t("cluster.rke2.cloudProvider.label")},model:{value:e.agentConfig["cloud-provider-name"],callback:function(t){e.$set(e.agentConfig,"cloud-provider-name",t)},expression:"agentConfig['cloud-provider-name']"}})],1):e._e()]),e.showCni?s("div",{staticClass:"row",style:{"align-items":"center"}},[s("div",{staticClass:"col span-6"},[s("LabeledSelect",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,options:e.serverArgs.cni.options,label:e.t("cluster.rke2.cni.label")},model:{value:e.serverConfig.cni,callback:function(t){e.$set(e.serverConfig,"cni",t)},expression:"serverConfig.cni"}})],1),"cilium"===e.serverConfig.cni||"multus,cilium"===e.serverConfig.cni?s("div",{staticClass:"col"},[s("Checkbox",{attrs:{mode:e.mode,label:e.t("cluster.rke2.address.ipv6.enable")},model:{value:e.ciliumIpv6,callback:function(t){e.ciliumIpv6=t},expression:"ciliumIpv6"}})],1):e._e()]):e._e(),e.showVsphereNote?[s("Banner",{attrs:{color:"warning","label-key":"cluster.cloudProvider.rancher-vsphere.note"}})]:e.showCloudConfigYaml?[s("div",{staticClass:"spacer"}),s("div",{staticClass:"col span-12"},[s("h3",[e._v(" "+e._s(e.t("cluster.rke2.cloudProvider.header"))+" ")]),s("YamlEditor",{ref:"yaml",staticClass:"yaml-editor",attrs:{"editor-mode":"view"===e.mode?"VIEW_CODE":"EDIT_CODE","initial-yaml-values":"# Cloud Provider Config"},model:{value:e.agentConfig["cloud-provider-config"],callback:function(t){e.$set(e.agentConfig,"cloud-provider-config",t)},expression:"agentConfig['cloud-provider-config']"}})],1)]:e._e(),s("div",{staticClass:"spacer"}),s("h3",[e._v(" "+e._s(e.t("cluster.rke2.security.header"))+" ")]),s("div",{staticClass:"row"},[s("div",{staticClass:"col span-6"},[e.pspOptions?s("LabeledSelect",{attrs:{mode:e.mode,options:e.pspOptions,label:e.t("cluster.rke2.defaultPodSecurityPolicyTemplateName.label")},model:{value:e.value.spec.defaultPodSecurityPolicyTemplateName,callback:function(t){e.$set(e.value.spec,"defaultPodSecurityPolicyTemplateName",t)},expression:"value.spec.defaultPodSecurityPolicyTemplateName"}}):e._e()],1),e.showCisProfile?s("div",{staticClass:"col span-6"},[e.serverArgs.profile?s("LabeledSelect",{attrs:{mode:e.mode,options:e.profileOptions,label:"Server CIS Profile"},model:{value:e.serverConfig.profile,callback:function(t){e.$set(e.serverConfig,"profile",t)},expression:"serverConfig.profile"}}):e.agentArgs.profile?s("LabeledSelect",{attrs:{mode:e.mode,options:e.profileOptions,label:"Worker CIS Profile"},model:{value:e.agentConfig.profile,callback:function(t){e.$set(e.agentConfig,"profile",t)},expression:"agentConfig.profile"}}):e._e()],1):e._e()]),s("div",{staticClass:"row"},[s("div",{staticClass:"col span-12 mt-20"},[e.serverArgs["secrets-encryption"]?s("Checkbox",{attrs:{mode:e.mode,label:"Encrypt Secrets"},model:{value:e.serverConfig["secrets-encryption"],callback:function(t){e.$set(e.serverConfig,"secrets-encryption",t)},expression:"serverConfig['secrets-encryption']"}}):e._e(),s("Checkbox",{attrs:{mode:e.mode,label:e.t("cluster.rke2.enableNetworkPolicy.label")},model:{value:e.value.spec.enableNetworkPolicy,callback:function(t){e.$set(e.value.spec,"enableNetworkPolicy",t)},expression:"value.spec.enableNetworkPolicy"}})],1)]),"cilium"===e.serverConfig.cni&&e.value.spec.enableNetworkPolicy?s("div",{staticClass:"row"},[s("div",{staticClass:"col span-12"},[s("Banner",{attrs:{color:"info",label:e.t("cluster.rke2.enableNetworkPolicy.warning")}})],1)]):e._e(),s("div",{staticClass:"spacer"}),e.serverArgs.disable?s("div",{staticClass:"row"},[s("div",{staticClass:"col span-12"},[s("div",[s("h3",[e._v(" "+e._s(e.t("cluster.rke2.systemService.header"))+" ")])]),e._l(e.disableOptions,(function(t){return s("Checkbox",{key:t.value,attrs:{mode:e.mode,label:t.label,"value-when-true":t.value},model:{value:e.enabledSystemServices,callback:function(t){e.enabledSystemServices=t},expression:"enabledSystemServices"}})}))],2)]):e._e()],2),e.canManageMembers?s("Tab",{attrs:{name:"memberRoles","label-key":"cluster.tabs.memberRoles",weight:10}},[e.isEdit?s("Banner",{attrs:{color:"info"}},[e._v(" "+e._s(e.t("cluster.memberRoles.removeMessage"))+" ")]):e._e(),s("ClusterMembershipEditor",{attrs:{mode:e.mode,"parent-id":e.value.mgmt?e.value.mgmt.id:null},on:{"membership-update":e.onMembershipUpdate}})],1):e._e(),s("Tab",{attrs:{name:"etcd","label-key":"cluster.tabs.etcd"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col span-6"},[s("RadioGroup",{attrs:{name:"etcd-disable-snapshots",options:[!0,!1],label:e.t("cluster.rke2.etcd.disableSnapshots.label"),labels:[e.t("generic.disable"),e.t("generic.enable")],mode:e.mode},model:{value:e.rkeConfig.etcd.disableSnapshots,callback:function(t){e.$set(e.rkeConfig.etcd,"disableSnapshots",t)},expression:"rkeConfig.etcd.disableSnapshots"}})],1)]),!0!==e.rkeConfig.etcd.disableSnapshots?s("div",{staticClass:"row"},[s("div",{staticClass:"col span-6"},[s("LabeledInput",{attrs:{type:"cron",placeholder:"0 * * * *",mode:e.mode,label:e.t("cluster.rke2.etcd.snapshotScheduleCron.label")},model:{value:e.rkeConfig.etcd.snapshotScheduleCron,callback:function(t){e.$set(e.rkeConfig.etcd,"snapshotScheduleCron",t)},expression:"rkeConfig.etcd.snapshotScheduleCron"}})],1),s("div",{staticClass:"col span-6"},[s("UnitInput",{attrs:{mode:e.mode,label:e.t("cluster.rke2.etcd.snapshotRetention.label"),suffix:e.t("cluster.rke2.snapshots.suffix")},model:{value:e.rkeConfig.etcd.snapshotRetention,callback:function(t){e.$set(e.rkeConfig.etcd,"snapshotRetention",t)},expression:"rkeConfig.etcd.snapshotRetention"}})],1)]):e._e(),!0!==e.rkeConfig.etcd.disableSnapshots?[s("div",{staticClass:"spacer"}),s("RadioGroup",{attrs:{name:"etcd-s3",options:[!1,!0],label:"Backup Snapshots to S3",labels:["Disable","Enable"],mode:e.mode},model:{value:e.s3Backup,callback:function(t){e.s3Backup=t},expression:"s3Backup"}}),e.s3Backup?s("S3Config",{attrs:{namespace:e.value.metadata.namespace,"register-before-hook":e.registerBeforeHook,mode:e.mode},model:{value:e.rkeConfig.etcd.s3,callback:function(t){e.$set(e.rkeConfig.etcd,"s3",t)},expression:"rkeConfig.etcd.s3"}}):e._e()]:e._e(),s("div",{staticClass:"spacer"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col span-6"},[e.serverArgs["etcd-expose-metrics"]?s("RadioGroup",{attrs:{name:"etcd-expose-metrics",options:[!1,!0],label:e.t("cluster.rke2.etcd.exportMetric.label"),labels:[e.t("cluster.rke2.etcd.exportMetric.false"),e.t("cluster.rke2.etcd.exportMetric.true")],mode:e.mode},model:{value:e.serverConfig["etcd-expose-metrics"],callback:function(t){e.$set(e.serverConfig,"etcd-expose-metrics",t)},expression:"serverConfig['etcd-expose-metrics']"}}):e._e()],1)])],2),e.haveArgInfo?s("Tab",{attrs:{name:"networking","label-key":"cluster.tabs.networking"}},[s("h3",[e._v(" "+e._s(e.t("cluster.rke2.address.header"))+" "),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("cluster.rke2.address.tooltip"),expression:"t('cluster.rke2.address.tooltip')"}],staticClass:"icon icon-info"})]),e.showIpv6Warning?s("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("cluster.rke2.address.ipv6.warning"))+" ")]):e._e(),s("div",{staticClass:"row mb-20"},[e.serverArgs["cluster-cidr"]?s("div",{staticClass:"col span-6"},[s("LabeledInput",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("cluster.rke2.address.clusterCidr.label")},model:{value:e.serverConfig["cluster-cidr"],callback:function(t){e.$set(e.serverConfig,"cluster-cidr",t)},expression:"serverConfig['cluster-cidr']"}})],1):e._e(),e.serverArgs["service-cidr"]?s("div",{staticClass:"col span-6"},[s("LabeledInput",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("cluster.rke2.address.serviceCidr.label")},model:{value:e.serverConfig["service-cidr"],callback:function(t){e.$set(e.serverConfig,"service-cidr",t)},expression:"serverConfig['service-cidr']"}})],1):e._e()]),s("div",{staticClass:"row mb-20"},[e.serverArgs["cluster-dns"]?s("div",{staticClass:"col span-6"},[s("LabeledInput",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("cluster.rke2.address.dns.label")},model:{value:e.serverConfig["cluster-dns"],callback:function(t){e.$set(e.serverConfig,"cluster-dns",t)},expression:"serverConfig['cluster-dns']"}})],1):e._e(),e.serverArgs["cluster-domain"]?s("div",{staticClass:"col span-6"},[s("LabeledInput",{attrs:{mode:e.mode,disabled:e.clusterIsAlreadyCreated,label:e.t("cluster.rke2.address.domain.label")},model:{value:e.serverConfig["cluster-domain"],callback:function(t){e.$set(e.serverConfig,"cluster-domain",t)},expression:"serverConfig['cluster-domain']"}})],1):e._e()]),e.serverArgs["service-node-port-range"]?s("div",{staticClass:"row mb-20"},[s("div",{staticClass:"col span-6"},[s("LabeledInput",{attrs:{mode:e.mode,label:e.t("cluster.rke2.address.nodePortRange.label")},model:{value:e.serverConfig["service-node-port-range"],callback:function(t){e.$set(e.serverConfig,"service-node-port-range",t)},expression:"serverConfig['service-node-port-range']"}})],1)]):e._e(),e.serverArgs["tls-san"]?s("div",{staticClass:"row mb-20"},[s("div",{staticClass:"col span-6"},[s("ArrayList",{attrs:{protip:!1,mode:e.mode,title:e.t("cluster.rke2.address.tlsSan.label")},model:{value:e.serverConfig["tls-san"],callback:function(t){e.$set(e.serverConfig,"tls-san",t)},expression:"serverConfig['tls-san']"}})],1)]):e._e(),s("ACE",{attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1):e._e(),s("Tab",{attrs:{name:"upgrade","label-key":"cluster.tabs.upgrade"}},[e.get(e.rkeConfig,"upgradeStrategy.controlPlaneDrainOptions.deleteEmptyDirData")?s("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("cluster.rke2.deleteEmptyDir",{},!0))+" ")]):e._e(),s("div",{staticClass:"row"},[s("div",{staticClass:"col span-6"},[s("h3",[e._v("Control Plane")]),s("LabeledInput",{attrs:{mode:e.mode,label:e.t("cluster.rke2.controlPlaneConcurrency.label"),tooltip:e.t("cluster.rke2.controlPlaneConcurrency.toolTip")},model:{value:e.rkeConfig.upgradeStrategy.controlPlaneConcurrency,callback:function(t){e.$set(e.rkeConfig.upgradeStrategy,"controlPlaneConcurrency",t)},expression:"rkeConfig.upgradeStrategy.controlPlaneConcurrency"}}),s("div",{staticClass:"spacer"}),s("DrainOptions",{attrs:{mode:e.mode},model:{value:e.rkeConfig.upgradeStrategy.controlPlaneDrainOptions,callback:function(t){e.$set(e.rkeConfig.upgradeStrategy,"controlPlaneDrainOptions",t)},expression:"rkeConfig.upgradeStrategy.controlPlaneDrainOptions"}})],1),s("div",{staticClass:"col span-6"},[s("h3",[e._v(" "+e._s(e.t("cluster.rke2.workNode.label"))+" ")]),s("LabeledInput",{attrs:{mode:e.mode,label:e.t("cluster.rke2.workerConcurrency.label"),tooltip:e.t("cluster.rke2.workerConcurrency.toolTip")},model:{value:e.rkeConfig.upgradeStrategy.workerConcurrency,callback:function(t){e.$set(e.rkeConfig.upgradeStrategy,"workerConcurrency",t)},expression:"rkeConfig.upgradeStrategy.workerConcurrency"}}),s("div",{staticClass:"spacer"}),s("DrainOptions",{attrs:{mode:e.mode},model:{value:e.rkeConfig.upgradeStrategy.workerDrainOptions,callback:function(t){e.$set(e.rkeConfig.upgradeStrategy,"workerDrainOptions",t)},expression:"rkeConfig.upgradeStrategy.workerDrainOptions"}})],1)])],1),s("Tab",{attrs:{name:"registry","label-key":"cluster.tabs.registry"}},[s("RadioGroup",{attrs:{name:"registry-mode",options:e.registryOptions,mode:e.mode},model:{value:e.registryMode,callback:function(t){e.registryMode=t},expression:"registryMode"}}),e.registryMode!==e.PUBLIC?s("LabeledInput",{staticClass:"mt-20",attrs:{mode:e.mode,required:!0,label:e.t("cluster.privateRegistry.systemDefaultRegistry.label")},model:{value:e.registryHost,callback:function(t){e.registryHost=t},expression:"registryHost"}}):e._e(),e.registryMode===e.PRIVATE?s("SelectOrCreateAuthSecret",{attrs:{"register-before-hook":e.registerBeforeHook,"hook-priority":1,mode:e.mode,"in-store":"management","allow-ssh":!1,"allow-rke":!0,vertical:!0,namespace:e.value.metadata.namespace,"generate-name":"registryconfig-auth-"},model:{value:e.registrySecret,callback:function(t){e.registrySecret=t},expression:"registrySecret"}}):e.registryMode===e.ADVANCED?[s("RegistryMirrors",{staticClass:"mt-20",attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("RegistryConfigs",{staticClass:"mt-20",attrs:{mode:e.mode,"cluster-register-before-hook":e.registerBeforeHook},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})]:e._e()],2),s("Tab",{attrs:{name:"addons","label-key":"cluster.tabs.addons"},on:{active:e.showAddons}},[e.isEdit?s("Banner",{attrs:{color:"warning"}},[e._v(" "+e._s(e.t("cluster.addOns.dependencyBanner"))+" ")]):e._e(),e.versionInfo&&e.addonVersions.length?s("div",{key:e.addonsRev},e._l(e.addonVersions,(function(t){return s("div",{key:t._key},[s("h3",[e._v(e._s(e.labelForAddon(t.name)))]),e.versionInfo[t.name]&&e.versionInfo[t.name].questions&&t.name&&e.userChartValuesTemp[t.name]?s("Questions",{attrs:{emit:!0,"in-store":"management",mode:e.mode,tabbed:!1,source:e.versionInfo[t.name],"target-namespace":e.value.metadata.namespace},on:{updated:function(s){return e.updateQuestions(t.name)}},model:{value:e.userChartValuesTemp[t.name],callback:function(s){e.$set(e.userChartValuesTemp,t.name,s)},expression:"userChartValuesTemp[v.name]"}}):s("YamlEditor",{ref:"yaml-values",refInFor:!0,attrs:{value:e.initYamlEditor(t.name),scrolling:!0,"as-object":!0,"editor-mode":"view"===e.mode?"VIEW_CODE":"EDIT_CODE","hide-preview-buttons":!0},on:{input:function(s){return e.updateValues(t.name,s)}}}),s("div",{staticClass:"spacer"})],1)})),0):e._e(),s("div",[s("h3",[e._v(" "+e._s(e.t("cluster.addOns.additionalManifest.title"))+" "),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("cluster.addOns.additionalManifest.tooltip"),expression:"t('cluster.addOns.additionalManifest.tooltip')"}],staticClass:"icon icon-info"})]),s("YamlEditor",{ref:"yaml-additional",staticClass:"yaml-editor",attrs:{"editor-mode":"view"===e.mode?"VIEW_CODE":"EDIT_CODE","initial-yaml-values":"# Additional Manifest YAML"},model:{value:e.rkeConfig.additionalManifest,callback:function(t){e.$set(e.rkeConfig,"additionalManifest",t)},expression:"rkeConfig.additionalManifest"}})],1)],1),e.haveArgInfo||e.agentArgs["protect-kernel-defaults"]?s("Tab",{attrs:{name:"advanced","label-key":"cluster.tabs.advanced",weight:-1},on:{active:e.refreshYamls}},[e.haveArgInfo?[s("h3",[e._v(e._s(e.t("cluster.advanced.argInfo.title")))]),e.agentArgs["kubelet-arg"]?s("ArrayListGrouped",{staticClass:"mb-20",attrs:{"add-label":e.t("cluster.advanced.argInfo.machineSelector.label"),"can-remove":e.canRemoveKubeletRow,"default-add-value":{machineLabelSelector:{matchExpressions:[],matchLabels:{}},config:{"kubelet-arg":[]}}},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.value.machineLabelSelector?[s("h3",[e._v(e._s(e.t("cluster.advanced.argInfo.machineSelector.title")))]),s("MatchExpressions",{staticClass:"mb-20",attrs:{mode:e.mode,"show-remove":!1,"initial-empty-row":!0},model:{value:a.value.machineLabelSelector,callback:function(t){e.$set(a.value,"machineLabelSelector",t)},expression:"row.value.machineLabelSelector"}}),s("h3",[e._v(e._s(e.t("cluster.advanced.argInfo.machineSelector.subTitle")))])]:s("h3",[e._v(" "+e._s(e.advancedTitleAlt)+" ")]),s("ArrayList",{attrs:{mode:e.mode,"add-label":e.t("cluster.advanced.argInfo.machineSelector.listLabel"),"initial-empty-row":!!a.value.machineLabelSelector},model:{value:a.value.config["kubelet-arg"],callback:function(t){e.$set(a.value.config,"kubelet-arg",t)},expression:"row.value.config['kubelet-arg']"}})]}}],null,!1,54032186),model:{value:e.rkeConfig.machineSelectorConfig,callback:function(t){e.$set(e.rkeConfig,"machineSelectorConfig",t)},expression:"rkeConfig.machineSelectorConfig"}}):e._e(),e.rkeConfig.machineSelectorConfig.length>1?s("Banner",{attrs:{color:"info",label:e.t("cluster.advanced.argInfo.machineSelector.bannerLabel")}}):e._e(),e.serverArgs["kube-controller-manager-arg"]?s("ArrayList",{staticClass:"mb-20",attrs:{mode:e.mode,title:e.t("cluster.advanced.argInfo.machineSelector.kubeControllerManagerTitle")},model:{value:e.serverConfig["kube-controller-manager-arg"],callback:function(t){e.$set(e.serverConfig,"kube-controller-manager-arg",t)},expression:"serverConfig['kube-controller-manager-arg']"}}):e._e(),e.serverArgs["kube-apiserver-arg"]?s("ArrayList",{staticClass:"mb-20",attrs:{mode:e.mode,title:e.t("cluster.advanced.argInfo.machineSelector.kubeApiServerTitle")},model:{value:e.serverConfig["kube-apiserver-arg"],callback:function(t){e.$set(e.serverConfig,"kube-apiserver-arg",t)},expression:"serverConfig['kube-apiserver-arg']"}}):e._e(),e.serverArgs["kube-scheduler-arg"]?s("ArrayList",{attrs:{mode:e.mode,title:e.t("cluster.advanced.argInfo.machineSelector.kubeSchedulerTitle")},model:{value:e.serverConfig["kube-scheduler-arg"],callback:function(t){e.$set(e.serverConfig,"kube-scheduler-arg",t)},expression:"serverConfig['kube-scheduler-arg']"}}):e._e()]:e._e(),e.agentArgs["protect-kernel-defaults"]?[s("div",{staticClass:"spacer"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col span-12"},[s("Checkbox",{attrs:{mode:e.mode,label:e.t("cluster.advanced.agentArgs.label")},model:{value:e.agentConfig["protect-kernel-defaults"],callback:function(t){e.$set(e.agentConfig,"protect-kernel-defaults",t)},expression:"agentConfig['protect-kernel-defaults']"}})],1)])]:e._e()],2):e._e(),s("AgentEnv",{attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),s("Labels",{attrs:{mode:e.mode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)],2):e._e(),e.unsupportedSelectorConfig?s("Banner",{attrs:{color:"warning",label:e.t("cluster.banner.warning")}}):e._e()],1)},O=[],_=s("94a3"),x=s.n(_),T=s("05ca"),E=s.n(T),R=s("c316"),A=s.n(R),I=s("1fcb"),V=s.n(I),j=s("ebab"),N=s("bddd"),L=s("c5e6"),M=s("2cb5"),D=s("8047"),B=s("0c18"),H=s("977f"),F=s("a0fb"),q=s("f17a"),K=s("6418"),U=s("0df0"),W=s("8e93"),Y=s("466b"),G=s("711b"),z=s("3c8c"),Q=s("e143"),J=s("38de"),X=s("0cb2"),Z=s("4978"),ee=s("870a"),te=s("a943"),se=s("a369"),ae=s("8dc9"),re=s("fec4"),oe=s.n(re),ie=s("8535"),ne=s("0f81"),le=s("4d6f"),ce=s("0e44"),de=s("feec"),ue=s("2342"),ve=s("fdb7"),he=s("536d"),pe=s("1a2a"),me=s("ab51"),ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col span-4"},[s("LabeledInput",{attrs:{mode:e.mode,label:e.t("cluster.machinePool.name.label"),required:!0,disabled:!e.value.config||!!e.value.config.id},model:{value:e.value.pool.name,callback:function(t){e.$set(e.value.pool,"name",t)},expression:"value.pool.name"}})],1),s("div",{staticClass:"col span-4"},[s("LabeledInput",{attrs:{mode:e.mode,label:e.t("cluster.machinePool.quantity.label"),type:"number",min:"0",required:!0},model:{value:e.value.pool.quantity,callback:function(t){e.$set(e.value.pool,"quantity",e._n(t))},expression:"value.pool.quantity"}})],1),s("div",{staticClass:"col span-4 pt-5"},[s("h3",[e._v(" "+e._s(e.t("cluster.machinePool.role.label"))+" ")]),s("Checkbox",{attrs:{mode:e.mode,label:"etcd",disabled:e.isWindows},model:{value:e.value.pool.etcdRole,callback:function(t){e.$set(e.value.pool,"etcdRole",t)},expression:"value.pool.etcdRole"}}),s("Checkbox",{attrs:{mode:e.mode,label:"Control Plane",disabled:e.isWindows},model:{value:e.value.pool.controlPlaneRole,callback:function(t){e.$set(e.value.pool,"controlPlaneRole",t)},expression:"value.pool.controlPlaneRole"}}),s("Checkbox",{attrs:{mode:e.mode,label:"Worker"},model:{value:e.value.pool.workerRole,callback:function(t){e.$set(e.value.pool,"workerRole",t)},expression:"value.pool.workerRole"}})],1)]),s("hr",{staticClass:"mt-10"}),e.value.config?s(e.configComponent,{ref:"configComponent",tag:"component",attrs:{cluster:e.cluster,uuid:e.uuid,mode:e.mode,value:e.value.config,provider:e.provider,"credential-id":e.credentialId,"pool-index":e.idx,"machine-pools":e.machinePools},on:{error:function(t){return e.errors=t},updateMachineCount:e.updateMachineCount}}):e.value.configMissing?s("Banner",{attrs:{color:"error","label-key":"cluster.machinePool.configNotFound"}}):s("Banner",{attrs:{color:"info","label-key":"cluster.machinePool.noAccessBanner"}}),s("AdvancedSection",{staticClass:"advanced",attrs:{mode:e.mode}},[s("portal-target",{attrs:{name:"advanced-"+e.uuid,multiple:""}}),s("div",{staticClass:"spacer"}),s("div",{staticClass:"row"},[s("div",{staticClass:"col span-4"},[s("h3",[e._v(" "+e._s(e.t("cluster.machinePool.autoReplace.label"))+" "),s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.t("cluster.machinePool.autoReplace.toolTip"),expression:"t('cluster.machinePool.autoReplace.toolTip')"}],staticClass:"icon icon-info icon-lg"})]),s("UnitInput",{attrs:{"hide-arrows":!0,placeholder:e.t("containerResourceLimit.cpuPlaceholder"),mode:e.mode,"output-modifier":!0,"base-unit":e.t("cluster.machinePool.autoReplace.unit")},on:{input:function(t){e.value.pool.unhealthyNodeTimeout=e.unhealthyNodeTimeoutInteger+"s"}},model:{value:e.unhealthyNodeTimeoutInteger,callback:function(t){e.unhealthyNodeTimeoutInteger=e._n(t)},expression:"unhealthyNodeTimeoutInteger"}})],1),s("div",{staticClass:"col span-4"},[s("h3",[e._v(" "+e._s(e.t("cluster.machinePool.drain.header"))+" ")]),s("Checkbox",{attrs:{mode:e.mode,label:e.t("cluster.machinePool.drain.label")},model:{value:e.value.pool.drainBeforeDelete,callback:function(t){e.$set(e.value.pool,"drainBeforeDelete",t)},expression:"value.pool.drainBeforeDelete"}})],1)]),s("div",{staticClass:"spacer"}),s("KeyValue",{attrs:{"add-label":e.t("labels.addLabel"),mode:e.mode,title:e.t("cluster.machinePool.labels.label"),"read-allowed":!1,"value-can-be-empty":!0},model:{value:e.value.pool.labels,callback:function(t){e.$set(e.value.pool,"labels",t)},expression:"value.pool.labels"}}),s("div",{staticClass:"spacer"}),s("Taints",{attrs:{mode:e.mode},model:{value:e.value.pool.taints,callback:function(t){e.$set(e.value.pool,"taints",t)},expression:"value.pool.taints"}}),s("portal-target",{attrs:{name:"advanced-footer-"+e.uuid,multiple:""}})],1)],1)},fe=[],be=s("d5fb"),Ce=s("e4b8"),ke=s("a232"),ye=s("bc28"),we={name:"MachinePool",components:{LabeledInput:W["a"],Checkbox:U["a"],Taints:Ce["a"],KeyValue:ke["a"],AdvancedSection:ye["a"],Banner:K["a"],UnitInput:Z["a"]},props:{value:{type:Object,required:!0},cluster:{type:Object,default:()=>({})},credentialId:{type:String,default:null},mode:{type:String,default:u["o"]},provider:{type:String,required:!0},idx:{type:Number,required:!0},machinePools:{type:Array,default:()=>[]}},data(){const e=e=>{const t=e.split(/([a-z])/),s=t.reduce((e,s,a)=>{const r=parseInt(s);if(isNaN(r))return e;const o=t[a+1];switch(o){case"d":e.push(24*r*60*60);break;case"h":e.push(60*r*60);break;case"m":e.push(60*r);break;case"s":e.push(r);break;default:break}return e},[]);return s.reduce((e,t)=>e+t)};return{uuid:Object(M["n"])(),unhealthyNodeTimeoutInteger:this.value.pool.unhealthyNodeTimeout?e(this.value.pool.unhealthyNodeTimeout):0}},computed:{configComponent(){if(this.provider===S["a"])return()=>Promise.all([s.e(1),s.e(5)]).then(s.bind(null,"0461"));const e=this.$store.getters["plugins/machineDrivers"];return e.includes(this.provider)?Object(be["h"])(this.provider):Object(be["h"])("generic")},isWindows(){var e,t;return"windows"===(null===(e=this.value)||void 0===e||null===(t=e.config)||void 0===t?void 0:t.os)}},watch:{isWindows(e){e?(this.value.pool.etcdRole=!1,this.value.pool.controlPlaneRole=!1,this.value.pool.machineOS="windows"):this.value.pool.machineOS="linux"}},methods:{async test(){var e;if("function"===typeof(null===(e=this.$refs.configComponent)||void 0===e?void 0:e.test)){let e=[];try{const t=await this.$refs.configComponent.test();(!t||null!==t&&void 0!==t&&t.errors)&&null!==t&&void 0!==t&&t.errors&&(e=t.errors)}catch(t){e=[t]}return e}},updateMachineCount(e){this.value.pool.quantity=e||1}}},Se=we,Pe=(s("7bb6"),s("d802")),Oe=Object(Pe["a"])(Se,ge,fe,!1,null,"fe1286b6",null),_e=Oe.exports;const xe="public",Te="private",$e="advanced",Ee="harvester",Re="harvester-cloud-provider";var Ae={components:{ACE:le["a"],AgentEnv:ce["a"],ArrayList:H["a"],ArrayListGrouped:F["a"],BadgeState:q["a"],Banner:K["a"],Checkbox:U["a"],ClusterMembershipEditor:se["b"],CruResource:n["a"],DrainOptions:de["a"],LabeledInput:W["a"],LabeledSelect:Y["a"],Labels:ue["a"],Loading:i["a"],MachinePool:_e,MatchExpressions:G["a"],NameNsDescription:z["a"],Questions:te["a"],RadioGroup:Q["a"],RegistryConfigs:ve["a"],RegistryMirrors:he["a"],S3Config:pe["a"],SelectCredential:me["a"],SelectOrCreateAuthSecret:ae["a"],Tab:J["a"],Tabbed:X["a"],UnitInput:Z["a"],YamlEditor:ee["b"]},mixins:[o["a"],j["a"]],props:{mode:{type:String,required:!0},value:{type:Object,required:!0},provider:{type:String,required:!0}},async fetch(){var e,t;if(!this.rke2Versions){const e={rke2Versions:this.$store.dispatch("management/request",{url:"/v1-rke2-release/releases"}),k3sVersions:this.$store.dispatch("management/request",{url:"/v1-k3s-release/releases"})};this.$store.getters["management/canList"](b["o"].POD_SECURITY_POLICY_TEMPLATE)&&(e.allPSPs=await this.$store.dispatch("management/findAll",{type:b["o"].POD_SECURITY_POLICY_TEMPLATE}));const t=await this.$store.getters["management/all"](b["o"].SETTING)||[],r=t.find(e=>"rke2-default-version"===e.id)||{},o=t.find(e=>"k3s-default-version"===e.id)||{};let i=(null===r||void 0===r?void 0:r.value)||(null===r||void 0===r?void 0:r.default),n=(null===o||void 0===o?void 0:o.value)||(null===o||void 0===o?void 0:o.default);i||(e.rke2Channels=this.$store.dispatch("management/request",{url:"/v1-rke2-release/channels"})),n||(e.k3sChannels=this.$store.dispatch("management/request",{url:"/v1-k3s-release/channels"}));const l=await Object(k["a"])(e);if(this.allPSPs=l.allPSPs||[],this.rke2Versions=l.rke2Versions.data||[],this.k3sVersions=l.k3sVersions.data||[],!i){var s;const e=l.rke2Channels.data||[];i=null===(s=e.find(e=>"default"===e.id))||void 0===s?void 0:s.latest}if(!n){var a;const e=l.k3sChannels.data||[];n=null===(a=e.find(e=>"default"===e.id))||void 0===a?void 0:a.latest}if(!this.rke2Versions.length&&!this.k3sVersions.length)throw new Error("No version info found in KDM");this.defaultRke2=i,this.defaultK3s=n}if(this.value.spec||Object(p["j"])(this.value,"spec",{}),this.value.spec.machineSelectorConfig||Object(p["j"])(this.value.spec,"machineSelectorConfig",[]),this.value.spec.machineSelectorConfig.find(e=>!e.machineLabelSelector)||this.value.spec.machineSelectorConfig.unshift({config:{}}),this.value.spec.cloudCredentialSecretName&&(await this.$store.dispatch("rancher/findAll",{type:b["u"].CLOUD_CREDENTIAL}),this.credentialId=""+this.value.spec.cloudCredentialSecretName),this.value.spec.kubernetesVersion||Object(p["j"])(this.value.spec,"kubernetesVersion",this.defaultVersion),null!==(e=this.rkeConfig.etcd)&&void 0!==e&&null!==(t=e.s3)&&void 0!==t&&t.bucket&&(this.s3Backup=!0),this.rkeConfig.etcd){if("undefined"===typeof this.rkeConfig.etcd.disableSnapshots){const e=!this.rkeConfig.etcd.snapshotRetention&&!this.rkeConfig.etcd.snapshotScheduleCron;Object(p["j"])(this.rkeConfig.etcd,"disableSnapshots",e)}}else Object(p["j"])(this.rkeConfig,"etcd",{disableSnapshots:!1,s3:null,snapshotRetention:5,snapshotScheduleCron:"0 */5 * * *"});this.machinePools||(await this.initMachinePools(this.value.spec.rkeConfig.machinePools),this.mode!==u["m"]||this.machinePools.length||await this.addMachinePool()),void 0===this.value.spec.defaultPodSecurityPolicyTemplateName&&Object(p["j"])(this.value.spec,"defaultPodSecurityPolicyTemplateName",""),await this.initAddons(),await this.initRegistry(),Object.entries(this.chartValues).forEach(([e,t])=>{const s=this.chartVersionKey(e);this.userChartValues[s]=t})},data(){var e;return this.value.spec.rkeConfig||Object(p["j"])(this.value.spec,"rkeConfig",{}),this.value.spec.rkeConfig.chartValues||Object(p["j"])(this.value.spec.rkeConfig,"chartValues",{}),this.value.spec.rkeConfig.upgradeStrategy||Object(p["j"])(this.value.spec.rkeConfig,"upgradeStrategy",{controlPlaneConcurrency:"1",controlPlaneDrainOptions:{},workerConcurrency:"1",workerDrainOptions:{}}),this.value.spec.rkeConfig.machineGlobalConfig||Object(p["j"])(this.value.spec,"rkeConfig.machineGlobalConfig",{}),null!==(e=this.value.spec.rkeConfig.machineSelectorConfig)&&void 0!==e&&e.length||Object(p["j"])(this.value.spec,"rkeConfig.machineSelectorConfig",[{config:{}}]),{loadedOnce:!1,lastIdx:0,allPSPs:null,nodeComponent:null,credentialId:null,credential:null,machinePools:null,rke2Versions:null,k3sVersions:null,defaultRke2:"",defaultK3s:"",s3Backup:!1,versionInfo:{},membershipUpdate:{},showDeprecatedPatchVersions:!1,systemRegistry:null,registryHost:null,registryMode:null,registrySecret:null,userChartValues:{},userChartValuesTemp:{},addonsRev:0,clusterIsAlreadyCreated:!!this.value.id,fvFormRuleSets:[{path:"metadata.name",rules:["subDomain"],translationKey:"nameNsDescription.name.label"}],harvesterVersionRange:{}}},computed:{...Object(v["a"])({allCharts:"catalog/charts"}),...Object(v["a"])({features:"features/get"}),PUBLIC:()=>xe,PRIVATE:()=>Te,ADVANCED:()=>$e,rkeConfig(){return this.value.spec.rkeConfig},isElementalCluster(){var e,t;return this.provider===S["a"]||(null===(e=this.value)||void 0===e||null===(t=e.machineProvider)||void 0===t?void 0:t.toLowerCase())===S["d"].MACHINE_INV_SELECTOR_TEMPLATES.toLowerCase()},advancedTitleAlt(){const e=this.rkeConfig.machineSelectorConfig.length;return this.t("cluster.advanced.argInfo.machineSelector.titleAlt",{count:e})},chartValues(){return this.value.spec.rkeConfig.chartValues},serverConfig(){return this.value.spec.rkeConfig.machineGlobalConfig},agentConfig(){return this.value.agentConfig},unsupportedSelectorConfig(){let e=0,t=0,s=0;for(const o of null===(a=this.value.spec)||void 0===a||null===(r=a.rkeConfig)||void 0===r?void 0:r.machineSelectorConfig){var a,r;if(o.machineLabelSelector){const e=Object.keys(o.config||{});0===e.length||1===e.length&&"kubelet-arg"===e[0]?t++:s++}else e++}return console.log(`Global: ${e}, Kubelet Only: ${t}, Other: ${s}`),e>1||s>0},versionOptions(){var e,t;const s=(null===(e=this.liveValue)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.kubernetesVersion)||"",a=this.mode===u["o"]&&s.includes("rke2"),r=this.mode===u["o"]&&s.includes("k3s");let o=this.getAllOptionsAfterMinVersion(this.rke2Versions,a?s:null,this.defaultRke2),i=this.getAllOptionsAfterMinVersion(this.k3sVersions,r?s:null,this.defaultK3s);this.showDeprecatedPatchVersions||(o=this.filterOutDeprecatedPatchVersions(o,s),i=this.filterOutDeprecatedPatchVersions(i,s));const n=o.length&&!r,l=i.length&&!a,c=[];if(n&&(l&&c.push({kind:"group",label:this.t("cluster.provider.rke2")}),c.push(...o)),l&&(n&&c.push({kind:"group",label:this.t("cluster.provider.k3s")}),c.push(...i)),s){const e=c.find(e=>e.value===s);e?e.disabled=!1:c.unshift({label:s+" (current)",value:s})}return c},isK3s(){var e,t;return((null===(e=this.value)||void 0===e||null===(t=e.spec)||void 0===t?void 0:t.kubernetesVersion)||"").includes("k3s")},profileOptions(){var e;const t=((null===(e=this.agentArgs.profile)||void 0===e?void 0:e.options)||[]).map(e=>({label:e,value:e}));return t.unshift({label:"(None)",value:""}),t},pspOptions(){if(this.isK3s)return null;const e=[{label:"RKE2 Default",value:""}];if(this.allPSPs)for(const s of this.allPSPs)e.push({label:s.nameDisplay,value:s.id});const t=this.value.spec.defaultPodSecurityPolicyTemplateName;return t&&!e.find(e=>e.value===t)&&e.unshift({label:t+" (Current)",value:t}),e},disableOptions(){return this.serverArgs.disable.options.map(e=>({label:this.$store.getters["i18n/withFallback"](`cluster.${this.isK3s?"k3s":"rke2"}.systemService."${e}"`,null,e.replace(/^(rke2|rancher)-/,"")),value:e}))},cloudProviderOptions(){const e=[{label:"(None)",value:""}],t=this.$store.getters["plugins/cloudProviderForDriver"](this.provider);for(const a of this.agentArgs["cloud-provider-name"].options){const s=void 0===t,r=a===t,o="external"===a;let i=!1;(this.isHarvesterExternalCredential||this.isHarvesterIncompatible)&&r&&(i=!0),(s||r||o)&&e.push({label:this.$store.getters["i18n/withFallback"](`cluster.cloudProvider."${a}".label`,null,a),value:a,disabled:i})}const s=this.agentConfig["cloud-provider-name"];return s&&!e.find(e=>e.value===s)&&e.unshift({label:s+" (Current)",value:s}),e},selectedVersion(){const e=this.value.spec.kubernetesVersion;if(!e)return;const t=Object(N["e"])(this.versionOptions,"value",e);return t},haveArgInfo(){var e,t;return!(null===(e=this.selectedVersion)||void 0===e||!e.serverArgs||null===(t=this.selectedVersion)||void 0===t||!t.agentArgs)},serverArgs(){var e;return(null===(e=this.selectedVersion)||void 0===e?void 0:e.serverArgs)||{}},agentArgs(){var e;return(null===(e=this.selectedVersion)||void 0===e?void 0:e.agentArgs)||{}},chartVersions(){var e;return(null===(e=this.selectedVersion)||void 0===e?void 0:e.charts)||{}},showCisProfile(){return("custom"===this.provider||this.isElementalCluster)&&(this.serverArgs.profile||this.agentArgs.profile)},registryOptions(){return[xe,Te,$e].map(e=>({label:this.$store.getters["i18n/withFallback"](`cluster.privateRegistry.mode."${e}"`,null,e),value:e}))},needCredential(){return"custom"!==this.provider&&"import"!==this.provider&&!this.isElementalCluster&&this.mode!==u["u"]},hasMachinePools(){return"custom"!==this.provider&&"import"!==this.provider},unremovedMachinePools(){return this.machinePools.filter(e=>!e.remove)},machineConfigSchema(){let e;if(!this.hasMachinePools)return null;e=this.isElementalCluster?S["c"].MACHINE_INV_SELECTOR_TEMPLATES:`${b["c"].MACHINE_CONFIG_GROUP}.${this.provider}config`;const t=this.$store.getters["management/schemaFor"](e);return t},nodeTotals(){const e=["etcd","controlPlane","worker"],t={},s={color:{},label:{},icon:{},tooltip:{}};for(const a of e)t[a]=0,s.color[a]="bg-success",s.icon[a]="icon-checkmark";for(const a of this.machinePools){if(a.remove)continue;const s=parseInt(a.pool.quantity,10);if(!isNaN(s))for(const r of e)t[r]=t[r]+(a.pool[r+"Role"]?s:0)}for(const a of e)s.label[a]=this.t("cluster.machinePool.nodeTotals.label."+a,{count:t[a]}),s.tooltip[a]=this.t("cluster.machinePool.nodeTotals.tooltip."+a,{count:t[a]});return 0===t.etcd?(s.color.etcd="bg-error",s.icon.etcd="icon-x"):(1===t.etcd||t.etcd%2===0||t.etcd>7)&&(s.color.etcd="bg-warning",s.icon.etcd="icon-warning"),0===t.controlPlane?(s.color.controlPlane="bg-error",s.icon.controlPlane="icon-x"):1===t.controlPlane&&(s.color.controlPlane="bg-warning",s.icon.controlPlane="icon-warning"),0===t.worker?(s.color.worker="bg-error",s.icon.worker="icon-x"):1===t.worker&&(s.color.worker="bg-warning",s.icon.worker="icon-warning"),s},enabledSystemServices:{get(){const e=x()(this.serverArgs.disable.options,this.serverConfig.disable||[]);return e},set(e){const t=x()(this.serverArgs.disable.options,e);Object(p["j"])(this.serverConfig,"disable",t)}},showCloudConfigYaml(){if(!this.agentArgs["cloud-provider-name"])return!1;const e=this.agentConfig["cloud-provider-name"];if(!e)return!1;switch(e){case"none":return!1;case"aws":return!1;case"rancher-vsphere":return!1;case Ee:return!1;default:return!0}},showVsphereNote(){if(!this.agentArgs["cloud-provider-name"])return!1;const e=this.agentConfig["cloud-provider-name"];return"rancher-vsphere"===e},showCni(){return!!this.serverArgs.cni},showCloudProvider(){return this.agentArgs["cloud-provider-name"]},addonNames(){const e=[],t=this.serverConfig.cni;if(t){const s=t.split(",").map(e=>"rke2-"+e);e.push(...s)}return this.showCloudProvider&&("rancher-vsphere"===this.agentConfig["cloud-provider-name"]&&e.push("rancher-vsphere-cpi","rancher-vsphere-csi"),this.agentConfig["cloud-provider-name"]===Ee&&e.push(Re)),e},addonVersions(){const e=this.addonNames.map(e=>this.chartVersionFor(e));return e.filter(e=>!!e)},showk8s21LegacyWarning(){const e=this.features(C["c"]);if(!e)return!1;const t=oe.a.coerce(this.value.spec.kubernetesVersion);return oe.a.satisfies(t,">=1.21.0")},canManageMembers(){return Object(se["a"])(this.$store)},isHarvesterDriver(){return this.$route.query.type===Ee},defaultVersion(){var e,t;const s=this.versionOptions.filter(e=>!!e.value),a=null===(e=s[0])||void 0===e?void 0:e.value,r=null===(t=s.find(e=>e.value===this.defaultRke2))||void 0===t?void 0:t.value,o=this.getAllOptionsAfterMinVersion(this.rke2Versions,null),i=o.length;let n;if(this.isHarvesterDriver&&i){const e=o.filter(e=>Object(B["a"])(e.value))||[];var l;if(e.length>0)n=null===(l=e[0])||void 0===l?void 0:l.value}return n||(n=r||a),n},ciliumIpv6:{get(){var e,t,s;this.serverConfig.cni;return(null===(e=this.userChartValues[this.chartVersionKey("rke2-cilium")])||void 0===e||null===(t=e.cilium)||void 0===t||null===(s=t.ipv6)||void 0===s?void 0:s.enabled)||!1},set(e){var t;const s=this.chartVersionKey("rke2-cilium"),a=this.userChartValues[s];Object(p["j"])(this,"userChartValues",{...this.userChartValues,[s]:{...a,cilium:{...null===a||void 0===a?void 0:a.cilium,ipv6:{...null===a||void 0===a||null===(t=a.cilium)||void 0===t?void 0:t.ipv6,enabled:e}}}})}},showIpv6Warning(){const e=this.serverConfig["cluster-cidr"]||"",t=this.serverConfig["service-cidr"]||"";return e.includes(":")||t.includes(":")},appsOSWarning(){var e,t;if(this.mode!==u["o"])return null;const{linuxWorkerCount:s,windowsWorkerCount:a}=(null===(e=this.value)||void 0===e||null===(t=e.mgmt)||void 0===t?void 0:t.status)||{};if(a){if(!s&&this.machinePools.find(e=>{var t;return"linux"===(null===e||void 0===e||null===(t=e.config)||void 0===t?void 0:t.os)}))return this.t("cluster.banner.os",{newOS:"Linux",existingOS:"Windows"})}else if(this.machinePools.find(e=>{var t;return"windows"===(null===e||void 0===e||null===(t=e.config)||void 0===t?void 0:t.os)}))return this.t("cluster.banner.os",{newOS:"Windows",existingOS:"Linux"});return null},showForm(){return!!this.credentialId||!this.needCredential},isHarvesterExternalCredential(){var e,t;return"external"===(null===(e=this.credential)||void 0===e||null===(t=e.harvestercredentialConfig)||void 0===t?void 0:t.clusterType)},isHarvesterIncompatible(){var e,t;let s=(this.chartVersions["harvester-cloud-provider"]||{})["version"],a=(this.chartVersions["harvester-csi-driver"]||{})["version"];const r=null===(e=this.harvesterVersionRange)||void 0===e?void 0:e["harvester-cloud-provider"],o=null===(t=this.harvesterVersionRange)||void 0===t?void 0:t["harvester-csi-provider"];return(s||"").endsWith("00")&&(s=s.slice(0,-2)),(a||"").endsWith("00")&&(a=a.slice(0,-2)),!(!r||!o)&&(!oe.a.satisfies(s,r)||!oe.a.satisfies(a,o))}},watch:{s3Backup(e){var t;e?Object(p["i"])(null===(t=this.rkeConfig.etcd)||void 0===t?void 0:t.s3)&&Object(p["j"])(this.rkeConfig.etcd,"s3",{}):Object(p["j"])(this.rkeConfig.etcd,"s3",null)},credentialId(e){e?(this.credential=this.$store.getters["rancher/byId"](b["u"].CLOUD_CREDENTIAL,this.credentialId),this.isHarvesterDriver&&this.setHarvesterVersionRange()):this.credential=null,this.value.spec.cloudCredentialSecretName=e},addonNames(e,t){const s=t.length!==e.length||x()(e,t).length;s&&this.$nextTick(()=>this.initAddons())},selectedVersion(){this.versionInfo={},this.$nextTick(()=>this.initAddons()),this.mode===u["m"]&&this.initServerAgentArgs()},showCni(e){if(e){if(!this.serverConfig.cni){const e=this.serverArgs.cni.default;Object(p["j"])(this.serverConfig,"cni",e)}}else Object(p["j"])(this.serverConfig,"cni",void 0)},showCloudProvider(e){e||Object(p["j"])(this.agentConfig,"cloud-provider-name",void 0)}},mounted(){window.rke=this},created(){this.registerBeforeHook(this.saveMachinePools,"save-machine-pools"),this.registerBeforeHook(this.setRegistryConfig,"set-registry-config"),this.registerAfterHook(this.cleanupMachinePools,"cleanup-machine-pools"),this.registerAfterHook(this.saveRoleBindings,"save-role-bindings")},methods:{nlToBr:M["l"],set:p["j"],async initMachinePools(e){const t=[];if(null!==e&&void 0!==e&&e.length)for(const a of e){let e;e=this.isElementalCluster?S["c"].MACHINE_INV_SELECTOR_TEMPLATES:`${b["c"].MACHINE_CONFIG_GROUP}.${a.machineConfigRef.kind.toLowerCase()}`;const r="pool"+ ++this.lastIdx;let o,i=!1;if(this.$store.getters["management/canList"](e))try{o=await this.$store.dispatch("management/find",{type:e,id:`${this.value.metadata.namespace}/${a.machineConfigRef.name}`})}catch(s){404===(null===s||void 0===s?void 0:s.status)&&this.isElementalCluster&&(i=!0)}t.push({id:r,remove:!1,create:!1,update:!0,pool:Object(p["e"])(a),config:o?await this.$store.dispatch("management/clone",{resource:o}):null,configMissing:i})}this.machinePools=t},async addMachinePool(e){if(!this.machineConfigSchema&&!this.isElementalCluster)return;const t=this.machinePools.length||0,s=await this.$store.dispatch("management/createPopulated",{type:this.machineConfigSchema.id,metadata:{namespace:b["g"]}});s.applyDefaults(e,this.machinePools);const a="pool"+ ++this.lastIdx,r={id:a,config:s,remove:!1,create:!0,update:!1,pool:{name:a,etcdRole:0===t,controlPlaneRole:0===t,workerRole:!0,hostnamePrefix:"",labels:{},quantity:1,unhealthyNodeTimeout:"0m",machineConfigRef:{kind:this.machineConfigSchema.attributes.kind,name:null}}};"vmwarevsphere"===this.provider&&(r.pool.machineOS="linux"),this.isElementalCluster&&(r.pool.machineConfigRef.apiVersion="elemental.cattle.io/v1beta1"),this.machinePools.push(r),this.$nextTick(()=>{var e;null!==(e=this.$refs.pools)&&void 0!==e&&e.select&&this.$refs.pools.select(a)})},removeMachinePool(e){const t=this.machinePools[e];t&&(t.create?Object(N["i"])(this.machinePools,t):t.remove=!0)},async syncMachineConfigWithLatest(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.config)&&void 0!==t&&t.id){const t=await this.$store.dispatch("management/find",{type:e.config.type,id:e.config.id,opt:{force:!0}}),s=await this.$store.dispatch("management/clone",{resource:e.config}),a=await this.$store.dispatch("management/clone",{resource:t});delete s.metadata,e.config=V()(a,s)}},async saveMachinePools(){const e=[];for(const s of this.machinePools){if(s.remove)continue;await this.syncMachineConfigWithLatest(s),Object(p["j"])(s.pool,"name",Object(z["b"])(s.pool.name)||"pool");const a=`${this.value.metadata.name}-${s.pool.name}`.substr(0,50).toLowerCase();if(s.create){var t;null!==(t=s.config.metadata)&&void 0!==t&&t.name||(s.config.metadata.generateName=`nc-${a}-`);const e=await s.config.save();s.config=e,s.pool.machineConfigRef.name=e.metadata.name,s.create=!1,s.update=!0}else s.update&&(s.config=await s.config.save());s.pool.hostnamePrefix||(s.pool.hostnamePrefix=a+"-"),e.push(s.pool)}this.value.spec.rkeConfig.machinePools=e},async cleanupMachinePools(){for(const t of this.machinePools)if(t.remove&&t.config)try{await t.config.remove()}catch(e){}},async saveRoleBindings(){await this.value.waitForMgmt(),this.membershipUpdate.save&&await this.membershipUpdate.save(this.value.mgmt.id)},validationPassed(){return"custom"===this.provider||this.isElementalCluster||!!this.credentialId},cancelCredential(){this.$refs.cruresource&&this.$refs.cruresource.emitOrRoute()},done(){let e="c-cluster-product-resource";this.mode!==u["m"]||"import"!==this.provider&&"custom"!==this.provider||(e="c-cluster-product-resource-namespace-id"),this.$router.push({name:e,params:{cluster:this.$route.params.cluster,product:this.$store.getters["productId"],resource:b["c"].RANCHER_CLUSTER,namespace:this.value.metadata.namespace,id:this.value.metadata.name}})},showAddonConfirmation(){return new Promise((e,t)=>{this.$store.dispatch("cluster/promptModal",{component:"AddonConfigConfirmationDialog",resources:[t=>e(t)]})})},async saveOverride(e){var t,s,a,r;if(this.errors&&Object(N["c"])(this.errors),this.isEdit&&(null===(t=this.liveValue)||void 0===t||null===(s=t.spec)||void 0===s?void 0:s.kubernetesVersion)!==(null===(a=this.value)||void 0===a||null===(r=a.spec)||void 0===r?void 0:r.kubernetesVersion)){const t=await this.showAddonConfirmation();if(!t)return e("cancelled")}if("aws"===this.value.cloudProvider){const e=this.machinePools.some(e=>!e.config.iamInstanceProfile);e&&this.errors.push(this.t("cluster.validation.iamInstanceProfileName",{},!0))}for(const[p]of this.machinePools.entries()){var o;if("function"===typeof(null===(o=this.$refs.pool[p])||void 0===o?void 0:o.test))try{const e=await this.$refs.pool[p].test();Array.isArray(e)&&e.length>0&&this.errors.push(...e)}catch(m){this.errors.push(m)}}if(this.value.metadata.name||this.agentConfig["cloud-provider-name"]!==Ee||this.errors.push(this.t("validation.required",{key:this.t("cluster.name.label")},!0)),this.errors.length)e(!1);else{try{var i,n,l,c;const e=Object(p["g"])(this.credential,"decodedData.clusterId")||"";this.applyChartValues(this.value.spec.rkeConfig);const t=this.isEdit&&(null===(i=this.liveValue)||void 0===i||null===(n=i.spec)||void 0===n?void 0:n.kubernetesVersion)!==(null===(l=this.value)||void 0===l||null===(c=l.spec)||void 0===c?void 0:c.kubernetesVersion);if(this.agentConfig["cloud-provider-name"]===Ee&&e&&(this.isCreate||t)){var d,u,v,h;const t=null===(d=this.machinePools)||void 0===d||null===(u=d[0])||void 0===u||null===(v=u.config)||void 0===v?void 0:v.vmNamespace,s=await this.$store.dispatch("management/request",{url:`/k8s/clusters/${e}/v1/harvester/kubeconfig`,method:"POST",data:{clusterRoleName:"harvesterhci.io:cloudprovider",namespace:t,serviceAccountName:this.value.metadata.name}}),a=s.data,r=await this.createKubeconfigSecret(a);Object(p["j"])(this.agentConfig,"cloud-provider-config","secret://fleet-default:"+(null===r||void 0===r||null===(h=r.metadata)||void 0===h?void 0:h.name)),Object(p["j"])(this.chartValues,Re+".clusterName",this.value.metadata.name),Object(p["j"])(this.chartValues,Re+".cloudConfigPath","/var/lib/rancher/rke2/etc/config-files/cloud-provider-config")}}catch(g){return this.errors.push(g),void e(!1)}await this.save(e)}},async createKubeconfigSecret(e=""){const t=this.value.metadata.name,s=await this.$store.dispatch("management/create",{type:b["C"],metadata:{namespace:"fleet-default",generateName:"harvesterconfig",annotations:{[f["c"].SECRET_AUTH]:t,[f["c"].SECRET_WILL_DELETE]:"true"}},data:{credential:Object(ne["b"])(e)}});return s.save({url:"/v1/secrets",method:"POST"})},cancel(){this.$router.push({name:"c-cluster-product-resource",params:{cluster:this.$route.params.cluster,product:this.$store.getters["productId"],resource:b["c"].RANCHER_CLUSTER}})},chartVersionFor(e){const t=this.chartVersions[e];if(!t)return null;const s=this.$store.getters["catalog/version"]({repoType:"cluster",repoName:t.repo,chartName:e,versionName:t.version});return s},async initAddons(){for(const e of this.addonVersions){if(this.versionInfo[e.name])continue;const t=await this.$store.dispatch("catalog/getVersionInfo",{repoType:"cluster",repoName:e.repoName,chartName:e.name,versionName:e.version});Object(p["j"])(this.versionInfo,e.name,t);const s=this.chartVersionKey(e.name);this.userChartValues[s]||(this.userChartValues[s]={})}},labelForAddon(e){const t=Object(M["b"])(e.replace(/^(rke|rke2|rancher)-/,""))+" Configuration";return this.$store.getters["i18n/withFallback"](`cluster.addonChart."${e}"`,null,t)},showAddons(){this.addonsRev++,this.addonNames.forEach(e=>{var t;const s=null!==(t=this.versionInfo[e])&&void 0!==t&&t.questions?this.initYamlEditor(e):{};Object(p["j"])(this.userChartValuesTemp,e,s)}),this.refreshYamls()},refreshYamls(){const e=Object.keys(this.$refs).filter(e=>e.startsWith("yaml"));for(const t of e){const e=this.$refs[t],s=A()(e)?e:[e];for(const t of s)null===t||void 0===t||t.refresh()}},updateValues(e,t){Object(p["j"])(this.userChartValuesTemp,e,t),this.syncChartValues(e)},syncChartValues:E()((function(e){var t;const s=null===(t=this.versionInfo[e])||void 0===t?void 0:t.values,a=this.userChartValuesTemp[e],r=Object(p["f"])(s,a);this.userChartValues[this.chartVersionKey(e)]=r}),250,{leading:!0}),updateQuestions(e){this.syncChartValues(e)},initQuestions(e){const t=this.versionInfo[e],s=this.initYamlEditor(e);return{...t,values:s}},initYamlEditor(e){const t=this.versionInfo[e],s=this.chartVersionKey(e);return V()({},(null===t||void 0===t?void 0:t.values)||{},this.userChartValues[s]||{})},initServerAgentArgs(){for(const e in this.serverArgs)if(void 0===this.serverConfig[e]){const t=this.serverArgs[e].default;Object(p["j"])(this.serverConfig,e,void 0!==t?t:void 0)}for(const e in this.agentArgs)if(void 0===this.agentConfig[e]){const t=this.agentArgs[e].default;Object(p["j"])(this.agentConfig,e,void 0!==t?t:void 0)}this.serverConfig.profile||Object(p["j"])(this.serverConfig,"profile",null)},chartVersionKey(e){const t=this.addonVersions.find(t=>t.name===e);return t?`${e}-${t.version}`:e},onMembershipUpdate(e){this.$set(this,"membershipUpdate",e)},canRemoveKubeletRow(e,t){return 0!==t},async initRegistry(){var e;let t=xe,s=(null===(e=this.agentConfig)||void 0===e?void 0:e["system-default-registry"])||"",a=null,r=this.rkeConfig.registries;if(this.systemRegistry=(await this.$store.dispatch("management/find",{type:b["o"].SETTING,id:ie["b"].SYSTEM_DEFAULT_REGISTRY})).value||"",r||(r={},Object(p["j"])(this.rkeConfig,"registries",r)),r.configs||Object(p["j"])(r,"configs",{}),r.mirrors||Object(p["j"])(r,"mirrors",{}),s?t=Te:this.systemRegistry&&(s=this.systemRegistry,t=Te),Object.keys(r.mirrors||{}).length||Object.keys(r.configs||{}).length>1)t=$e;else{const e=Object.keys(r.configs)[0],o=r.configs[e];o&&(e!==s||o.caBundle||o.insecureSkipVerify||o.tlsSecretName?t=$e:(t=Te,a=o.authConfigSecretName))}this.registryHost=s,this.registryMode=t,this.registrySecret=a},setRegistryConfig(){const e=(this.registryHost||"").trim();this.registryMode===xe?this.systemRegistry?Object(p["j"])(this.agentConfig,"system-default-registry",""):Object(p["j"])(this.agentConfig,"system-default-registry",void 0):e&&e!==this.systemRegistry?Object(p["j"])(this.agentConfig,"system-default-registry",e):Object(p["j"])(this.agentConfig,"system-default-registry",void 0),this.registryMode===$e||(this.registryMode===Te?(Object(p["j"])(this.rkeConfig.registries,"mirrors",{}),this.registrySecret?Object(p["j"])(this.rkeConfig.registries,"configs",{[e]:{authConfigSecretName:this.registrySecret,caBundle:null,insecureSkipVerify:!1,tlsSecretName:null}}):Object(p["j"])(this.rkeConfig.registries,"configs",{})):(Object(p["j"])(this.rkeConfig.registries,"configs",{}),Object(p["j"])(this.rkeConfig.registries,"mirrors",{})))},getAllOptionsAfterMinVersion(e,t,s){const a=(e||[]).filter(e=>!!e.serverArgs).map(e=>{let a=!1,r=!1;return t&&(a=Object(D["a"])(e.id,t)<0),s&&(r=Object(D["a"])(s,e.id)<0),{label:e.id+(r?` (${this.t("cluster.kubernetesVersion.experimental")})`:""),value:e.id,sort:Object(D["c"])(e.id),serverArgs:e.serverArgs,agentArgs:e.agentArgs,charts:e.charts,disabled:a}}),r=Object(h["a"])(a,"sort:desc"),o=this.getMostRecentPatchVersions(r),i=r.map(e=>{const t=`${oe.a.major(e.value)}.${oe.a.minor(e.value)}`;return o[t]===e.value?e:{...e,label:`${e.label} (${this.t("cluster.kubernetesVersion.deprecated")})`}});return i},getMostRecentPatchVersions(e){const t={};return e.forEach(e=>{const s=`${oe.a.major(e.value)}.${oe.a.minor(e.value)}`;t[s]||(t[s]=e.value)}),t},filterOutDeprecatedPatchVersions(e,t){const s=this.getMostRecentPatchVersions(e),a=e.filter(e=>{if(oe.a.prerelease(e.value))return!0;const a=`${oe.a.major(e.value)}.${oe.a.minor(e.value)}`;return e===t||s[a]===e.value});return a},generateYaml(){const e=this.value,t=this.$store.getters["currentStore"](e),s=this.$store.getters[t+"/all"](b["B"]),a=Object(p["e"])(e);this.applyChartValues(a.spec.rkeConfig);const r=Object(L["b"])(s,e.type,a);return r},applyChartValues(e){e.chartValues={},this.addonNames.forEach(t=>{const s=this.chartVersionKey(t),a=this.userChartValues[s];a&&Object(p["j"])(e.chartValues,t,a)})},get:p["g"],setHarvesterDefaultCloudProvider(){!this.isHarvesterDriver||this.mode!==u["m"]||this.agentConfig["cloud-provider-name"]||this.isHarvesterExternalCredential||this.isHarvesterIncompatible?this.agentConfig["cloud-provider-name"]="":this.agentConfig["cloud-provider-name"]=Ee},async setHarvesterVersionRange(){var e,t,s,a;const r=null===(e=this.credential)||void 0===e||null===(t=e.decodedData)||void 0===t?void 0:t.clusterId,o=null===(s=this.credential)||void 0===s||null===(a=s.decodedData)||void 0===a?void 0:a.clusterType;if(r&&"imported"===o){const e=`/k8s/clusters/${r}/v1`,t=await this.$store.dispatch("cluster/request",{url:`${e}/${b["j"].SETTING}s`}),s=((null===t||void 0===t?void 0:t.data)||[]).find(e=>"harvester-csi-ccm-versions"===e.id);this.harvesterVersionRange=s?JSON.parse(s.value||s.default||"{}"):{}}this.setHarvesterDefaultCloudProvider()}}},Ie=Ae,Ve=(s("8e04"),Object(Pe["a"])(Ie,P,O,!1,null,"ce1d46be",null)),je=Ve.exports;const Ne={template:1,kontainer:2,rke1:3,rke2:3,register:4,custom:5,custom1:5,custom2:5},Le="/meta/proxy";var Me={name:"CruCluster",components:{CruResource:n["a"],EmberPage:c["a"],Import:w["a"],Loading:i["a"],Rke2Config:je,SelectIconGrid:l["a"],ToggleSwitch:d["a"]},mixins:[o["a"]],props:{realMode:{type:String,required:!0},mode:{type:String,required:!0},value:{type:Object,default:null}},async fetch(){const e={mgmtClusters:this.$store.dispatch("management/findAll",{type:b["o"].CLUSTER}),provClusters:this.$store.dispatch("management/findAll",{type:b["c"].RANCHER_CLUSTER}),catalog:this.$store.dispatch("catalog/load")};this.$store.getters["management/canList"](b["o"].NODE_DRIVER)&&(e.nodeDrivers=this.$store.dispatch("management/findAll",{type:b["o"].NODE_DRIVER})),this.$store.getters["management/canList"](b["o"].KONTAINER_DRIVER)&&(e.kontainerDrivers=this.$store.dispatch("management/findAll",{type:b["o"].KONTAINER_DRIVER})),this.value.id&&!this.value.isRke2&&(this.$store.getters["management/canList"](b["o"].NODE_POOL)&&(e.rke1NodePools=this.$store.dispatch("management/findAll",{type:b["o"].NODE_POOL})),this.$store.getters["management/canList"](b["o"].NODE_TEMPLATE)&&(e.rke1NodeTemplates=this.$store.dispatch("management/findAll",{type:b["o"].NODE_TEMPLATE})));const t=await Object(k["a"])(e);this.nodeDrivers=t.nodeDrivers||[],this.kontainerDrivers=t.kontainerDrivers||[],this.value.spec||Object(p["j"])(this.value,"spec",{}),this.value.id||(this.value.metadata||Object(p["j"])(this.value,"metadata",{}),Object(p["j"])(this.value.metadata,"namespace",b["g"])),this.nodeDrivers.forEach(e=>{var t,s,a;if((null===(t=e.spec)||void 0===t||!t.builtin)&&null!==(s=e.spec)&&void 0!==s&&s.uiUrl&&null!==(a=e.spec)&&void 0!==a&&a.active){var r;const t=(null===(r=e.spec)||void 0===r?void 0:r.displayName)||e.id;let s=e.spec.uiUrl.replace(/\.js$/,".css");(s.startsWith("http://")||s.startsWith("https://"))&&(s=`${Le}/${s}`),this.loadStylesheet(s,"driver-ui-css-"+e.id),this.iconClasses[t]="machine-driver "+t}})},data(){const e=this.$route.query[u["h"]]||null,t=this.$route.query[u["b"]]||null,s=this.realMode===u["r"];return{nodeDrivers:[],kontainerDrivers:[],subType:e,chart:t,isImport:s,providerCluster:null,iconClasses:{}}},computed:{...Object(v["a"])({allCharts:"catalog/charts"}),...Object(v["a"])("type-map",["activeProducts"]),preferredProvisioner:Object(m["u"])(m["l"]),_RKE1:()=>m["s"],_RKE2:()=>m["t"],emberLink(){if(this.value){var e;if(this.value.isRke2&&(this.value.isCustom&&this.mode===u["o"]||this.value.isCustom&&this.as===u["l"]&&this.mode===u["u"]||"custom"===(this.subType||"").toLowerCase()))return this.selectType("custom",!1),"";if(this.value.isRke2&&this.value.machineProvider)return this.selectType(this.value.machineProvider,!1),"";if(this.subType){const e=this.subTypes.find(e=>e.id===this.subType);return null!==e&&void 0!==e&&e.link?e.link:(this.selectType(this.subType,!1),"")}if(null!==(e=this.value.mgmt)&&void 0!==e&&e.emberEditPath)return this.value.mgmt.emberEditPath}return""},rke2Enabled:Object(C["f"])(C["e"]),showRkeToggle(){return this.rke2Enabled&&!this.isImport},provisioner:{get(){return this.rke2Enabled?this.preferredProvisioner:m["s"]},set(e){this.preferredProvisioner=e}},isRke1(){return this.provisioner===m["s"]},isRke2(){return this.value.isRke2},templateOptions(){if(!this.rke2Enabled)return[];const e=Object(g["a"])(this.allCharts,{showTypes:f["d"]._CLUSTER_TPL});return e},subTypes(){const e=this.$store.getters,t=this.isImport,a=!!this.activeProducts.find(e=>e.name===S["b"]),r=[],o=this.templateOptions,i=e["plugins/clusterDrivers"],n=this.nodeDrivers.filter(e=>e.spec.active&&"active"===e.state).map(e=>e.spec.displayName||e.id);return this.kontainerDrivers.filter(e=>t?e.showImport:e.showCreate).forEach(e=>{i.includes(e.driverName)?l(e.driverName,"kontainer",!1):l(e.driverName,"kontainer",!1,t?e.emberImportPath:e.emberCreatePath)}),t?l("import","custom",!1):(o.forEach(t=>{r.push({id:"chart:"+t.id,label:t.chartNameDisplay,description:t.chartDescription,icon:t.icon||s("1c16"),group:"template",tag:e["i18n/t"]("generic.techPreview")})}),this.isRke1?(n.forEach(e=>{l(e,"rke1",!1,"/g/clusters/add/launch/"+e,this.iconClasses[e])}),l("custom","custom1",!1,"/g/clusters/add/launch/custom")):(n.forEach(e=>{l(e,"rke2",!1)}),l("custom","custom2",!1),a&&l(S["a"],"custom2",!1))),r;function l(t,a,o=!1,i=null,n){const l=e["i18n/withFallback"](`cluster.provider."${t}"`,null,t),c=e["i18n/withFallback"](`cluster.providerDescription."${t}"`,null,""),d="";let u;try{u=s("499d")(`./${t}.svg`)}catch(h){}u?n=void 0:n||(u=s("2de0"));const v={id:t,label:l,description:c,icon:u,iconClass:n,group:a,disabled:o,link:i,tag:d};r.push(v)}},groupedSubTypes(){const e={};for(const t of this.subTypes){const s=t.group;let a=e[s];a||(a={name:s,label:this.$store.getters["i18n/withFallback"](`cluster.providerGroup."${this.isImport?"register-":"create-"}${s}"`,null,s),types:[],sort:Ne[s]},e[s]=a),a.types.push(t)}for(const t in e)e[t].types=Object(h["a"])(e[t].types,"label");return Object(h["a"])(Object.values(e),"sort")}},methods:{loadStylesheet(e,t){if(!t)return void console.error("loadStylesheet called without an id");if($("#"+t).length>0)return;const s=document.createElement("link");s.onerror=()=>{s.remove()},s.rel="stylesheet",s.src=e,s.href=e,s.id=t,document.getElementsByTagName("HEAD")[0].appendChild(s)},cancel(){this.$router.push({name:"c-cluster-product-resource",params:{cluster:this.$route.params.cluster,product:this.$store.getters["productId"],resource:b["c"].RANCHER_CLUSTER}})},colorFor(e){return"color"+(Ne[e.group]||1)},clickedType(e){const t=e.id,s=t.split(":",2);if("chart"===s[0]){var a;const e=this.$store.getters["catalog/chart"]({key:s[1]});let t;return this.$store.getters["management/canList"](b["o"].CLUSTER)&&(t=this.$store.getters["management/all"](b["o"].CLUSTER).find(e=>e.isLocal)),void e.goToInstall(u["c"],(null===(a=t)||void 0===a?void 0:a.id)||y["a"],!0)}this.$router.applyQuery({[u["h"]]:t}),this.selectType(t)},selectType(e,t=!0){const s=e.split(":",2);"chart"===s[0]?(this.subType="chart",this.$emit("set-subtype",this.$store.getters["i18n/withFallback"]("cluster.provider.chart"))):(this.subType=e,this.$emit("set-subtype",this.$store.getters["i18n/withFallback"](`cluster.provider."${e}"`,null,e))),t&&this.$fetch()}}},De=Me,Be=(s("79f2"),Object(Pe["a"])(De,a,r,!1,null,null,null));t["default"]=Be.exports}}]);
//# sourceMappingURL=elemental-1.0.0.umd.min.edit.js.map
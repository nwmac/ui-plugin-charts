{"version":3,"sources":["webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/index.vue?be78","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/index.vue?f5a4","webpack://elemental-1.0.0/./.shell/assets/images/providers sync ^\\.\\/.*\\.svg$","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/index.vue?4c97","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/MachinePool.vue?6dc4","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/rke2.vue?d835","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/rke2.vue?54af","webpack://elemental-1.0.0/./edit/elemental.cattle.io.machineregistration.vue?61de","webpack://elemental-1.0.0/edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.0.0/./edit/elemental.cattle.io.machineregistration.vue?9fb7","webpack://elemental-1.0.0/./edit/elemental.cattle.io.machineregistration.vue","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/rke2.vue?d9b9","webpack://elemental-1.0.0/./.shell/chart sync \\.vue$","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/MachinePool.vue?248e","webpack://elemental-1.0.0/./edit/elemental.cattle.io.managedosimage.vue?5771","webpack://elemental-1.0.0/edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.0.0/./edit/elemental.cattle.io.managedosimage.vue?2e45","webpack://elemental-1.0.0/./edit/elemental.cattle.io.managedosimage.vue","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/MachinePool.vue?0081","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/index.vue?fe63","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/rke2.vue?db47","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/MachinePool.vue?18eb","webpack://elemental-1.0.0/edit/provisioning.cattle.io.cluster/MachinePool.vue","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/MachinePool.vue?3a7a","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/MachinePool.vue","webpack://elemental-1.0.0/edit/provisioning.cattle.io.cluster/rke2.vue","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/rke2.vue?0647","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/rke2.vue","webpack://elemental-1.0.0/edit/provisioning.cattle.io.cluster/index.vue","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/index.vue?37c2","webpack://elemental-1.0.0/./edit/provisioning.cattle.io.cluster/index.vue"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","content","__esModule","default","locals","add","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","render","_vm","this","_h","$createElement","_c","_self","value","attrs","doneRoute","mode","errors","on","save","done","staticClass","class","hasBeenCreated","_v","_s","t","model","callback","$$v","expression","ref","editorMode","cloudConfig","isView","_e","onFileSelected","_l","err","key","domProps","machineInventoryLabels","$event","setLabels","machineInventoryAnnotations","setAnnotations","labels","annotations","staticRenderFns","name","components","Loading","CruResource","YamlEditor","KeyValue","Banner","FileSelector","NameNsDescription","Tabbed","Tab","mixins","props","type","required","data","yamlErrors","watch","handler","immediate","computed","isCreate","methods","saveCb","component","clusterTargetOptions","clusterTargets","spec","$set","trim","LabeledInput","LabeledSelect","elementalClusters","label","clusterName","handleClusterTargets","targetsArray","$fetchState","emberLink","subType","subTypes","cancel","selectType","scopedSlots","_u","fn","obj","staticStyle","showRkeToggle","_RKE1","_RKE2","includes","provisioner","types","colorFor","clickedType","proxy","initialValue","liveValue","pending","loadedOnce","error","validationPassed","fvFormIsValid","applyHooks","generateYaml","saveOverride","fvUnreportedValidationErrors","needCredential","credentialId","provider","cancelCredential","showForm","fvGetAndReportPathRules","appsOSWarning","directives","rawName","nodeTotals","tooltip","color","etcd","icon","controlPlane","worker","addMachinePool","removeMachinePool","idx","remove","pool","refInFor","machinePools","unremovedMachinePools","length","refreshYamls","haveArgInfo","isHarvesterDriver","isHarvesterIncompatible","showCloudProvider","versionOptions","showDeprecatedPatchVersions","clusterIsAlreadyCreated","cloudProviderOptions","agentConfig","style","serverArgs","cni","options","serverConfig","ciliumIpv6","pspOptions","profileOptions","agentArgs","enableNetworkPolicy","opt","enabledSystemServices","mgmt","onMembershipUpdate","rkeConfig","disableSnapshots","s3Backup","metadata","namespace","registerBeforeHook","get","upgradeStrategy","registryOptions","registryMode","PUBLIC","registryHost","PRIVATE","registrySecret","ADVANCED","showAddons","versionInfo","addonVersions","addonsRev","v","_key","labelForAddon","questions","userChartValuesTemp","updateQuestions","initYamlEditor","updateValues","canRemoveKubeletRow","machineLabelSelector","matchExpressions","matchLabels","config","row","advancedTitleAlt","machineSelectorConfig","_n","isWindows","configComponent","tag","cluster","uuid","updateMachineCount","unhealthyNodeTimeout","unhealthyNodeTimeoutInteger","Checkbox","Taints","AdvancedSection","UnitInput","old","HARVESTER","HARVESTER_CLOUD_PROVIDER","ACE","AgentEnv","ArrayList","ArrayListGrouped","BadgeState","ClusterMembershipEditor","DrainOptions","Labels","MachinePool","MatchExpressions","Questions","RadioGroup","RegistryConfigs","RegistryMirrors","S3Config","SelectCredential","SelectOrCreateAuthSecret","rke2Versions","url","k3sVersions","hash","defaultRke2","defaultK3s","set","s3","snapshotRetention","snapshotScheduleCron","controlPlaneConcurrency","controlPlaneDrainOptions","workerConcurrency","workerDrainOptions","lastIdx","allPSPs","nodeComponent","credential","membershipUpdate","systemRegistry","userChartValues","fvFormRuleSets","path","rules","translationKey","harvesterVersionRange","allCharts","features","isElementalCluster","count","chartValues","unsupportedSelectorConfig","kubeletOnly","other","global","console","allValidRke2Versions","allValidK3sVersions","out","kind","existing","isK3s","disableOptions","disabled","selectedVersion","chartVersions","showCisProfile","hasMachinePools","machineConfigSchema","schemaAddress","counts","showCloudConfigYaml","showVsphereNote","showCni","addonNames","names","showk8s21LegacyWarning","canManageMembers","defaultVersion","cilium","ipv6","enabled","showIpv6Warning","linuxWorkerCount","windowsWorkerCount","newOS","existingOS","isHarvesterExternalCredential","ccmRke2Version","csiRke2Version","semver","mounted","window","created","nlToBr","configMissing","create","update","resource","etcdRole","controlPlaneRole","workerRole","hostnamePrefix","quantity","machineConfigRef","removeObject","entry","force","machinePool","finalPools","routeName","params","product","showAddonConfirmation","resources","clear","btnCb","method","clusterRoleName","serviceAccountName","generateName","chartVersionFor","repoType","repoName","chartName","versionName","syncChartValues","leading","initQuestions","values","initServerAgentArgs","chartVersionKey","regs","setRegistryConfig","authConfigSecretName","caBundle","insecureSkipVerify","tlsSecretName","getAllOptionsAfterMinVersion","experimental","sort","charts","getMostRecentPatchVersions","sortedVersions","versionMap","filterOutDeprecatedPatchVersions","applyChartValues","setHarvesterDefaultCloudProvider","SORT_GROUPS","template","kontainer","rke1","rke2","register","custom","custom1","custom2","PROXY_ENDPOINT","EmberPage","Import","Rke2Config","SelectIconGrid","ToggleSwitch","realMode","mgmtClusters","provClusters","catalog","cssUrl","nodeDrivers","kontainerDrivers","chart","isImport","providerCluster","iconClasses","preferredProvisioner","rke2Enabled","isRke1","isRke2","templateOptions","showTypes","addType","templates","description","group","machineTypes","iconClass","link","groupedSubTypes","loadStylesheet","document","localCluster"],"mappings":"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","file":"elemental-1.0.0.umd.min.edit.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix:after,.clearfix:before{content:\\\" \\\";display:table}.clearfix:after{clear:both}.list-unstyled{margin:0;padding:0;list-style-type:none}.no-select{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize{resize:none}.hand{cursor:pointer;cursor:hand}.fixed{table-layout:fixed}.clip{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip,.force-wrap{word-wrap:break-word}.force-wrap{white-space:normal}.bordered-section{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider{margin-bottom:20px;margin-top:20px}.grouped-type{position:relative}.rke-switch{margin-top:-10px;position:absolute;right:0}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=526eb57c&prod&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"649f01cc\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var map = {\n\t\"./aks-black.svg\": \"3a7d\",\n\t\"./aks.svg\": \"6b1c\",\n\t\"./aliyun-black.svg\": \"073d\",\n\t\"./aliyun.svg\": \"817e\",\n\t\"./aliyunecs-black.svg\": \"cfa4\",\n\t\"./aliyunecs.svg\": \"6673\",\n\t\"./amazonec2-black.svg\": \"1ca7\",\n\t\"./amazonec2.svg\": \"b3fa\",\n\t\"./amazoneks-black.svg\": \"b111\",\n\t\"./amazoneks.svg\": \"a734\",\n\t\"./aws.svg\": \"d1df\",\n\t\"./azure-black.svg\": \"f9f9\",\n\t\"./azure.svg\": \"ff0f\",\n\t\"./azuread-black.svg\": \"34d3\",\n\t\"./azuread.svg\": \"7c72\",\n\t\"./azureaks-black.svg\": \"0dc3\",\n\t\"./azureaks.svg\": \"89ef\",\n\t\"./baidu-black.svg\": \"7c76\",\n\t\"./baidu.svg\": \"8c46\",\n\t\"./cloudca-black.svg\": \"0965\",\n\t\"./cloudca.svg\": \"68b8\",\n\t\"./cloudscale-black.svg\": \"bdf2\",\n\t\"./cloudscale.svg\": \"05fa4\",\n\t\"./custom.svg\": \"ab8e\",\n\t\"./digitalocean-black.svg\": \"460c\",\n\t\"./digitalocean.svg\": \"11f4\",\n\t\"./equinix-black.svg\": \"3e8d\",\n\t\"./equinix.svg\": \"2e41\",\n\t\"./exoscale.svg\": \"04e7\",\n\t\"./gcp.svg\": \"2e3b\",\n\t\"./gke-black.svg\": \"394b\",\n\t\"./gke.svg\": \"d10d\",\n\t\"./google.svg\": \"6de9\",\n\t\"./googlegke-black.svg\": \"38e0\",\n\t\"./googlegke.svg\": \"29f9\",\n\t\"./harvester.svg\": \"481a\",\n\t\"./huaweicce-black.svg\": \"d7b3\",\n\t\"./huaweicce.svg\": \"03cb\",\n\t\"./import.svg\": \"4eb1\",\n\t\"./k3s-black.svg\": \"bf04\",\n\t\"./k3s.svg\": \"fbfb\",\n\t\"./kubernetes-black.svg\": \"7b99\",\n\t\"./kubernetes.svg\": \"ecef\",\n\t\"./linode.svg\": \"4f2d\",\n\t\"./linodelke-black.svg\": \"d904\",\n\t\"./linodelke.svg\": \"58dc\",\n\t\"./local-cluster.svg\": \"a46f\",\n\t\"./minikube-black.svg\": \"001a\",\n\t\"./minikube.svg\": \"5abd\",\n\t\"./oci-black.svg\": \"e518\",\n\t\"./oci.svg\": \"6a48\",\n\t\"./openstack-black.svg\": \"a409\",\n\t\"./openstack.svg\": \"d8b2\",\n\t\"./oracle.svg\": \"ce4d\",\n\t\"./oracleoke-black.svg\": \"8ebd\",\n\t\"./oracleoke.svg\": \"8faa\",\n\t\"./otc-black.svg\": \"eae0\",\n\t\"./otc.svg\": \"271c\",\n\t\"./otccce.svg\": \"25b5\",\n\t\"./packet-black.svg\": \"798e\",\n\t\"./packet.svg\": \"a67d\",\n\t\"./pinganyunecs-black.svg\": \"c28c\",\n\t\"./pinganyunecs.svg\": \"f63b\",\n\t\"./pnap-black.svg\": \"5ad1\",\n\t\"./pnap.svg\": \"0353\",\n\t\"./rackspace-black.svg\": \"b20c\",\n\t\"./rackspace.svg\": \"1b53\",\n\t\"./rke.svg\": \"7a27\",\n\t\"./rke2.svg\": \"43bd\",\n\t\"./softlayer.svg\": \"da9b\",\n\t\"./tencenttke-black.svg\": \"af66\",\n\t\"./tencenttke.svg\": \"39ca\",\n\t\"./vmwarevsphere-black.svg\": \"6cfe\",\n\t\"./vmwarevsphere.svg\": \"0a79\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"499d\";","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=526eb57c&prod&lang=scss&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MachinePool.vue?vue&type=style&index=0&id=fe1286b6&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./rke2.vue?vue&type=style&index=0&id=ce1d46be&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-ce1d46be]:after,.clearfix[data-v-ce1d46be]:before{content:\\\" \\\";display:table}.clearfix[data-v-ce1d46be]:after{clear:both}.list-unstyled[data-v-ce1d46be]{margin:0;padding:0;list-style-type:none}.no-select[data-v-ce1d46be]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-ce1d46be]{resize:none}.hand[data-v-ce1d46be]{cursor:pointer;cursor:hand}.fixed[data-v-ce1d46be]{table-layout:fixed}.clip[data-v-ce1d46be]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-ce1d46be],.force-wrap[data-v-ce1d46be]{word-wrap:break-word}.force-wrap[data-v-ce1d46be]{white-space:normal}.bordered-section[data-v-ce1d46be]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-ce1d46be]{margin-bottom:20px;margin-top:20px}.patch-version[data-v-ce1d46be]{margin-top:5px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":function (e){ return _vm.errors = e; },\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mb-40\",class:{'mt-40': !_vm.hasBeenCreated }},[_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.machineRegistration.create.cloudConfiguration')))]),_c('YamlEditor',{ref:\"yamleditor\",staticClass:\"mb-20\",attrs:{\"editor-mode\":_vm.editorMode},model:{value:(_vm.cloudConfig),callback:function ($$v) {_vm.cloudConfig=$$v},expression:\"cloudConfig\"}}),(!_vm.isView)?_c('div',{staticClass:\"mb-20\"},[_c('FileSelector',{staticClass:\"btn role-secondary\",attrs:{\"label\":_vm.t('elemental.machineRegistration.create.readFromFile')},on:{\"selected\":_vm.onFileSelected}})],1):_vm._e(),_vm._l((_vm.yamlErrors),function(err,i){return _c('Banner',{key:i,attrs:{\"color\":\"error\",\"label\":err}})})],2)]),_c('div',{staticClass:\"row mb-40\"},[_c('div',{staticClass:\"col span-12\"},[_c('h3',{staticClass:\"mt-10\"},[_vm._v(\" \"+_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotations'))+\" \")]),_c('Tabbed',[_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineInv\",\"name\":\"machine-inventory\",\"weight\":3}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\"},domProps:{\"innerHTML\":_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true))}}),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"value\":_vm.value.machineInventoryLabels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setLabels($event, 'machineInventoryLabels', true)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"value\":_vm.value.machineInventoryAnnotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event, 'machineInventoryAnnotations', true)}}})],1)],1),_c('Tab',{attrs:{\"label-key\":\"elemental.machineRegistration.create.machineReg\",\"name\":\"machine-reg\",\"weight\":2}},[_c('Banner',{staticClass:\"mb-40\",attrs:{\"color\":\"info\"},domProps:{\"innerHTML\":_vm._s(_vm.t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true))}}),_c('div',{staticClass:\"row mb-30\"},[_c('KeyValue',{key:\"labels\",attrs:{\"value\":_vm.value.labels,\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('labels.labels.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setLabels($event)}}})],1),_c('div',{staticClass:\"row mb-10\"},[_c('KeyValue',{key:\"annotations\",attrs:{\"value\":_vm.value.annotations,\"add-label\":_vm.t('labels.addAnnotation'),\"mode\":_vm.mode,\"title\":_vm.t('labels.annotations.title'),\"read-allowed\":false,\"value-can-be-empty\":true},on:{\"input\":function($event){return _vm.value.setAnnotations($event)}}})],1)],1)],1)],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { Banner } from '@components/Banner';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\n\nimport jsyaml from 'js-yaml';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\n\nexport default {\n  name:       'MachineRegistrationEditView',\n  components: {\n    Loading,\n    CruResource,\n    YamlEditor,\n    KeyValue,\n    Banner,\n    FileSelector,\n    NameNsDescription,\n    Tabbed,\n    Tab\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  data() {\n    return {\n      cloudConfig:  typeof this.value.spec === 'string' ? this.value.spec : saferDump(this.value.spec),\n      yamlErrors:   null\n    };\n  },\n  watch: {\n    cloudConfig: {\n      handler(neu) {\n        try {\n          const parsed = jsyaml.load(neu);\n\n          this.value.spec = parsed;\n          this.yamlErrors = null;\n        } catch (e) {\n          this.yamlErrors = exceptionToErrorsArray(e);\n        }\n      },\n      immediate: true\n    }\n  },\n  computed: {\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n    isView() {\n      return this.mode !== _CREATE && this.mode !== _EDIT;\n    },\n    editorMode() {\n      if (!this.isView) {\n        return EDITOR_MODES.EDIT_CODE;\n      }\n\n      return EDITOR_MODES.VIEW_CODE;\n    },\n    hasBeenCreated() {\n      return !!this.value.id;\n    }\n  },\n  methods: {\n    async save(saveCb) {\n      this.errors = [];\n      try {\n        await this.value.save();\n        saveCb(true);\n\n        if (this.isCreate) {\n          this.$router.replace(this.value.detailLocation);\n        } else {\n          this.done();\n        }\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        saveCb(false);\n      }\n    },\n    onFileSelected(value) {\n      const component = this.$refs.yamleditor;\n\n      if (component) {\n        component.updateValue(value);\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div\n      class=\"row mb-40\"\n      :class=\"{'mt-40': !hasBeenCreated }\"\n    >\n      <div class=\"col span-12\">\n        <h3>{{ t('elemental.machineRegistration.create.configuration') }}</h3>\n        <NameNsDescription\n          v-model=\"value\"\n          :mode=\"mode\"\n          :description-hidden=\"true\"\n          :namespaced=\"false\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <h3>{{ t('elemental.machineRegistration.create.cloudConfiguration') }}</h3>\n        <YamlEditor\n          ref=\"yamleditor\"\n          v-model=\"cloudConfig\"\n          class=\"mb-20\"\n          :editor-mode=\"editorMode\"\n        />\n        <div\n          v-if=\"!isView\"\n          class=\"mb-20\"\n        >\n          <FileSelector\n            class=\"btn role-secondary\"\n            :label=\"t('elemental.machineRegistration.create.readFromFile')\"\n            @selected=\"onFileSelected\"\n          />\n        </div>\n        <Banner\n          v-for=\"(err, i) in yamlErrors\"\n          :key=\"i\"\n          color=\"error\"\n          :label=\"err\"\n        />\n      </div>\n    </div>\n    <div class=\"row mb-40\">\n      <div class=\"col span-12\">\n        <h3 class=\"mt-10\">\n          {{ t('elemental.machineRegistration.create.labelsAndAnnotations') }}\n        </h3>\n        <Tabbed>\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineInv\"\n            name=\"machine-inventory\"\n            :weight=\"3\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              v-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachInvBanner', {}, true)\"\n            />\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                :value=\"value.machineInventoryLabels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setLabels($event, 'machineInventoryLabels', true)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                :value=\"value.machineInventoryAnnotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event, 'machineInventoryAnnotations', true)\"\n              />\n            </div>\n          </Tab>\n          <Tab\n            label-key=\"elemental.machineRegistration.create.machineReg\"\n            name=\"machine-reg\"\n            :weight=\"2\"\n          >\n            <Banner\n              class=\"mb-40\"\n              color=\"info\"\n              v-html=\"t('elemental.machineRegistration.create.labelsAndAnnotationsMachRegBanner', {}, true)\"\n            />\n            <div class=\"row mb-30\">\n              <KeyValue\n                key=\"labels\"\n                :value=\"value.labels\"\n                :add-label=\"t('labels.addLabel')\"\n                :mode=\"mode\"\n                :title=\"t('labels.labels.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setLabels($event)\"\n              />\n            </div>\n            <div class=\"row mb-10\">\n              <KeyValue\n                key=\"annotations\"\n                :value=\"value.annotations\"\n                :add-label=\"t('labels.addAnnotation')\"\n                :mode=\"mode\"\n                :title=\"t('labels.annotations.title')\"\n                :read-allowed=\"false\"\n                :value-can-be-empty=\"true\"\n                @input=\"value.setAnnotations($event)\"\n              />\n            </div>\n          </Tab>\n        </Tabbed>\n      </div>\n    </div>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./elemental.cattle.io.machineregistration.vue?vue&type=template&id=3ef57ade&scoped=true&\"\nimport script from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"\nexport * from \"./elemental.cattle.io.machineregistration.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ef57ade\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./rke2.vue?vue&type=style&index=0&id=ce1d46be&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"03377cf4\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var map = {\n\t\"./example.vue\": \"ce60\",\n\t\"./istio.vue\": \"826d\",\n\t\"./logging/index.vue\": \"3c69\",\n\t\"./monitoring/ClusterSelector.vue\": \"9d63\",\n\t\"./monitoring/StorageClassSelector.vue\": \"3e15\",\n\t\"./monitoring/alerting/index.vue\": \"72af\",\n\t\"./monitoring/grafana/index.vue\": \"28b8\",\n\t\"./monitoring/index.vue\": \"1c3e\",\n\t\"./monitoring/prometheus/index.vue\": \"0a93\",\n\t\"./monitoring/steps/uninstall-v1.vue\": \"29af\",\n\t\"./rancher-alerting-drivers.vue\": \"ca1f\",\n\t\"./rancher-backup/S3.vue\": \"8b03\",\n\t\"./rancher-backup/index.vue\": \"39f3\",\n\t\"./rancher-gatekeeper.vue\": \"dd1b\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"be44\";","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MachinePool.vue?vue&type=style&index=0&id=fe1286b6&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"67b113fe\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.value)?_c('Loading'):_c('CruResource',{attrs:{\"done-route\":_vm.doneRoute,\"can-yaml\":true,\"mode\":_vm.mode,\"resource\":_vm.value,\"errors\":_vm.errors},on:{\"error\":function (e){ return _vm.errors = e; },\"finish\":_vm.save,\"cancel\":_vm.done}},[_c('div',{staticClass:\"row mt-40 mb-20\"},[_c('div',{staticClass:\"col span-12 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.configuration')))]),_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"description-hidden\":true,\"namespaced\":false},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),(_vm.value.spec)?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6 mb-20\"},[_c('h3',[_vm._v(_vm._s(_vm.t('elemental.osimage.create.spec')))]),_c('LabeledSelect',{staticClass:\"mb-40\",attrs:{\"label\":_vm.t('elemental.osimage.create.targetCluster.label'),\"placeholder\":_vm.t('elemental.osimage.create.targetCluster.placeholder', null, true),\"mode\":_vm.mode,\"options\":_vm.clusterTargetOptions,\"multiple\":true},model:{value:(_vm.clusterTargets),callback:function ($$v) {_vm.clusterTargets=$$v},expression:\"clusterTargets\"}}),_c('LabeledInput',{attrs:{\"label\":_vm.t('elemental.osimage.create.osImage.label'),\"placeholder\":_vm.t('elemental.osimage.create.osImage.placeholder', null, true),\"mode\":_vm.mode},model:{value:(_vm.value.spec.osImage),callback:function ($$v) {_vm.$set(_vm.value.spec, \"osImage\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"value.spec.osImage\"}})],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport Loading from '@shell/components/Loading.vue';\nimport CruResource from '@shell/components/CruResource.vue';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { _CREATE } from '@shell/config/query-params';\nimport { CAPI } from '@shell/config/types';\nimport { filterForElementalClusters } from '../utils/elemental-utils';\n\nexport default {\n  name:       'ManagedOsImagesEditView',\n  components: {\n    Loading, LabeledInput, LabeledSelect, CruResource, NameNsDescription\n  },\n  mixins:     [CreateEditView],\n  props:      {\n    value: {\n      type:     Object,\n      required: true\n    },\n    mode: {\n      type:     String,\n      required: true\n    },\n  },\n  async fetch() {\n    const rancherClusters = await this.$store.dispatch('management/findAll', { type: CAPI.RANCHER_CLUSTER });\n\n    this.elementalClusters = filterForElementalClusters(rancherClusters);\n  },\n  data() {\n    return { elementalClusters: [], clusterTargets: this.handleClusterTargets() };\n  },\n  computed: {\n    clusterTargetOptions() {\n      return this.elementalClusters.map((cluster) => {\n        return {\n          label: cluster.name,\n          value: cluster.name\n        };\n      });\n    },\n    isCreate() {\n      return this.mode === _CREATE;\n    }\n  },\n  watch: {\n    clusterTargets(neu) {\n      this.value.spec.clusterTargets = neu.map((val) => {\n        return { clusterName: val };\n      });\n    }\n  },\n  methods: {\n    handleClusterTargets() {\n      const clusterTargets = this.value?.spec?.clusterTargets;\n\n      if (clusterTargets?.length) {\n        const targetsArray = [];\n\n        clusterTargets.forEach((ct) => {\n          targetsArray.push(ct.clusterName);\n        });\n\n        return targetsArray;\n      }\n\n      return [];\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"!value\" />\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :can-yaml=\"true\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <div class=\"row mt-40 mb-20\">\n      <div class=\"col span-12 mb-20\">\n        <h3>{{ t('elemental.osimage.create.configuration') }}</h3>\n        <NameNsDescription v-model=\"value\" :mode=\"mode\" :description-hidden=\"true\" :namespaced=\"false\" />\n      </div>\n    </div>\n    <div v-if=\"value.spec\" class=\"row mb-20\">\n      <div class=\"col span-6 mb-20\">\n        <h3>{{ t('elemental.osimage.create.spec') }}</h3>\n        <LabeledSelect\n          v-model=\"clusterTargets\"\n          class=\"mb-40\"\n          :label=\"t('elemental.osimage.create.targetCluster.label')\"\n          :placeholder=\"t('elemental.osimage.create.targetCluster.placeholder', null, true)\"\n          :mode=\"mode\"\n          :options=\"clusterTargetOptions\"\n          :multiple=\"true\"\n        />\n        <LabeledInput\n          v-model.trim=\"value.spec.osImage\"\n          :label=\"t('elemental.osimage.create.osImage.label')\"\n          :placeholder=\"t('elemental.osimage.create.osImage.placeholder', null, true)\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n  </CruResource>\n</template>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./elemental.cattle.io.managedosimage.vue?vue&type=template&id=1bc3b1b4&\"\nimport script from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"\nexport * from \"./elemental.cattle.io.managedosimage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-fe1286b6]:after,.clearfix[data-v-fe1286b6]:before{content:\\\" \\\";display:table}.clearfix[data-v-fe1286b6]:after{clear:both}.list-unstyled[data-v-fe1286b6]{margin:0;padding:0;list-style-type:none}.no-select[data-v-fe1286b6]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-fe1286b6]{resize:none}.hand[data-v-fe1286b6]{cursor:pointer;cursor:hand}.fixed[data-v-fe1286b6]{table-layout:fixed}.clip[data-v-fe1286b6]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-fe1286b6],.force-wrap[data-v-fe1286b6]{word-wrap:break-word}.force-wrap[data-v-fe1286b6]{white-space:normal}.bordered-section[data-v-fe1286b6]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-fe1286b6]{margin-bottom:20px;margin-top:20px}.advanced[data-v-fe1286b6] >.vue-portal-target:empty,.advanced[data-v-fe1286b6] >.vue-portal-target:empty+.spacer{display:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending)?_c('Loading'):(_vm.emberLink)?_c('div',{staticClass:\"embed\"},[_c('EmberPage',{attrs:{\"force-new\":true,\"src\":_vm.emberLink}})],1):_c('CruResource',{staticClass:\"create-cluster\",attrs:{\"mode\":_vm.mode,\"validation-passed\":true,\"selected-subtype\":_vm.subType,\"resource\":_vm.value,\"errors\":_vm.errors,\"subtypes\":_vm.subTypes,\"cancel-event\":true},on:{\"finish\":_vm.save,\"cancel\":_vm.cancel,\"select-type\":_vm.selectType,\"error\":function (e){ return _vm.errors = e; }},scopedSlots:_vm._u([{key:\"subtypes\",fn:function(){return _vm._l((_vm.groupedSubTypes),function(obj,i){return _c('div',{key:obj.id,staticClass:\"mb-20\",staticStyle:{\"width\":\"100%\"}},[_c('h4',[(_vm.showRkeToggle && [_vm._RKE1,_vm._RKE2].includes(obj.name))?_c('div',{staticClass:\"grouped-type\"},[_c('ToggleSwitch',{staticClass:\"rke-switch\",attrs:{\"data-testid\":\"cluster-manager-create-rke-switch\",\"off-value\":\"rke1\",\"off-label\":_vm.t('cluster.toggle.v1'),\"on-value\":\"rke2\",\"on-label\":_vm.t('cluster.toggle.v2')},model:{value:(_vm.provisioner),callback:function ($$v) {_vm.provisioner=$$v},expression:\"provisioner\"}})],1):_vm._e(),_vm._v(\" \"+_vm._s(obj.label)+\" \")]),_c('SelectIconGrid',{attrs:{\"rows\":obj.types,\"key-field\":\"id\",\"name-field\":\"label\",\"side-label-field\":\"tag\",\"color-for\":_vm.colorFor,\"component-testid\":'cluster-manager-create-grid-' + i},on:{\"clicked\":_vm.clickedType}})],1)})},proxy:true},(_vm.subType)?{key:\"form-footer\",fn:function(){return [_c('div')]},proxy:true}:null],null,true)},[(_vm.isImport)?_c('Import',{attrs:{\"mode\":_vm.mode,\"provider\":_vm.subType},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):(_vm.subType)?_c('Rke2Config',{attrs:{\"initial-value\":_vm.initialValue,\"live-value\":_vm.liveValue,\"mode\":_vm.mode,\"provider\":_vm.subType},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.$fetchState.pending && !_vm.loadedOnce)?_c('Loading'):(_vm.$fetchState.error)?_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.$fetchState.error}}):_c('CruResource',{ref:\"cruresource\",staticClass:\"rke2\",attrs:{\"mode\":_vm.mode,\"validation-passed\":_vm.validationPassed() && _vm.fvFormIsValid,\"resource\":_vm.value,\"errors\":_vm.errors,\"cancel-event\":true,\"done-route\":_vm.doneRoute,\"apply-hooks\":_vm.applyHooks,\"generate-yaml\":_vm.generateYaml,\"component-testid\":\"rke2-custom-create\"},on:{\"done\":_vm.done,\"finish\":_vm.saveOverride,\"cancel\":_vm.cancel,\"error\":_vm.fvUnreportedValidationErrors},scopedSlots:_vm._u([(_vm.needCredential && !_vm.credentialId)?{key:\"form-footer\",fn:function(){return [_c('div')]},proxy:true}:null],null,true)},[(_vm.isEdit)?_c('Banner',{attrs:{\"color\":\"warning\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('cluster.banner.rke2-k3-reprovisioning', {}, true))}})]):_vm._e(),(_vm.needCredential)?_c('SelectCredential',{attrs:{\"mode\":_vm.mode,\"provider\":_vm.provider,\"cancel\":_vm.cancelCredential,\"showing-form\":_vm.showForm},model:{value:(_vm.credentialId),callback:function ($$v) {_vm.credentialId=$$v},expression:\"credentialId\"}}):_vm._e(),(_vm.showForm)?_c('div',{staticClass:\"mt-20\"},[(!_vm.isView)?_c('NameNsDescription',{attrs:{\"mode\":_vm.mode,\"namespaced\":false,\"name-label\":\"cluster.name.label\",\"name-placeholder\":\"cluster.name.placeholder\",\"description-label\":\"cluster.description.label\",\"description-placeholder\":\"cluster.description.placeholder\",\"rules\":{name:_vm.fvGetAndReportPathRules('metadata.name')}},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}):_vm._e(),(_vm.appsOSWarning)?_c('Banner',{attrs:{\"color\":\"error\"}},[_vm._v(\" \"+_vm._s(_vm.appsOSWarning)+\" \")]):_vm._e(),(_vm.hasMachinePools)?[_c('div',{staticClass:\"clearfix\"},[_c('h2',{directives:[{name:\"t\",rawName:\"v-t\",value:('cluster.tabs.machinePools'),expression:\"'cluster.tabs.machinePools'\"}],staticClass:\"pull-left\"}),(!_vm.isView)?_c('div',{staticClass:\"pull-right\"},[_c('BadgeState',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.nodeTotals.tooltip.etcd),expression:\"nodeTotals.tooltip.etcd\"}],staticClass:\"mr-10\",attrs:{\"color\":_vm.nodeTotals.color.etcd,\"icon\":_vm.nodeTotals.icon.etcd,\"label\":_vm.nodeTotals.label.etcd}}),_c('BadgeState',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.nodeTotals.tooltip.controlPlane),expression:\"nodeTotals.tooltip.controlPlane\"}],staticClass:\"mr-10\",attrs:{\"color\":_vm.nodeTotals.color.controlPlane,\"icon\":_vm.nodeTotals.icon.controlPlane,\"label\":_vm.nodeTotals.label.controlPlane}}),_c('BadgeState',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.nodeTotals.tooltip.worker),expression:\"nodeTotals.tooltip.worker\"}],attrs:{\"color\":_vm.nodeTotals.color.worker,\"icon\":_vm.nodeTotals.icon.worker,\"label\":_vm.nodeTotals.label.worker}})],1):_vm._e()]),_c('Tabbed',{ref:\"pools\",attrs:{\"side-tabs\":true,\"show-tabs-add-remove\":!_vm.isView},on:{\"addTab\":function($event){return _vm.addMachinePool($event)},\"removeTab\":function($event){return _vm.removeMachinePool($event)}}},[_vm._l((_vm.machinePools),function(obj,idx){return [(!obj.remove)?_c('Tab',{key:obj.id,attrs:{\"name\":obj.id,\"label\":obj.pool.name || '(Not Named)',\"show-header\":false}},[_c('MachinePool',{ref:\"pool\",refInFor:true,attrs:{\"value\":obj,\"cluster\":_vm.value,\"mode\":_vm.mode,\"provider\":_vm.provider,\"credential-id\":_vm.credentialId,\"idx\":idx,\"machine-pools\":_vm.machinePools},on:{\"error\":function (e){ return _vm.errors = e; }}})],1):_vm._e()]}),(!_vm.unremovedMachinePools.length)?_c('div',[_vm._v(\" \"+_vm._s(_vm.t('cluster.machinePool.noPoolsDisclaimer'))+\" \")]):_vm._e()],2),_c('div',{staticClass:\"spacer\"})]:_vm._e(),_c('h2',{directives:[{name:\"t\",rawName:\"v-t\",value:('cluster.tabs.cluster'),expression:\"'cluster.tabs.cluster'\"}]}),_c('Tabbed',{attrs:{\"side-tabs\":true}},[_c('Tab',{attrs:{\"name\":\"basic\",\"label-key\":\"cluster.tabs.basic\",\"weight\":11},on:{\"active\":_vm.refreshYamls}},[(!_vm.haveArgInfo)?_c('Banner',{attrs:{\"color\":\"warning\",\"label\":\"Configuration information is not available for the selected Kubernetes version.  The options available in this screen will be limited, you may want to use the YAML editor.\"}}):_vm._e(),(_vm.showk8s21LegacyWarning)?_c('Banner',{attrs:{\"color\":\"warning\",\"label\":_vm.t('cluster.legacyWarning')}}):_vm._e(),(_vm.isHarvesterDriver && _vm.isHarvesterIncompatible && _vm.showCloudProvider)?_c('Banner',{attrs:{\"color\":\"warning\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.t('cluster.harvester.warning.cloudProvider.incompatible', null, true))}})]):_vm._e(),_c('div',{staticClass:\"row mb-10\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.versionOptions,\"label-key\":\"cluster.kubernetesVersion.label\"},model:{value:(_vm.value.spec.kubernetesVersion),callback:function ($$v) {_vm.$set(_vm.value.spec, \"kubernetesVersion\", $$v)},expression:\"value.spec.kubernetesVersion\"}}),_c('Checkbox',{staticClass:\"patch-version\",attrs:{\"label\":_vm.t('cluster.kubernetesVersion.deprecatedPatches'),\"tooltip\":_vm.t('cluster.kubernetesVersion.deprecatedPatchWarning')},model:{value:(_vm.showDeprecatedPatchVersions),callback:function ($$v) {_vm.showDeprecatedPatchVersions=$$v},expression:\"showDeprecatedPatchVersions\"}})],1),(_vm.showCloudProvider)?_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.clusterIsAlreadyCreated,\"options\":_vm.cloudProviderOptions,\"label\":_vm.t('cluster.rke2.cloudProvider.label')},model:{value:(_vm.agentConfig['cloud-provider-name']),callback:function ($$v) {_vm.$set(_vm.agentConfig, 'cloud-provider-name', $$v)},expression:\"agentConfig['cloud-provider-name']\"}})],1):_vm._e()]),(_vm.showCni)?_c('div',{staticClass:\"row\",style:({'align-items':'center'})},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.clusterIsAlreadyCreated,\"options\":_vm.serverArgs.cni.options,\"label\":_vm.t('cluster.rke2.cni.label')},model:{value:(_vm.serverConfig.cni),callback:function ($$v) {_vm.$set(_vm.serverConfig, \"cni\", $$v)},expression:\"serverConfig.cni\"}})],1),(_vm.serverConfig.cni === 'cilium' || _vm.serverConfig.cni === 'multus,cilium')?_c('div',{staticClass:\"col\"},[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.address.ipv6.enable')},model:{value:(_vm.ciliumIpv6),callback:function ($$v) {_vm.ciliumIpv6=$$v},expression:\"ciliumIpv6\"}})],1):_vm._e()]):_vm._e(),(_vm.showVsphereNote)?[_c('Banner',{attrs:{\"color\":\"warning\",\"label-key\":\"cluster.cloudProvider.rancher-vsphere.note\"}})]:(_vm.showCloudConfigYaml)?[_c('div',{staticClass:\"spacer\"}),_c('div',{staticClass:\"col span-12\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.cloudProvider.header'))+\" \")]),_c('YamlEditor',{ref:\"yaml\",staticClass:\"yaml-editor\",attrs:{\"editor-mode\":_vm.mode === 'view' ? 'VIEW_CODE' : 'EDIT_CODE',\"initial-yaml-values\":\"# Cloud Provider Config\"},model:{value:(_vm.agentConfig['cloud-provider-config']),callback:function ($$v) {_vm.$set(_vm.agentConfig, 'cloud-provider-config', $$v)},expression:\"agentConfig['cloud-provider-config']\"}})],1)]:_vm._e(),_c('div',{staticClass:\"spacer\"}),_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.security.header'))+\" \")]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[(_vm.pspOptions)?_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.pspOptions,\"label\":_vm.t('cluster.rke2.defaultPodSecurityPolicyTemplateName.label')},model:{value:(_vm.value.spec.defaultPodSecurityPolicyTemplateName),callback:function ($$v) {_vm.$set(_vm.value.spec, \"defaultPodSecurityPolicyTemplateName\", $$v)},expression:\"value.spec.defaultPodSecurityPolicyTemplateName\"}}):_vm._e()],1),(_vm.showCisProfile)?_c('div',{staticClass:\"col span-6\"},[(_vm.serverArgs.profile)?_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.profileOptions,\"label\":\"Server CIS Profile\"},model:{value:(_vm.serverConfig.profile),callback:function ($$v) {_vm.$set(_vm.serverConfig, \"profile\", $$v)},expression:\"serverConfig.profile\"}}):(_vm.agentArgs.profile)?_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.profileOptions,\"label\":\"Worker CIS Profile\"},model:{value:(_vm.agentConfig.profile),callback:function ($$v) {_vm.$set(_vm.agentConfig, \"profile\", $$v)},expression:\"agentConfig.profile\"}}):_vm._e()],1):_vm._e()]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-12 mt-20\"},[(_vm.serverArgs['secrets-encryption'])?_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":\"Encrypt Secrets\"},model:{value:(_vm.serverConfig['secrets-encryption']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'secrets-encryption', $$v)},expression:\"serverConfig['secrets-encryption']\"}}):_vm._e(),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.enableNetworkPolicy.label')},model:{value:(_vm.value.spec.enableNetworkPolicy),callback:function ($$v) {_vm.$set(_vm.value.spec, \"enableNetworkPolicy\", $$v)},expression:\"value.spec.enableNetworkPolicy\"}})],1)]),(_vm.serverConfig.cni === 'cilium' && _vm.value.spec.enableNetworkPolicy)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-12\"},[_c('Banner',{attrs:{\"color\":\"info\",\"label\":_vm.t('cluster.rke2.enableNetworkPolicy.warning')}})],1)]):_vm._e(),_c('div',{staticClass:\"spacer\"}),(_vm.serverArgs.disable)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-12\"},[_c('div',[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.systemService.header'))+\" \")])]),_vm._l((_vm.disableOptions),function(opt){return _c('Checkbox',{key:opt.value,attrs:{\"mode\":_vm.mode,\"label\":opt.label,\"value-when-true\":opt.value},model:{value:(_vm.enabledSystemServices),callback:function ($$v) {_vm.enabledSystemServices=$$v},expression:\"enabledSystemServices\"}})})],2)]):_vm._e()],2),(_vm.canManageMembers)?_c('Tab',{attrs:{\"name\":\"memberRoles\",\"label-key\":\"cluster.tabs.memberRoles\",\"weight\":10}},[(_vm.isEdit)?_c('Banner',{attrs:{\"color\":\"info\"}},[_vm._v(\" \"+_vm._s(_vm.t('cluster.memberRoles.removeMessage'))+\" \")]):_vm._e(),_c('ClusterMembershipEditor',{attrs:{\"mode\":_vm.mode,\"parent-id\":_vm.value.mgmt ? _vm.value.mgmt.id : null},on:{\"membership-update\":_vm.onMembershipUpdate}})],1):_vm._e(),_c('Tab',{attrs:{\"name\":\"etcd\",\"label-key\":\"cluster.tabs.etcd\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[_c('RadioGroup',{attrs:{\"name\":\"etcd-disable-snapshots\",\"options\":[true, false],\"label\":_vm.t('cluster.rke2.etcd.disableSnapshots.label'),\"labels\":[_vm.t('generic.disable'), _vm.t('generic.enable')],\"mode\":_vm.mode},model:{value:(_vm.rkeConfig.etcd.disableSnapshots),callback:function ($$v) {_vm.$set(_vm.rkeConfig.etcd, \"disableSnapshots\", $$v)},expression:\"rkeConfig.etcd.disableSnapshots\"}})],1)]),(_vm.rkeConfig.etcd.disableSnapshots !== true)?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"type\":\"cron\",\"placeholder\":\"0 * * * *\",\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.etcd.snapshotScheduleCron.label')},model:{value:(_vm.rkeConfig.etcd.snapshotScheduleCron),callback:function ($$v) {_vm.$set(_vm.rkeConfig.etcd, \"snapshotScheduleCron\", $$v)},expression:\"rkeConfig.etcd.snapshotScheduleCron\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('UnitInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.etcd.snapshotRetention.label'),\"suffix\":_vm.t('cluster.rke2.snapshots.suffix')},model:{value:(_vm.rkeConfig.etcd.snapshotRetention),callback:function ($$v) {_vm.$set(_vm.rkeConfig.etcd, \"snapshotRetention\", $$v)},expression:\"rkeConfig.etcd.snapshotRetention\"}})],1)]):_vm._e(),(_vm.rkeConfig.etcd.disableSnapshots !== true)?[_c('div',{staticClass:\"spacer\"}),_c('RadioGroup',{attrs:{\"name\":\"etcd-s3\",\"options\":[false, true],\"label\":\"Backup Snapshots to S3\",\"labels\":['Disable','Enable'],\"mode\":_vm.mode},model:{value:(_vm.s3Backup),callback:function ($$v) {_vm.s3Backup=$$v},expression:\"s3Backup\"}}),(_vm.s3Backup)?_c('S3Config',{attrs:{\"namespace\":_vm.value.metadata.namespace,\"register-before-hook\":_vm.registerBeforeHook,\"mode\":_vm.mode},model:{value:(_vm.rkeConfig.etcd.s3),callback:function ($$v) {_vm.$set(_vm.rkeConfig.etcd, \"s3\", $$v)},expression:\"rkeConfig.etcd.s3\"}}):_vm._e()]:_vm._e(),_c('div',{staticClass:\"spacer\"}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[(_vm.serverArgs['etcd-expose-metrics'])?_c('RadioGroup',{attrs:{\"name\":\"etcd-expose-metrics\",\"options\":[false, true],\"label\":_vm.t('cluster.rke2.etcd.exportMetric.label'),\"labels\":[_vm.t('cluster.rke2.etcd.exportMetric.false'), _vm.t('cluster.rke2.etcd.exportMetric.true')],\"mode\":_vm.mode},model:{value:(_vm.serverConfig['etcd-expose-metrics']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'etcd-expose-metrics', $$v)},expression:\"serverConfig['etcd-expose-metrics']\"}}):_vm._e()],1)])],2),(_vm.haveArgInfo)?_c('Tab',{attrs:{\"name\":\"networking\",\"label-key\":\"cluster.tabs.networking\"}},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.address.header'))+\" \"),_c('i',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.t('cluster.rke2.address.tooltip')),expression:\"t('cluster.rke2.address.tooltip')\"}],staticClass:\"icon icon-info\"})]),(_vm.showIpv6Warning)?_c('Banner',{attrs:{\"color\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.address.ipv6.warning'))+\" \")]):_vm._e(),_c('div',{staticClass:\"row mb-20\"},[(_vm.serverArgs['cluster-cidr'])?_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.clusterIsAlreadyCreated,\"label\":_vm.t('cluster.rke2.address.clusterCidr.label')},model:{value:(_vm.serverConfig['cluster-cidr']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'cluster-cidr', $$v)},expression:\"serverConfig['cluster-cidr']\"}})],1):_vm._e(),(_vm.serverArgs['service-cidr'])?_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.clusterIsAlreadyCreated,\"label\":_vm.t('cluster.rke2.address.serviceCidr.label')},model:{value:(_vm.serverConfig['service-cidr']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'service-cidr', $$v)},expression:\"serverConfig['service-cidr']\"}})],1):_vm._e()]),_c('div',{staticClass:\"row mb-20\"},[(_vm.serverArgs['cluster-dns'])?_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.clusterIsAlreadyCreated,\"label\":_vm.t('cluster.rke2.address.dns.label')},model:{value:(_vm.serverConfig['cluster-dns']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'cluster-dns', $$v)},expression:\"serverConfig['cluster-dns']\"}})],1):_vm._e(),(_vm.serverArgs['cluster-domain'])?_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"disabled\":_vm.clusterIsAlreadyCreated,\"label\":_vm.t('cluster.rke2.address.domain.label')},model:{value:(_vm.serverConfig['cluster-domain']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'cluster-domain', $$v)},expression:\"serverConfig['cluster-domain']\"}})],1):_vm._e()]),(_vm.serverArgs['service-node-port-range'])?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.address.nodePortRange.label')},model:{value:(_vm.serverConfig['service-node-port-range']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'service-node-port-range', $$v)},expression:\"serverConfig['service-node-port-range']\"}})],1)]):_vm._e(),(_vm.serverArgs['tls-san'])?_c('div',{staticClass:\"row mb-20\"},[_c('div',{staticClass:\"col span-6\"},[_c('ArrayList',{attrs:{\"protip\":false,\"mode\":_vm.mode,\"title\":_vm.t('cluster.rke2.address.tlsSan.label')},model:{value:(_vm.serverConfig['tls-san']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'tls-san', $$v)},expression:\"serverConfig['tls-san']\"}})],1)]):_vm._e(),_c('ACE',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1):_vm._e(),_c('Tab',{attrs:{\"name\":\"upgrade\",\"label-key\":\"cluster.tabs.upgrade\"}},[(_vm.get(_vm.rkeConfig, 'upgradeStrategy.controlPlaneDrainOptions.deleteEmptyDirData'))?_c('Banner',{attrs:{\"color\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.deleteEmptyDir', {}, true))+\" \")]):_vm._e(),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(\"Control Plane\")]),_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.controlPlaneConcurrency.label'),\"tooltip\":_vm.t('cluster.rke2.controlPlaneConcurrency.toolTip')},model:{value:(_vm.rkeConfig.upgradeStrategy.controlPlaneConcurrency),callback:function ($$v) {_vm.$set(_vm.rkeConfig.upgradeStrategy, \"controlPlaneConcurrency\", $$v)},expression:\"rkeConfig.upgradeStrategy.controlPlaneConcurrency\"}}),_c('div',{staticClass:\"spacer\"}),_c('DrainOptions',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.rkeConfig.upgradeStrategy.controlPlaneDrainOptions),callback:function ($$v) {_vm.$set(_vm.rkeConfig.upgradeStrategy, \"controlPlaneDrainOptions\", $$v)},expression:\"rkeConfig.upgradeStrategy.controlPlaneDrainOptions\"}})],1),_c('div',{staticClass:\"col span-6\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.rke2.workNode.label'))+\" \")]),_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.rke2.workerConcurrency.label'),\"tooltip\":_vm.t('cluster.rke2.workerConcurrency.toolTip')},model:{value:(_vm.rkeConfig.upgradeStrategy.workerConcurrency),callback:function ($$v) {_vm.$set(_vm.rkeConfig.upgradeStrategy, \"workerConcurrency\", $$v)},expression:\"rkeConfig.upgradeStrategy.workerConcurrency\"}}),_c('div',{staticClass:\"spacer\"}),_c('DrainOptions',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.rkeConfig.upgradeStrategy.workerDrainOptions),callback:function ($$v) {_vm.$set(_vm.rkeConfig.upgradeStrategy, \"workerDrainOptions\", $$v)},expression:\"rkeConfig.upgradeStrategy.workerDrainOptions\"}})],1)])],1),_c('Tab',{attrs:{\"name\":\"registry\",\"label-key\":\"cluster.tabs.registry\"}},[_c('RadioGroup',{attrs:{\"name\":\"registry-mode\",\"options\":_vm.registryOptions,\"mode\":_vm.mode},model:{value:(_vm.registryMode),callback:function ($$v) {_vm.registryMode=$$v},expression:\"registryMode\"}}),(_vm.registryMode !== _vm.PUBLIC)?_c('LabeledInput',{staticClass:\"mt-20\",attrs:{\"mode\":_vm.mode,\"required\":true,\"label\":_vm.t('cluster.privateRegistry.systemDefaultRegistry.label')},model:{value:(_vm.registryHost),callback:function ($$v) {_vm.registryHost=$$v},expression:\"registryHost\"}}):_vm._e(),(_vm.registryMode === _vm.PRIVATE)?_c('SelectOrCreateAuthSecret',{attrs:{\"register-before-hook\":_vm.registerBeforeHook,\"hook-priority\":1,\"mode\":_vm.mode,\"in-store\":\"management\",\"allow-ssh\":false,\"allow-rke\":true,\"vertical\":true,\"namespace\":_vm.value.metadata.namespace,\"generate-name\":\"registryconfig-auth-\"},model:{value:(_vm.registrySecret),callback:function ($$v) {_vm.registrySecret=$$v},expression:\"registrySecret\"}}):(_vm.registryMode === _vm.ADVANCED)?[_c('RegistryMirrors',{staticClass:\"mt-20\",attrs:{\"mode\":_vm.mode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('RegistryConfigs',{staticClass:\"mt-20\",attrs:{\"mode\":_vm.mode,\"cluster-register-before-hook\":_vm.registerBeforeHook},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})]:_vm._e()],2),_c('Tab',{attrs:{\"name\":\"addons\",\"label-key\":\"cluster.tabs.addons\"},on:{\"active\":_vm.showAddons}},[(_vm.isEdit)?_c('Banner',{attrs:{\"color\":\"warning\"}},[_vm._v(\" \"+_vm._s(_vm.t('cluster.addOns.dependencyBanner'))+\" \")]):_vm._e(),(_vm.versionInfo && _vm.addonVersions.length)?_c('div',{key:_vm.addonsRev},_vm._l((_vm.addonVersions),function(v){return _c('div',{key:v._key},[_c('h3',[_vm._v(_vm._s(_vm.labelForAddon(v.name)))]),(_vm.versionInfo[v.name] && _vm.versionInfo[v.name].questions && v.name && _vm.userChartValuesTemp[v.name])?_c('Questions',{attrs:{\"emit\":true,\"in-store\":\"management\",\"mode\":_vm.mode,\"tabbed\":false,\"source\":_vm.versionInfo[v.name],\"target-namespace\":_vm.value.metadata.namespace},on:{\"updated\":function($event){return _vm.updateQuestions(v.name)}},model:{value:(_vm.userChartValuesTemp[v.name]),callback:function ($$v) {_vm.$set(_vm.userChartValuesTemp, v.name, $$v)},expression:\"userChartValuesTemp[v.name]\"}}):_c('YamlEditor',{ref:\"yaml-values\",refInFor:true,attrs:{\"value\":_vm.initYamlEditor(v.name),\"scrolling\":true,\"as-object\":true,\"editor-mode\":_vm.mode === 'view' ? 'VIEW_CODE' : 'EDIT_CODE',\"hide-preview-buttons\":true},on:{\"input\":function (data) { return _vm.updateValues(v.name, data); }}}),_c('div',{staticClass:\"spacer\"})],1)}),0):_vm._e(),_c('div',[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.addOns.additionalManifest.title'))+\" \"),_c('i',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.t('cluster.addOns.additionalManifest.tooltip')),expression:\"t('cluster.addOns.additionalManifest.tooltip')\"}],staticClass:\"icon icon-info\"})]),_c('YamlEditor',{ref:\"yaml-additional\",staticClass:\"yaml-editor\",attrs:{\"editor-mode\":_vm.mode === 'view' ? 'VIEW_CODE' : 'EDIT_CODE',\"initial-yaml-values\":\"# Additional Manifest YAML\"},model:{value:(_vm.rkeConfig.additionalManifest),callback:function ($$v) {_vm.$set(_vm.rkeConfig, \"additionalManifest\", $$v)},expression:\"rkeConfig.additionalManifest\"}})],1)],1),(_vm.haveArgInfo || _vm.agentArgs['protect-kernel-defaults'])?_c('Tab',{attrs:{\"name\":\"advanced\",\"label-key\":\"cluster.tabs.advanced\",\"weight\":-1},on:{\"active\":_vm.refreshYamls}},[(_vm.haveArgInfo)?[_c('h3',[_vm._v(_vm._s(_vm.t('cluster.advanced.argInfo.title')))]),(_vm.agentArgs['kubelet-arg'])?_c('ArrayListGrouped',{staticClass:\"mb-20\",attrs:{\"add-label\":_vm.t('cluster.advanced.argInfo.machineSelector.label'),\"can-remove\":_vm.canRemoveKubeletRow,\"default-add-value\":{machineLabelSelector: { matchExpressions: [], matchLabels: {} }, config: {'kubelet-arg': []}}},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.value.machineLabelSelector)?[_c('h3',[_vm._v(_vm._s(_vm.t('cluster.advanced.argInfo.machineSelector.title')))]),_c('MatchExpressions',{staticClass:\"mb-20\",attrs:{\"mode\":_vm.mode,\"show-remove\":false,\"initial-empty-row\":true},model:{value:(row.value.machineLabelSelector),callback:function ($$v) {_vm.$set(row.value, \"machineLabelSelector\", $$v)},expression:\"row.value.machineLabelSelector\"}}),_c('h3',[_vm._v(_vm._s(_vm.t('cluster.advanced.argInfo.machineSelector.subTitle')))])]:_c('h3',[_vm._v(\" \"+_vm._s(_vm.advancedTitleAlt)+\" \")]),_c('ArrayList',{attrs:{\"mode\":_vm.mode,\"add-label\":_vm.t('cluster.advanced.argInfo.machineSelector.listLabel'),\"initial-empty-row\":!!row.value.machineLabelSelector},model:{value:(row.value.config['kubelet-arg']),callback:function ($$v) {_vm.$set(row.value.config, 'kubelet-arg', $$v)},expression:\"row.value.config['kubelet-arg']\"}})]}}],null,false,54032186),model:{value:(_vm.rkeConfig.machineSelectorConfig),callback:function ($$v) {_vm.$set(_vm.rkeConfig, \"machineSelectorConfig\", $$v)},expression:\"rkeConfig.machineSelectorConfig\"}}):_vm._e(),(_vm.rkeConfig.machineSelectorConfig.length > 1)?_c('Banner',{attrs:{\"color\":\"info\",\"label\":_vm.t('cluster.advanced.argInfo.machineSelector.bannerLabel')}}):_vm._e(),(_vm.serverArgs['kube-controller-manager-arg'])?_c('ArrayList',{staticClass:\"mb-20\",attrs:{\"mode\":_vm.mode,\"title\":_vm.t('cluster.advanced.argInfo.machineSelector.kubeControllerManagerTitle')},model:{value:(_vm.serverConfig['kube-controller-manager-arg']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'kube-controller-manager-arg', $$v)},expression:\"serverConfig['kube-controller-manager-arg']\"}}):_vm._e(),(_vm.serverArgs['kube-apiserver-arg'])?_c('ArrayList',{staticClass:\"mb-20\",attrs:{\"mode\":_vm.mode,\"title\":_vm.t('cluster.advanced.argInfo.machineSelector.kubeApiServerTitle')},model:{value:(_vm.serverConfig['kube-apiserver-arg']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'kube-apiserver-arg', $$v)},expression:\"serverConfig['kube-apiserver-arg']\"}}):_vm._e(),(_vm.serverArgs['kube-scheduler-arg'])?_c('ArrayList',{attrs:{\"mode\":_vm.mode,\"title\":_vm.t('cluster.advanced.argInfo.machineSelector.kubeSchedulerTitle')},model:{value:(_vm.serverConfig['kube-scheduler-arg']),callback:function ($$v) {_vm.$set(_vm.serverConfig, 'kube-scheduler-arg', $$v)},expression:\"serverConfig['kube-scheduler-arg']\"}}):_vm._e()]:_vm._e(),(_vm.agentArgs['protect-kernel-defaults'])?[_c('div',{staticClass:\"spacer\"}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-12\"},[_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.advanced.agentArgs.label')},model:{value:(_vm.agentConfig['protect-kernel-defaults']),callback:function ($$v) {_vm.$set(_vm.agentConfig, 'protect-kernel-defaults', $$v)},expression:\"agentConfig['protect-kernel-defaults']\"}})],1)])]:_vm._e()],2):_vm._e(),_c('AgentEnv',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}}),_c('Labels',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)],2):_vm._e(),(_vm.unsupportedSelectorConfig)?_c('Banner',{attrs:{\"color\":\"warning\",\"label\":_vm.t('cluster.banner.warning')}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-4\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.machinePool.name.label'),\"required\":true,\"disabled\":!_vm.value.config || !!_vm.value.config.id},model:{value:(_vm.value.pool.name),callback:function ($$v) {_vm.$set(_vm.value.pool, \"name\", $$v)},expression:\"value.pool.name\"}})],1),_c('div',{staticClass:\"col span-4\"},[_c('LabeledInput',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.machinePool.quantity.label'),\"type\":\"number\",\"min\":\"0\",\"required\":true},model:{value:(_vm.value.pool.quantity),callback:function ($$v) {_vm.$set(_vm.value.pool, \"quantity\", _vm._n($$v))},expression:\"value.pool.quantity\"}})],1),_c('div',{staticClass:\"col span-4 pt-5\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.machinePool.role.label'))+\" \")]),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":\"etcd\",\"disabled\":_vm.isWindows},model:{value:(_vm.value.pool.etcdRole),callback:function ($$v) {_vm.$set(_vm.value.pool, \"etcdRole\", $$v)},expression:\"value.pool.etcdRole\"}}),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":\"Control Plane\",\"disabled\":_vm.isWindows},model:{value:(_vm.value.pool.controlPlaneRole),callback:function ($$v) {_vm.$set(_vm.value.pool, \"controlPlaneRole\", $$v)},expression:\"value.pool.controlPlaneRole\"}}),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":\"Worker\"},model:{value:(_vm.value.pool.workerRole),callback:function ($$v) {_vm.$set(_vm.value.pool, \"workerRole\", $$v)},expression:\"value.pool.workerRole\"}})],1)]),_c('hr',{staticClass:\"mt-10\"}),(_vm.value.config)?_c(_vm.configComponent,{ref:\"configComponent\",tag:\"component\",attrs:{\"cluster\":_vm.cluster,\"uuid\":_vm.uuid,\"mode\":_vm.mode,\"value\":_vm.value.config,\"provider\":_vm.provider,\"credential-id\":_vm.credentialId,\"pool-index\":_vm.idx,\"machine-pools\":_vm.machinePools},on:{\"error\":function (e){ return _vm.errors = e; },\"updateMachineCount\":_vm.updateMachineCount}}):(_vm.value.configMissing)?_c('Banner',{attrs:{\"color\":\"error\",\"label-key\":\"cluster.machinePool.configNotFound\"}}):_c('Banner',{attrs:{\"color\":\"info\",\"label-key\":\"cluster.machinePool.noAccessBanner\"}}),_c('AdvancedSection',{staticClass:\"advanced\",attrs:{\"mode\":_vm.mode}},[_c('portal-target',{attrs:{\"name\":'advanced-' + _vm.uuid,\"multiple\":\"\"}}),_c('div',{staticClass:\"spacer\"}),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col span-4\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.machinePool.autoReplace.label'))+\" \"),_c('i',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.t('cluster.machinePool.autoReplace.toolTip')),expression:\"t('cluster.machinePool.autoReplace.toolTip')\"}],staticClass:\"icon icon-info icon-lg\"})]),_c('UnitInput',{attrs:{\"hide-arrows\":true,\"placeholder\":_vm.t('containerResourceLimit.cpuPlaceholder'),\"mode\":_vm.mode,\"output-modifier\":true,\"base-unit\":_vm.t('cluster.machinePool.autoReplace.unit')},on:{\"input\":function($event){_vm.value.pool.unhealthyNodeTimeout = _vm.unhealthyNodeTimeoutInteger + \"s\"}},model:{value:(_vm.unhealthyNodeTimeoutInteger),callback:function ($$v) {_vm.unhealthyNodeTimeoutInteger=_vm._n($$v)},expression:\"unhealthyNodeTimeoutInteger\"}})],1),_c('div',{staticClass:\"col span-4\"},[_c('h3',[_vm._v(\" \"+_vm._s(_vm.t('cluster.machinePool.drain.header'))+\" \")]),_c('Checkbox',{attrs:{\"mode\":_vm.mode,\"label\":_vm.t('cluster.machinePool.drain.label')},model:{value:(_vm.value.pool.drainBeforeDelete),callback:function ($$v) {_vm.$set(_vm.value.pool, \"drainBeforeDelete\", $$v)},expression:\"value.pool.drainBeforeDelete\"}})],1)]),_c('div',{staticClass:\"spacer\"}),_c('KeyValue',{attrs:{\"add-label\":_vm.t('labels.addLabel'),\"mode\":_vm.mode,\"title\":_vm.t('cluster.machinePool.labels.label'),\"read-allowed\":false,\"value-can-be-empty\":true},model:{value:(_vm.value.pool.labels),callback:function ($$v) {_vm.$set(_vm.value.pool, \"labels\", $$v)},expression:\"value.pool.labels\"}}),_c('div',{staticClass:\"spacer\"}),_c('Taints',{attrs:{\"mode\":_vm.mode},model:{value:(_vm.value.pool.taints),callback:function ($$v) {_vm.$set(_vm.value.pool, \"taints\", $$v)},expression:\"value.pool.taints\"}}),_c('portal-target',{attrs:{\"name\":'advanced-footer-' + _vm.uuid,\"multiple\":\"\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport { _EDIT } from '@shell/config/query-params';\nimport { importMachineConfig } from '@shell/utils/dynamic-importer';\nimport Taints from '@shell/components/form/Taints.vue';\nimport KeyValue from '@shell/components/form/KeyValue.vue';\nimport AdvancedSection from '@shell/components/AdvancedSection.vue';\nimport { Banner } from '@components/Banner';\nimport UnitInput from '@shell/components/form/UnitInput.vue';\nimport { randomStr } from '@shell/utils/string';\nimport { ELEMENTAL_CLUSTER_PROVIDER } from '../../config/elemental-types';\n\nexport default {\n\n  name: 'MachinePool',\n\n  components: {\n    LabeledInput,\n    Checkbox,\n    Taints,\n    KeyValue,\n    AdvancedSection,\n    Banner,\n    UnitInput\n  },\n\n  props: {\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    cluster: {\n      type:     Object,\n      default: () => ({})\n    },\n\n    // no credentials are required for elemental machine pools\n    credentialId: {\n      type:    String,\n      default: null\n    },\n\n    mode: {\n      type:    String,\n      default: _EDIT,\n    },\n\n    provider: {\n      type:     String,\n      required: true,\n    },\n\n    idx: {\n      type:     Number,\n      required: true,\n    },\n\n    machinePools: {\n      type:    Array,\n      default: () => []\n    },\n  },\n\n  data() {\n    const parseDuration = (duration) => {\n      // The back end stores the timeout in Duration format, for example, \"42d31h10m30s\".\n      // Here we convert that string to an integer and return the duration as seconds.\n      const splitStr = duration.split(/([a-z])/);\n\n      const durationsAsSeconds = splitStr.reduce((old, neu, idx) => {\n        const parsed = parseInt(neu);\n\n        if ( isNaN(parsed) ) {\n          return old;\n        }\n\n        const interval = splitStr[(idx + 1)];\n\n        switch (interval) {\n        case 'd':\n          old.push(parsed * 24 * 60 * 60);\n          break;\n        case 'h':\n          old.push(parsed * 60 * 60);\n          break;\n        case 'm':\n          old.push(parsed * 60);\n          break;\n        case 's':\n          old.push(parsed);\n          break;\n        default:\n          break;\n        }\n\n        return old;\n      }, []);\n\n      return durationsAsSeconds.reduce((old, neu) => old + neu);\n    };\n\n    return {\n      uuid: randomStr(),\n\n      unhealthyNodeTimeoutInteger: this.value.pool.unhealthyNodeTimeout ? parseDuration(this.value.pool.unhealthyNodeTimeout) : 0\n    };\n  },\n\n  computed: {\n    configComponent() {\n      if (this.provider === ELEMENTAL_CLUSTER_PROVIDER) {\n        return () => import(/* webpackChunkName: \"machine-config\" */ `../../machine-config/machineinventoryselectortemplate`);\n      }\n\n      const haveProviders = this.$store.getters['plugins/machineDrivers'];\n\n      if ( haveProviders.includes(this.provider) ) {\n        return importMachineConfig(this.provider);\n      }\n\n      return importMachineConfig('generic');\n    },\n\n    isWindows() {\n      return this.value?.config?.os === 'windows';\n    }\n\n  },\n\n  watch: {\n    isWindows(neu) {\n      if (neu) {\n        this.value.pool.etcdRole = false;\n        this.value.pool.controlPlaneRole = false;\n        this.value.pool.machineOS = 'windows';\n      } else {\n        this.value.pool.machineOS = 'linux';\n      }\n    }\n  },\n\n  methods: {\n    async test() {\n      if ( typeof this.$refs.configComponent?.test === 'function' ) {\n        let errors = [];\n\n        try {\n          const res = await this.$refs.configComponent.test();\n\n          if ( !res || res?.errors) {\n            if (res?.errors) {\n              errors = res.errors;\n            }\n          }\n        } catch (e) {\n          errors = [e];\n        }\n\n        return errors;\n      }\n    },\n    // handle emitted matched machine inventories on selector so that machine count\n    // on machine pool can be kept up to date\n    updateMachineCount(val) {\n      this.value.pool.quantity = val || 1;\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col span-4\">\n        <LabeledInput\n          v-model=\"value.pool.name\"\n          :mode=\"mode\"\n          :label=\"t('cluster.machinePool.name.label')\"\n          :required=\"true\"\n          :disabled=\"!value.config || !!value.config.id\"\n        />\n      </div>\n      <div class=\"col span-4\">\n        <LabeledInput\n          v-model.number=\"value.pool.quantity\"\n          :mode=\"mode\"\n          :label=\"t('cluster.machinePool.quantity.label')\"\n          type=\"number\"\n          min=\"0\"\n          :required=\"true\"\n        />\n      </div>\n      <div class=\"col span-4 pt-5\">\n        <h3>\n          {{ t('cluster.machinePool.role.label') }}\n        </h3>\n        <Checkbox\n          v-model=\"value.pool.etcdRole\"\n          :mode=\"mode\"\n          label=\"etcd\"\n          :disabled=\"isWindows\"\n        />\n        <Checkbox\n          v-model=\"value.pool.controlPlaneRole\"\n          :mode=\"mode\"\n          label=\"Control Plane\"\n          :disabled=\"isWindows\"\n        />\n        <Checkbox\n          v-model=\"value.pool.workerRole\"\n          :mode=\"mode\"\n          label=\"Worker\"\n        />\n      </div>\n    </div>\n    <hr class=\"mt-10\" />\n    <component\n      :is=\"configComponent\"\n      v-if=\"value.config\"\n      ref=\"configComponent\"\n      :cluster=\"cluster\"\n      :uuid=\"uuid\"\n      :mode=\"mode\"\n      :value=\"value.config\"\n      :provider=\"provider\"\n      :credential-id=\"credentialId\"\n      :pool-index=\"idx\"\n      :machine-pools=\"machinePools\"\n      @error=\"e=>errors = e\"\n      @updateMachineCount=\"updateMachineCount\"\n    />\n    <Banner v-else-if=\"value.configMissing\" color=\"error\" label-key=\"cluster.machinePool.configNotFound\" />\n    <Banner v-else color=\"info\" label-key=\"cluster.machinePool.noAccessBanner\" />\n\n    <AdvancedSection :mode=\"mode\" class=\"advanced\">\n      <portal-target :name=\"'advanced-' + uuid\" multiple />\n\n      <div class=\"spacer\" />\n      <div class=\"row\">\n        <div class=\"col span-4\">\n          <h3>\n            {{ t('cluster.machinePool.autoReplace.label') }}\n            <i v-tooltip=\"t('cluster.machinePool.autoReplace.toolTip')\" class=\"icon icon-info icon-lg\" />\n          </h3>\n          <UnitInput\n            v-model.number=\"unhealthyNodeTimeoutInteger\"\n            :hide-arrows=\"true\"\n            :placeholder=\"t('containerResourceLimit.cpuPlaceholder')\"\n            :mode=\"mode\"\n            :output-modifier=\"true\"\n            :base-unit=\"t('cluster.machinePool.autoReplace.unit')\"\n            @input=\"value.pool.unhealthyNodeTimeout = `${unhealthyNodeTimeoutInteger}s`\"\n          />\n        </div>\n        <div class=\"col span-4\">\n          <h3>\n            {{ t('cluster.machinePool.drain.header') }}\n          </h3>\n          <Checkbox\n            v-model=\"value.pool.drainBeforeDelete\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machinePool.drain.label')\"\n          />\n        </div>\n      </div>\n      <div class=\"spacer\" />\n      <KeyValue\n        v-model=\"value.pool.labels\"\n        :add-label=\"t('labels.addLabel')\"\n        :mode=\"mode\"\n        :title=\"t('cluster.machinePool.labels.label')\"\n        :read-allowed=\"false\"\n        :value-can-be-empty=\"true\"\n      />\n\n      <div class=\"spacer\" />\n\n      <Taints v-model=\"value.pool.taints\" :mode=\"mode\" />\n\n      <portal-target :name=\"'advanced-footer-' + uuid\" multiple />\n    </AdvancedSection>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .advanced ::v-deep >.vue-portal-target:empty,\n  .advanced ::v-deep >.vue-portal-target:empty + .spacer {\n    display: none;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MachinePool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MachinePool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MachinePool.vue?vue&type=template&id=fe1286b6&scoped=true&\"\nimport script from \"./MachinePool.vue?vue&type=script&lang=js&\"\nexport * from \"./MachinePool.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MachinePool.vue?vue&type=style&index=0&id=fe1286b6&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fe1286b6\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport difference from 'lodash/difference';\nimport throttle from 'lodash/throttle';\nimport isArray from 'lodash/isArray';\nimport merge from 'lodash/merge';\nimport { mapGetters } from 'vuex';\n\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport FormValidation from '@shell/mixins/form-validation';\n\nimport {\n  CAPI,\n  MANAGEMENT,\n  NORMAN,\n  SCHEMA,\n  DEFAULT_WORKSPACE,\n  SECRET,\n  HCI,\n} from '@shell/config/types';\nimport { _CREATE, _EDIT, _VIEW } from '@shell/config/query-params';\nimport { findBy, removeObject, clear } from '@shell/utils/array';\nimport { createYaml } from '@shell/utils/create-yaml';\nimport {\n  clone, diff, set, get, isEmpty\n} from '@shell/utils/object';\nimport { allHash } from '@shell/utils/promise';\nimport { sortBy } from '@shell/utils/sort';\nimport { camelToTitle, nlToBr } from '@shell/utils/string';\nimport { compare, sortable } from '@shell/utils/version';\nimport { isHarvesterSatisfiesVersion } from '@shell/utils/cluster';\n\nimport ArrayList from '@shell/components/form/ArrayList';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport { BadgeState } from '@components/BadgeState';\nimport { Banner } from '@components/Banner';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport CruResource from '@shell/components/CruResource';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Loading from '@shell/components/Loading';\nimport MatchExpressions from '@shell/components/form/MatchExpressions';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { RadioGroup } from '@components/Form/Radio';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport Tabbed from '@shell/components/Tabbed';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport YamlEditor from '@shell/components/YamlEditor';\nimport Questions from '@shell/components/Questions';\n\nimport { normalizeName } from '@shell/components/form/NameNsDescription.vue';\nimport ClusterMembershipEditor from '@shell/components/form/Members/ClusterMembershipEditor';\nimport SelectOrCreateAuthSecret from '@shell/components/form/SelectOrCreateAuthSecret';\nimport { LEGACY } from '@shell/store/features';\nimport semver from 'semver';\nimport { canViewClusterMembershipEditor } from '@shell/components/form/Members/ClusterMembershipEditor.vue';\nimport { SETTING } from '@shell/config/settings';\nimport { base64Encode } from '@shell/utils/crypto';\nimport { CAPI as CAPI_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport ACE from '@shell/edit/provisioning.cattle.io.cluster/ACE';\nimport AgentEnv from '@shell/edit/provisioning.cattle.io.cluster/AgentEnv';\nimport DrainOptions from '@shell/edit/provisioning.cattle.io.cluster/DrainOptions';\nimport Labels from '@shell/edit/provisioning.cattle.io.cluster/Labels';\nimport RegistryConfigs from '@shell/edit/provisioning.cattle.io.cluster/RegistryConfigs';\nimport RegistryMirrors from '@shell/edit/provisioning.cattle.io.cluster/RegistryMirrors';\nimport S3Config from '@shell/edit/provisioning.cattle.io.cluster/S3Config';\nimport SelectCredential from '@shell/edit/provisioning.cattle.io.cluster/SelectCredential';\nimport { ELEMENTAL_SCHEMA_IDS, KIND, ELEMENTAL_CLUSTER_PROVIDER } from '../../config/elemental-types';\nimport MachinePool from './MachinePool';\n\nconst PUBLIC = 'public';\nconst PRIVATE = 'private';\nconst ADVANCED = 'advanced';\n\nconst HARVESTER = 'harvester';\nconst HARVESTER_CLOUD_PROVIDER = 'harvester-cloud-provider';\n\nexport default {\n  components: {\n    ACE,\n    AgentEnv,\n    ArrayList,\n    ArrayListGrouped,\n    BadgeState,\n    Banner,\n    Checkbox,\n    ClusterMembershipEditor,\n    CruResource,\n    DrainOptions,\n    LabeledInput,\n    LabeledSelect,\n    Labels,\n    Loading,\n    MachinePool,\n    MatchExpressions,\n    NameNsDescription,\n    Questions,\n    RadioGroup,\n    RegistryConfigs,\n    RegistryMirrors,\n    S3Config,\n    SelectCredential,\n    SelectOrCreateAuthSecret,\n    Tab,\n    Tabbed,\n    UnitInput,\n    YamlEditor,\n  },\n\n  mixins: [CreateEditView, FormValidation],\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    provider: {\n      type:     String,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    if ( !this.rke2Versions ) {\n      const hash = {\n        rke2Versions: this.$store.dispatch('management/request', { url: '/v1-rke2-release/releases' }),\n        k3sVersions:  this.$store.dispatch('management/request', { url: '/v1-k3s-release/releases' }),\n      };\n\n      if ( this.$store.getters['management/canList'](MANAGEMENT.POD_SECURITY_POLICY_TEMPLATE) ) {\n        hash.allPSPs = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.POD_SECURITY_POLICY_TEMPLATE });\n      }\n\n      // Get the latest versions from the global settings if possible\n      const globalSettings = await this.$store.getters['management/all'](MANAGEMENT.SETTING) || [];\n      const defaultRke2Setting = globalSettings.find(setting => setting.id === 'rke2-default-version') || {};\n      const defaultK3sSetting = globalSettings.find(setting => setting.id === 'k3s-default-version') || {};\n\n      let defaultRke2 = defaultRke2Setting?.value || defaultRke2Setting?.default;\n      let defaultK3s = defaultK3sSetting?.value || defaultK3sSetting?.default;\n\n      // RKE2: Use the channel if we can not get the version from the settings\n      if (!defaultRke2) {\n        hash.rke2Channels = this.$store.dispatch('management/request', { url: '/v1-rke2-release/channels' });\n      }\n\n      // K3S: Use the channel if we can not get the version from the settings\n      if (!defaultK3s) {\n        hash.k3sChannels = this.$store.dispatch('management/request', { url: '/v1-k3s-release/channels' });\n      }\n\n      const res = await allHash(hash);\n\n      this.allPSPs = res.allPSPs || [];\n      this.rke2Versions = res.rke2Versions.data || [];\n      this.k3sVersions = res.k3sVersions.data || [];\n\n      if (!defaultRke2) {\n        const rke2Channels = res.rke2Channels.data || [];\n\n        defaultRke2 = rke2Channels.find(x => x.id === 'default')?.latest;\n      }\n\n      if (!defaultK3s) {\n        const k3sChannels = res.k3sChannels.data || [];\n\n        defaultK3s = k3sChannels.find(x => x.id === 'default')?.latest;\n      }\n\n      if ( !this.rke2Versions.length && !this.k3sVersions.length ) {\n        throw new Error('No version info found in KDM');\n      }\n\n      // Store default versions\n      this.defaultRke2 = defaultRke2;\n      this.defaultK3s = defaultK3s;\n    }\n\n    if ( !this.value.spec ) {\n      set(this.value, 'spec', {});\n    }\n\n    if ( !this.value.spec.machineSelectorConfig ) {\n      set(this.value.spec, 'machineSelectorConfig', []);\n    }\n\n    if ( !this.value.spec.machineSelectorConfig.find(x => !x.machineLabelSelector) ) {\n      this.value.spec.machineSelectorConfig.unshift({ config: {} });\n    }\n\n    if ( this.value.spec.cloudCredentialSecretName ) {\n      await this.$store.dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL });\n      this.credentialId = `${ this.value.spec.cloudCredentialSecretName }`;\n    }\n\n    if ( !this.value.spec.kubernetesVersion ) {\n      set(this.value.spec, 'kubernetesVersion', this.defaultVersion);\n    }\n\n    if ( this.rkeConfig.etcd?.s3?.bucket ) {\n      this.s3Backup = true;\n    }\n\n    if ( !this.rkeConfig.etcd ) {\n      set(this.rkeConfig, 'etcd', {\n        disableSnapshots:     false,\n        s3:                   null,\n        snapshotRetention:    5,\n        snapshotScheduleCron: '0 */5 * * *',\n      });\n    } else if (typeof this.rkeConfig.etcd.disableSnapshots === 'undefined') {\n      const disableSnapshots = !this.rkeConfig.etcd.snapshotRetention && !this.rkeConfig.etcd.snapshotScheduleCron;\n\n      set(this.rkeConfig.etcd, 'disableSnapshots', disableSnapshots);\n    }\n\n    if ( !this.machinePools ) {\n      await this.initMachinePools(this.value.spec.rkeConfig.machinePools);\n      if ( this.mode === _CREATE && !this.machinePools.length ) {\n        await this.addMachinePool();\n      }\n    }\n\n    if ( this.value.spec.defaultPodSecurityPolicyTemplateName === undefined ) {\n      set(this.value.spec, 'defaultPodSecurityPolicyTemplateName', '');\n    }\n\n    await this.initAddons();\n    await this.initRegistry();\n\n    Object.entries(this.chartValues).forEach(([name, value]) => {\n      const key = this.chartVersionKey(name);\n\n      this.userChartValues[key] = value;\n    });\n  },\n\n  data() {\n    if ( !this.value.spec.rkeConfig ) {\n      set(this.value.spec, 'rkeConfig', {});\n    }\n\n    if ( !this.value.spec.rkeConfig.chartValues ) {\n      set(this.value.spec.rkeConfig, 'chartValues', {});\n    }\n\n    if ( !this.value.spec.rkeConfig.upgradeStrategy ) {\n      set(this.value.spec.rkeConfig, 'upgradeStrategy', {\n        controlPlaneConcurrency:  '1',\n        controlPlaneDrainOptions: {},\n        workerConcurrency:        '1',\n        workerDrainOptions:       {},\n      });\n    }\n\n    if ( !this.value.spec.rkeConfig.machineGlobalConfig ) {\n      set(this.value.spec, 'rkeConfig.machineGlobalConfig', {});\n    }\n\n    if ( !this.value.spec.rkeConfig.machineSelectorConfig?.length ) {\n      set(this.value.spec, 'rkeConfig.machineSelectorConfig', [{ config: {} }]);\n    }\n\n    return {\n      loadedOnce:                  false,\n      lastIdx:                     0,\n      allPSPs:                     null,\n      nodeComponent:               null,\n      credentialId:                null,\n      credential:                  null,\n      machinePools:                null,\n      rke2Versions:                null,\n      k3sVersions:                 null,\n      defaultRke2:                 '',\n      defaultK3s:                  '',\n      s3Backup:                    false,\n      versionInfo:                 {},\n      membershipUpdate:            {},\n      showDeprecatedPatchVersions: false,\n      systemRegistry:              null,\n      registryHost:                null,\n      registryMode:                null,\n      registrySecret:              null,\n      userChartValues:             {},\n      userChartValuesTemp:         {},\n      addonsRev:                   0,\n      clusterIsAlreadyCreated:     !!this.value.id,\n      fvFormRuleSets:              [{\n        path: 'metadata.name', rules: ['subDomain'], translationKey: 'nameNsDescription.name.label'\n      }],\n      harvesterVersionRange: {},\n    };\n  },\n\n  computed: {\n    ...mapGetters({ allCharts: 'catalog/charts' }),\n    ...mapGetters({ features: 'features/get' }),\n\n    PUBLIC:   () => PUBLIC,\n    PRIVATE:  () => PRIVATE,\n    ADVANCED: () => ADVANCED,\n\n    rkeConfig() {\n      return this.value.spec.rkeConfig;\n    },\n\n    isElementalCluster() {\n      return this.provider === ELEMENTAL_CLUSTER_PROVIDER || this.value?.machineProvider?.toLowerCase() === KIND.MACHINE_INV_SELECTOR_TEMPLATES.toLowerCase();\n    },\n\n    advancedTitleAlt() {\n      const machineSelectorLength = this.rkeConfig.machineSelectorConfig.length;\n\n      return this.t('cluster.advanced.argInfo.machineSelector.titleAlt', { count: machineSelectorLength });\n    },\n\n    chartValues() {\n      return this.value.spec.rkeConfig.chartValues;\n    },\n\n    serverConfig() {\n      return this.value.spec.rkeConfig.machineGlobalConfig;\n    },\n\n    agentConfig() {\n      return this.value.agentConfig;\n    },\n\n    // kubeletConfigs() {\n    //   return this.value.spec.rkeConfig.machineSelectorConfig.filter(x => !!x.machineLabelSelector);\n    // },\n\n    unsupportedSelectorConfig() {\n      let global = 0;\n      let kubeletOnly = 0;\n      let other = 0;\n\n      // The form supports one config that has no selector for all the main parts\n      // And one or more configs that have a selector and exactly only kubelet-args.\n      // If there are any other properties set, or multiple configs with no selector\n      // show a warning that you're editing only part of the config in the UI.\n\n      for ( const conf of this.value.spec?.rkeConfig?.machineSelectorConfig ) {\n        if ( conf.machineLabelSelector ) {\n          const keys = Object.keys(conf.config || {});\n\n          if ( keys.length === 0 || (keys.length === 1 && keys[0] === 'kubelet-arg') ) {\n            kubeletOnly++;\n          } else {\n            other++;\n          }\n        } else {\n          global++;\n        }\n      }\n\n      // eslint-disable-next-line no-console\n      console.log(`Global: ${ global }, Kubelet Only: ${ kubeletOnly }, Other: ${ other }`);\n\n      return ( global > 1 || other > 0 );\n    },\n\n    versionOptions() {\n      const cur = this.liveValue?.spec?.kubernetesVersion || '';\n      const existingRke2 = this.mode === _EDIT && cur.includes('rke2');\n      const existingK3s = this.mode === _EDIT && cur.includes('k3s');\n\n      let allValidRke2Versions = this.getAllOptionsAfterMinVersion(this.rke2Versions, (existingRke2 ? cur : null), this.defaultRke2);\n      let allValidK3sVersions = this.getAllOptionsAfterMinVersion(this.k3sVersions, (existingK3s ? cur : null), this.defaultK3s);\n\n      if (!this.showDeprecatedPatchVersions) {\n        // Normally, we only want to show the most recent patch version\n        // for each Kubernetes minor version. However, if the user\n        // opts in to showing deprecated versions, we don't filter them.\n        allValidRke2Versions = this.filterOutDeprecatedPatchVersions(allValidRke2Versions, cur);\n        allValidK3sVersions = this.filterOutDeprecatedPatchVersions(allValidK3sVersions, cur);\n      }\n\n      const showRke2 = allValidRke2Versions.length && !existingK3s;\n      const showK3s = allValidK3sVersions.length && !existingRke2;\n      const out = [];\n\n      if ( showRke2 ) {\n        if ( showK3s ) {\n          out.push({ kind: 'group', label: this.t('cluster.provider.rke2') });\n        }\n\n        out.push(...allValidRke2Versions);\n      }\n\n      if ( showK3s ) {\n        if ( showRke2 ) {\n          out.push({\n            kind:  'group',\n            label: this.t('cluster.provider.k3s')\n          });\n        }\n\n        out.push(...allValidK3sVersions);\n      }\n\n      if ( cur ) {\n        const existing = out.find(x => x.value === cur);\n\n        if ( existing ) {\n          existing.disabled = false;\n        } else {\n          out.unshift({ label: `${ cur } (current)`, value: cur });\n        }\n      }\n\n      return out;\n    },\n\n    isK3s() {\n      return (this.value?.spec?.kubernetesVersion || '').includes('k3s');\n    },\n\n    profileOptions() {\n      const out = (this.agentArgs.profile?.options || []).map((x) => {\n        return { label: x, value: x };\n      });\n\n      out.unshift({ label: '(None)', value: '' });\n\n      return out;\n    },\n\n    pspOptions() {\n      if ( this.isK3s ) {\n        return null;\n      }\n\n      const out = [{ label: 'RKE2 Default', value: '' }];\n\n      if ( this.allPSPs ) {\n        for ( const pspt of this.allPSPs ) {\n          out.push({\n            label: pspt.nameDisplay,\n            value: pspt.id,\n          });\n        }\n      }\n\n      const cur = this.value.spec.defaultPodSecurityPolicyTemplateName;\n\n      if ( cur && !out.find(x => x.value === cur) ) {\n        out.unshift({ label: `${ cur } (Current)`, value: cur });\n      }\n\n      return out;\n    },\n\n    disableOptions() {\n      return this.serverArgs.disable.options.map((value) => {\n        return {\n          label: this.$store.getters['i18n/withFallback'](`cluster.${ this.isK3s ? 'k3s' : 'rke2' }.systemService.\"${ value }\"`, null, value.replace(/^(rke2|rancher)-/, '')),\n          value,\n        };\n      });\n    },\n\n    cloudProviderOptions() {\n      const out = [{ label: '(None)', value: '' }];\n\n      const preferred = this.$store.getters['plugins/cloudProviderForDriver'](this.provider);\n\n      for ( const opt of this.agentArgs['cloud-provider-name'].options ) {\n        // If we don't have a preferred provider... show all options\n        const showAllOptions = preferred === undefined;\n        // If we have a preferred provider... only show default, preferred and external\n        const isPreferred = opt === preferred;\n        const isExternal = opt === 'external';\n        let disabled = false;\n\n        if ((this.isHarvesterExternalCredential || this.isHarvesterIncompatible) && isPreferred) {\n          disabled = true;\n        }\n\n        if (showAllOptions || isPreferred || isExternal) {\n          out.push({\n            label: this.$store.getters['i18n/withFallback'](`cluster.cloudProvider.\"${ opt }\".label`, null, opt),\n            value: opt,\n            disabled,\n          });\n        }\n      }\n\n      const cur = this.agentConfig['cloud-provider-name'];\n\n      if ( cur && !out.find(x => x.value === cur) ) {\n        out.unshift({ label: `${ cur } (Current)`, value: cur });\n      }\n\n      return out;\n    },\n\n    selectedVersion() {\n      const str = this.value.spec.kubernetesVersion;\n\n      if ( !str ) {\n        return;\n      }\n\n      const out = findBy(this.versionOptions, 'value', str);\n\n      return out;\n    },\n\n    haveArgInfo() {\n      if ( this.selectedVersion?.serverArgs && this.selectedVersion?.agentArgs ) {\n        return true;\n      }\n\n      return false;\n    },\n\n    serverArgs() {\n      return this.selectedVersion?.serverArgs || {};\n    },\n\n    agentArgs() {\n      return this.selectedVersion?.agentArgs || {};\n    },\n\n    chartVersions() {\n      return this.selectedVersion?.charts || {};\n    },\n\n    showCisProfile() {\n      return (this.provider === 'custom' || this.isElementalCluster) && ( this.serverArgs.profile || this.agentArgs.profile );\n    },\n\n    registryOptions() {\n      return [PUBLIC, PRIVATE, ADVANCED].map((opt) => {\n        return {\n          label: this.$store.getters['i18n/withFallback'](`cluster.privateRegistry.mode.\"${ opt }\"`, null, opt),\n          value: opt,\n        };\n      });\n    },\n\n    needCredential() {\n      if ( this.provider === 'custom' || this.provider === 'import' || this.isElementalCluster || this.mode === _VIEW ) {\n        return false;\n      }\n\n      return true;\n    },\n\n    hasMachinePools() {\n      if ( this.provider === 'custom' || this.provider === 'import' ) {\n        return false;\n      }\n\n      return true;\n    },\n\n    unremovedMachinePools() {\n      return this.machinePools.filter(x => !x.remove);\n    },\n\n    machineConfigSchema() {\n      let schemaAddress;\n\n      if ( !this.hasMachinePools ) {\n        return null;\n      } else if (this.isElementalCluster) {\n        schemaAddress = ELEMENTAL_SCHEMA_IDS.MACHINE_INV_SELECTOR_TEMPLATES;\n      } else {\n        schemaAddress = `${ CAPI.MACHINE_CONFIG_GROUP }.${ this.provider }config`;\n      }\n\n      const schema = this.$store.getters['management/schemaFor'](schemaAddress);\n\n      return schema;\n    },\n\n    nodeTotals() {\n      const roles = ['etcd', 'controlPlane', 'worker'];\n      const counts = {};\n      const out = {\n        color:   {},\n        label:   {},\n        icon:    {},\n        tooltip: {},\n      };\n\n      for ( const role of roles ) {\n        counts[role] = 0;\n        out.color[role] = 'bg-success';\n        out.icon[role] = 'icon-checkmark';\n      }\n\n      for ( const row of this.machinePools ) {\n        if ( row.remove ) {\n          continue;\n        }\n\n        const qty = parseInt(row.pool.quantity, 10);\n\n        if ( isNaN(qty) ) {\n          continue;\n        }\n\n        for ( const role of roles ) {\n          counts[role] = counts[role] + (row.pool[`${ role }Role`] ? qty : 0);\n        }\n      }\n\n      for ( const role of roles ) {\n        out.label[role] = this.t(`cluster.machinePool.nodeTotals.label.${ role }`, { count: counts[role] });\n        out.tooltip[role] = this.t(`cluster.machinePool.nodeTotals.tooltip.${ role }`, { count: counts[role] });\n      }\n\n      if ( counts.etcd === 0 ) {\n        out.color.etcd = 'bg-error';\n        out.icon.etcd = 'icon-x';\n      } else if ( counts.etcd === 1 || counts.etcd % 2 === 0 || counts.etcd > 7 ) {\n        out.color.etcd = 'bg-warning';\n        out.icon.etcd = 'icon-warning';\n      }\n\n      if ( counts.controlPlane === 0 ) {\n        out.color.controlPlane = 'bg-error';\n        out.icon.controlPlane = 'icon-x';\n      } else if ( counts.controlPlane === 1 ) {\n        out.color.controlPlane = 'bg-warning';\n        out.icon.controlPlane = 'icon-warning';\n      }\n\n      if ( counts.worker === 0 ) {\n        out.color.worker = 'bg-error';\n        out.icon.worker = 'icon-x';\n      } else if ( counts.worker === 1 ) {\n        out.color.worker = 'bg-warning';\n        out.icon.worker = 'icon-warning';\n      }\n\n      return out;\n    },\n\n    enabledSystemServices: {\n      get() {\n        const out = difference(this.serverArgs.disable.options, this.serverConfig.disable || []);\n\n        return out;\n      },\n\n      set(neu) {\n        const out = difference(this.serverArgs.disable.options, neu);\n\n        set(this.serverConfig, 'disable', out);\n      },\n    },\n\n    showCloudConfigYaml() {\n      if ( !this.agentArgs['cloud-provider-name'] ) {\n        return false;\n      }\n\n      const name = this.agentConfig['cloud-provider-name'];\n\n      if ( !name ) {\n        return false;\n      }\n\n      switch ( name ) {\n      case 'none': return false;\n      case 'aws': return false;\n      case 'rancher-vsphere': return false;\n      case HARVESTER: return false;\n      default: return true;\n      }\n    },\n\n    showVsphereNote() {\n      if ( !this.agentArgs['cloud-provider-name'] ) {\n        return false;\n      }\n\n      const name = this.agentConfig['cloud-provider-name'];\n\n      return name === 'rancher-vsphere';\n    },\n\n    showCni() {\n      return !!this.serverArgs.cni;\n    },\n\n    showCloudProvider() {\n      return this.agentArgs['cloud-provider-name'];\n    },\n\n    addonNames() {\n      const names = [];\n      const cni = this.serverConfig.cni;\n\n      if ( cni ) {\n        const parts = cni.split(',').map(x => `rke2-${ x }`);\n\n        names.push(...parts);\n      }\n\n      if (this.showCloudProvider) { // Shouldn't be removed such that changes to it will re-trigger this watch\n        if ( this.agentConfig['cloud-provider-name'] === 'rancher-vsphere' ) {\n          names.push('rancher-vsphere-cpi', 'rancher-vsphere-csi');\n        }\n\n        if ( this.agentConfig['cloud-provider-name'] === HARVESTER ) {\n          names.push(HARVESTER_CLOUD_PROVIDER);\n        }\n      }\n\n      return names;\n    },\n\n    addonVersions() {\n      const versions = this.addonNames.map(name => this.chartVersionFor(name));\n\n      return versions.filter(x => !!x);\n    },\n\n    showk8s21LegacyWarning() {\n      const isLegacyEnabled = this.features(LEGACY);\n\n      if (!isLegacyEnabled) {\n        return false;\n      }\n      const selectedVersion = semver.coerce(this.value.spec.kubernetesVersion);\n\n      return semver.satisfies(selectedVersion, '>=1.21.0');\n    },\n\n    canManageMembers() {\n      return canViewClusterMembershipEditor(this.$store);\n    },\n\n    isHarvesterDriver() {\n      return this.$route.query.type === HARVESTER;\n    },\n\n    defaultVersion() {\n      const all = this.versionOptions.filter(x => !!x.value);\n      const first = all[0]?.value;\n\n      const preferred = all.find(x => x.value === this.defaultRke2)?.value;\n\n      const rke2 = this.getAllOptionsAfterMinVersion(this.rke2Versions, null);\n      const showRke2 = rke2.length;\n      let out;\n\n      if (this.isHarvesterDriver && showRke2) {\n        const satisfiesVersion = rke2.filter((v) => {\n          return isHarvesterSatisfiesVersion(v.value);\n        }) || [];\n\n        if (satisfiesVersion.length > 0) {\n          out = satisfiesVersion[0]?.value;\n        }\n      }\n\n      if ( !out ) {\n        out = preferred || first;\n      }\n\n      return out;\n    },\n\n    ciliumIpv6: {\n      get() {\n        // eslint-disable-next-line no-unused-vars\n        const cni = this.serverConfig.cni; // force this property to recalculate if cni was changed away from cilium and chartValues['rke-cilium'] deleted\n\n        return this.userChartValues[this.chartVersionKey('rke2-cilium')]?.cilium?.ipv6?.enabled || false;\n      },\n      set(val) {\n        const name = this.chartVersionKey('rke2-cilium');\n        const values = this.userChartValues[name];\n\n        set(this, 'userChartValues', {\n          ...this.userChartValues,\n          [name]: {\n            ...values,\n            cilium: {\n              ...values?.cilium,\n              ipv6: {\n                ...values?.cilium?.ipv6,\n                enabled: val\n              }\n            }\n          }\n        });\n      }\n    },\n\n    showIpv6Warning() {\n      const clusterCIDR = this.serverConfig['cluster-cidr'] || '';\n      const serviceCIDR = this.serverConfig['service-cidr'] || '';\n\n      return clusterCIDR.includes(':') || serviceCIDR.includes(':');\n    },\n\n    appsOSWarning() {\n      if (this.mode !== _EDIT ) {\n        return null;\n      }\n      const { linuxWorkerCount, windowsWorkerCount } = this.value?.mgmt?.status || {};\n\n      if (!windowsWorkerCount) {\n        if (!!this.machinePools.find((pool) => {\n          return pool?.config?.os === 'windows';\n        })) {\n          return this.t('cluster.banner.os', { newOS: 'Windows', existingOS: 'Linux' });\n        }\n      } else if (!linuxWorkerCount) {\n        if (this.machinePools.find((pool) => {\n          return pool?.config?.os === 'linux';\n        })) {\n          return this.t('cluster.banner.os', { newOS: 'Linux', existingOS: 'Windows' });\n        }\n      }\n\n      return null;\n    },\n\n    showForm() {\n      return !!this.credentialId || !this.needCredential;\n    },\n\n    isHarvesterExternalCredential() {\n      return this.credential?.harvestercredentialConfig?.clusterType === 'external';\n    },\n\n    isHarvesterIncompatible() {\n      let ccmRke2Version = (this.chartVersions['harvester-cloud-provider'] || {})['version'];\n      let csiRke2Version = (this.chartVersions['harvester-csi-driver'] || {})['version'];\n\n      const ccmVersion = this.harvesterVersionRange?.['harvester-cloud-provider'];\n      const csiVersion = this.harvesterVersionRange?.['harvester-csi-provider'];\n\n      if ((ccmRke2Version || '').endsWith('00')) {\n        ccmRke2Version = ccmRke2Version.slice(0, -2);\n      }\n\n      if ((csiRke2Version || '').endsWith('00')) {\n        csiRke2Version = csiRke2Version.slice(0, -2);\n      }\n\n      if (ccmVersion && csiVersion) {\n        if (semver.satisfies(ccmRke2Version, ccmVersion) &&\n            semver.satisfies(csiRke2Version, csiVersion)) {\n          return false;\n        } else {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    },\n  },\n\n  watch: {\n    s3Backup(neu) {\n      if ( neu ) {\n        // We need to make sure that s3 doesn't already have an existing value otherwise when editing a cluster with s3 defined this will clear s3.\n        if (isEmpty(this.rkeConfig.etcd?.s3)) {\n          set(this.rkeConfig.etcd, 's3', {});\n        }\n      } else {\n        set(this.rkeConfig.etcd, 's3', null);\n      }\n    },\n\n    credentialId(val) {\n      if ( val ) {\n        this.credential = this.$store.getters['rancher/byId'](NORMAN.CLOUD_CREDENTIAL, this.credentialId);\n\n        if (this.isHarvesterDriver) {\n          this.setHarvesterVersionRange();\n        }\n      } else {\n        this.credential = null;\n      }\n\n      this.value.spec.cloudCredentialSecretName = val;\n    },\n\n    addonNames(neu, old) {\n      // To catch the 'some addons' --> 'no addons' case also check array length (`difference([], [1,2,3]) === []`)\n      const diff = old.length !== neu.length || difference(neu, old).length ;\n\n      if (diff) {\n        // Allow time for addonNames to update... then fetch any missing addons\n        this.$nextTick(() => this.initAddons());\n      }\n    },\n\n    selectedVersion() {\n      this.versionInfo = {}; // Invalidate cache such that version info relevent to selected kube version is updated\n\n      // Allow time for addonNames to update... then fetch any missing addons\n      this.$nextTick(() => this.initAddons());\n      if (this.mode === _CREATE) {\n        this.initServerAgentArgs();\n      }\n    },\n\n    showCni(neu) {\n      // Update `serverConfig.cni to recalculate addonNames...\n      // ... which will eventually update `value.spec.rkeConfig.chartValues`\n      if (neu) {\n        // Type supports CNI, assign default if we can\n        if (!this.serverConfig.cni) {\n          const def = this.serverArgs.cni.default;\n\n          set(this.serverConfig, 'cni', def);\n        }\n      } else {\n        // Type doesn't support cni, clear `cni`\n        set(this.serverConfig, 'cni', undefined);\n      }\n    },\n\n    showCloudProvider(neu) {\n      if (!neu) {\n        // No cloud provider available? Then clear cloud provider setting. This will recalculate addonNames...\n        // ... which will eventually update `value.spec.rkeConfig.chartValues`\n        set(this.agentConfig, 'cloud-provider-name', undefined);\n      }\n    },\n\n  },\n\n  mounted() {\n    window.rke = this;\n  },\n\n  created() {\n    this.registerBeforeHook(this.saveMachinePools, 'save-machine-pools');\n    this.registerBeforeHook(this.setRegistryConfig, 'set-registry-config');\n    this.registerAfterHook(this.cleanupMachinePools, 'cleanup-machine-pools');\n    this.registerAfterHook(this.saveRoleBindings, 'save-role-bindings');\n  },\n\n  methods: {\n    nlToBr,\n    set,\n\n    async initMachinePools(existing) {\n      const out = [];\n\n      if ( existing?.length ) {\n        for ( const pool of existing ) {\n          let type;\n\n          if (this.isElementalCluster) {\n            type = ELEMENTAL_SCHEMA_IDS.MACHINE_INV_SELECTOR_TEMPLATES;\n          } else {\n            type = `${ CAPI.MACHINE_CONFIG_GROUP }.${ pool.machineConfigRef.kind.toLowerCase() }`;\n          }\n\n          const id = `pool${ ++this.lastIdx }`;\n          let config;\n          let configMissing = false;\n\n          if ( this.$store.getters['management/canList'](type) ) {\n            try {\n              config = await this.$store.dispatch('management/find', {\n                type,\n                id: `${ this.value.metadata.namespace }/${ pool.machineConfigRef.name }`,\n              });\n            } catch (e) {\n              // Some users can't see the config, that's ok. we will display a banner for a 404\n              if (e?.status === 404) {\n                if (this.isElementalCluster) {\n                  configMissing = true;\n                }\n              }\n            }\n          }\n\n          out.push({\n            id,\n            remove: false,\n            create:  false,\n            update: true,\n            pool:    clone(pool),\n            config:  config ? await this.$store.dispatch('management/clone', { resource: config }) : null,\n            configMissing\n          });\n        }\n      }\n\n      this.machinePools = out;\n    },\n\n    async addMachinePool(idx) {\n      if ( !this.machineConfigSchema && !this.isElementalCluster ) {\n        return;\n      }\n\n      const numCurrentPools = this.machinePools.length || 0;\n\n      const config = await this.$store.dispatch('management/createPopulated', {\n        type:     this.machineConfigSchema.id,\n        metadata: { namespace: DEFAULT_WORKSPACE }\n      });\n\n      config.applyDefaults(idx, this.machinePools);\n\n      const name = `pool${ ++this.lastIdx }`;\n      const pool = {\n        id:      name,\n        config,\n        remove: false,\n        create:  true,\n        update: false,\n        pool:    {\n          name,\n          etcdRole:             numCurrentPools === 0,\n          controlPlaneRole:     numCurrentPools === 0,\n          workerRole:           true,\n          hostnamePrefix:       '',\n          labels:               {},\n          quantity:             1,\n          unhealthyNodeTimeout: '0m',\n          machineConfigRef:     {\n            kind:       this.machineConfigSchema.attributes.kind,\n            name:       null,\n          },\n        },\n      };\n\n      if (this.provider === 'vmwarevsphere') {\n        pool.pool.machineOS = 'linux';\n      }\n\n      if (this.isElementalCluster) {\n        pool.pool.machineConfigRef.apiVersion = 'elemental.cattle.io/v1beta1';\n      }\n\n      this.machinePools.push(pool);\n\n      this.$nextTick(() => {\n        if ( this.$refs.pools?.select ) {\n          this.$refs.pools.select(name);\n        }\n      });\n    },\n\n    removeMachinePool(idx) {\n      const entry = this.machinePools[idx];\n\n      if ( !entry ) {\n        return;\n      }\n\n      if ( entry.create ) {\n        // If this is a new pool that isn't saved yet, it can just be dropped\n        removeObject(this.machinePools, entry);\n      } else {\n        // Mark for removal on save\n        entry.remove = true;\n      }\n    },\n\n    async syncMachineConfigWithLatest(machinePool) {\n      if (machinePool?.config?.id) {\n        const latestConfig = await this.$store.dispatch('management/find', {\n          type: machinePool.config.type,\n          id:   machinePool.config.id,\n          opt:  { force: true },\n        });\n        const clonedCurrentConfig = await this.$store.dispatch('management/clone', { resource: machinePool.config });\n        const clonedLatestConfig = await this.$store.dispatch('management/clone', { resource: latestConfig });\n\n        // We don't allow the user to edit any of the fields in metadata from the UI so it's safe to override it with the\n        // metadata defined by the latest backend value. This is primarily used to ensure the resourceVersion is up to date.\n        delete clonedCurrentConfig.metadata;\n        machinePool.config = merge(clonedLatestConfig, clonedCurrentConfig);\n      }\n    },\n\n    async saveMachinePools() {\n      const finalPools = [];\n\n      for ( const entry of this.machinePools ) {\n        if ( entry.remove ) {\n          continue;\n        }\n\n        await this.syncMachineConfigWithLatest(entry);\n\n        // Capitals and such aren't allowed;\n        set(entry.pool, 'name', normalizeName(entry.pool.name) || 'pool');\n\n        const prefix = `${ this.value.metadata.name }-${ entry.pool.name }`.substr(0, 50).toLowerCase();\n\n        if ( entry.create ) {\n          if ( !entry.config.metadata?.name ) {\n            entry.config.metadata.generateName = `nc-${ prefix }-`;\n          }\n\n          const neu = await entry.config.save();\n\n          entry.config = neu;\n          entry.pool.machineConfigRef.name = neu.metadata.name;\n          entry.create = false;\n          entry.update = true;\n        } else if ( entry.update ) {\n          entry.config = await entry.config.save();\n        }\n\n        if ( !entry.pool.hostnamePrefix ) {\n          entry.pool.hostnamePrefix = `${ prefix }-`;\n        }\n\n        finalPools.push(entry.pool);\n      }\n\n      this.value.spec.rkeConfig.machinePools = finalPools;\n    },\n\n    async cleanupMachinePools() {\n      for ( const entry of this.machinePools ) {\n        if ( entry.remove && entry.config ) {\n          try {\n            await entry.config.remove();\n          } catch (e) {}\n        }\n      }\n    },\n\n    async saveRoleBindings() {\n      await this.value.waitForMgmt();\n\n      if (this.membershipUpdate.save) {\n        await this.membershipUpdate.save(this.value.mgmt.id);\n      }\n    },\n\n    validationPassed() {\n      return (this.provider === 'custom' || this.isElementalCluster || !!this.credentialId);\n    },\n\n    cancelCredential() {\n      if ( this.$refs.cruresource ) {\n        this.$refs.cruresource.emitOrRoute();\n      }\n    },\n\n    done() {\n      let routeName = 'c-cluster-product-resource';\n\n      if ( this.mode === _CREATE && (this.provider === 'import' || this.provider === 'custom') ) {\n        // Go show the registration command\n        routeName = 'c-cluster-product-resource-namespace-id';\n      }\n\n      this.$router.push({\n        name:   routeName,\n        params: {\n          cluster:   this.$route.params.cluster,\n          product:   this.$store.getters['productId'],\n          resource:  CAPI.RANCHER_CLUSTER,\n          namespace: this.value.metadata.namespace,\n          id:        this.value.metadata.name,\n        },\n      });\n    },\n\n    showAddonConfirmation() {\n      return new Promise((resolve, reject) => {\n        this.$store.dispatch('cluster/promptModal', { component: 'AddonConfigConfirmationDialog', resources: [value => resolve(value)] });\n      });\n    },\n\n    async saveOverride(btnCb) {\n      if ( this.errors ) {\n        clear(this.errors);\n      }\n\n      if (this.isEdit && this.liveValue?.spec?.kubernetesVersion !== this.value?.spec?.kubernetesVersion) {\n        const shouldContinue = await this.showAddonConfirmation();\n\n        if (!shouldContinue) {\n          return btnCb('cancelled');\n        }\n      }\n\n      if (this.value.cloudProvider === 'aws') {\n        const missingProfileName = this.machinePools.some(mp => !mp.config.iamInstanceProfile);\n\n        if (missingProfileName) {\n          this.errors.push(this.t('cluster.validation.iamInstanceProfileName', {}, true));\n        }\n      }\n\n      for (const [index] of this.machinePools.entries()) { // validator machine config\n        if ( typeof this.$refs.pool[index]?.test === 'function' ) {\n          try {\n            const res = await this.$refs.pool[index].test();\n\n            if (Array.isArray(res) && res.length > 0) {\n              this.errors.push(...res);\n            }\n          } catch (e) {\n            this.errors.push(e);\n          }\n        }\n      }\n\n      if (!this.value.metadata.name && this.agentConfig['cloud-provider-name'] === HARVESTER) {\n        this.errors.push(this.t('validation.required', { key: this.t('cluster.name.label') }, true));\n      }\n\n      if (this.errors.length) {\n        btnCb(false);\n\n        return;\n      }\n\n      try {\n        const clusterId = get(this.credential, 'decodedData.clusterId') || '';\n\n        this.applyChartValues(this.value.spec.rkeConfig);\n\n        const isUpgrade = this.isEdit && this.liveValue?.spec?.kubernetesVersion !== this.value?.spec?.kubernetesVersion;\n\n        if (this.agentConfig['cloud-provider-name'] === HARVESTER && clusterId && (this.isCreate || isUpgrade)) {\n          const namespace = this.machinePools?.[0]?.config?.vmNamespace;\n\n          const res = await this.$store.dispatch('management/request', {\n            url:                  `/k8s/clusters/${ clusterId }/v1/harvester/kubeconfig`,\n            method:               'POST',\n            data:                 {\n              clusterRoleName:    'harvesterhci.io:cloudprovider',\n              namespace,\n              serviceAccountName: this.value.metadata.name,\n            },\n          });\n\n          const kubeconfig = res.data;\n\n          const harvesterKubeconfigSecret = await this.createKubeconfigSecret(kubeconfig);\n\n          set(this.agentConfig, 'cloud-provider-config', `secret://fleet-default:${ harvesterKubeconfigSecret?.metadata?.name }`);\n          set(this.chartValues, `${ HARVESTER_CLOUD_PROVIDER }.clusterName`, this.value.metadata.name);\n          set(this.chartValues, `${ HARVESTER_CLOUD_PROVIDER }.cloudConfigPath`, '/var/lib/rancher/rke2/etc/config-files/cloud-provider-config');\n        }\n      } catch (err) {\n        this.errors.push(err);\n\n        btnCb(false);\n\n        return;\n      }\n\n      await this.save(btnCb);\n    },\n    // create a secret to reference the harvester cluster kubeconfig in rkeConfig\n    async createKubeconfigSecret(kubeconfig = '') {\n      const clusterName = this.value.metadata.name;\n      const secret = await this.$store.dispatch('management/create', {\n        type:     SECRET,\n        metadata: {\n          namespace: 'fleet-default', generateName: 'harvesterconfig', annotations: { [CAPI_ANNOTATIONS.SECRET_AUTH]: clusterName, [CAPI_ANNOTATIONS.SECRET_WILL_DELETE]: 'true' }\n        },\n        data: { credential: base64Encode(kubeconfig) }\n      });\n\n      return secret.save({ url: '/v1/secrets', method: 'POST' });\n    },\n\n    cancel() {\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  this.$store.getters['productId'],\n          resource: CAPI.RANCHER_CLUSTER,\n        },\n      });\n    },\n\n    chartVersionFor(chartName) {\n      const entry = this.chartVersions[chartName];\n\n      if ( !entry ) {\n        return null;\n      }\n\n      const out = this.$store.getters['catalog/version']({\n        repoType:    'cluster',\n        repoName:    entry.repo,\n        chartName,\n        versionName: entry.version,\n      });\n\n      return out;\n    },\n\n    async initAddons() {\n      for ( const v of this.addonVersions ) {\n        if ( this.versionInfo[v.name] ) {\n          continue;\n        }\n\n        const res = await this.$store.dispatch('catalog/getVersionInfo', {\n          repoType:    'cluster',\n          repoName:    v.repoName,\n          chartName:   v.name,\n          versionName: v.version\n        });\n\n        set(this.versionInfo, v.name, res);\n        const key = this.chartVersionKey(v.name);\n\n        if (!this.userChartValues[key]) {\n          this.userChartValues[key] = {};\n        }\n      }\n    },\n\n    labelForAddon(name) {\n      const fallback = `${ camelToTitle(name.replace(/^(rke|rke2|rancher)-/, '')) } Configuration`;\n\n      return this.$store.getters['i18n/withFallback'](`cluster.addonChart.\"${ name }\"`, null, fallback);\n    },\n\n    showAddons() {\n      this.addonsRev++;\n      this.addonNames.forEach((name) => {\n        const chartValues = this.versionInfo[name]?.questions ? this.initYamlEditor(name) : {};\n\n        set(this.userChartValuesTemp, name, chartValues);\n      });\n      this.refreshYamls();\n    },\n\n    refreshYamls() {\n      const keys = Object.keys(this.$refs).filter(x => x.startsWith('yaml'));\n\n      for ( const k of keys ) {\n        const entry = this.$refs[k];\n        const list = isArray(entry) ? entry : [entry];\n\n        for ( const component of list ) {\n          component?.refresh(); // `yaml` ref can be undefined on switching from Basic to Addon tab (Azure --> Amazon --> addon)\n        }\n      }\n    },\n\n    updateValues(name, values) {\n      set(this.userChartValuesTemp, name, values);\n      this.syncChartValues(name);\n    },\n\n    syncChartValues: throttle(function(name) {\n      const fromChart = this.versionInfo[name]?.values;\n      const fromUser = this.userChartValuesTemp[name];\n      const different = diff(fromChart, fromUser);\n\n      this.userChartValues[this.chartVersionKey(name)] = different;\n    }, 250, { leading: true }),\n\n    updateQuestions(name) {\n      this.syncChartValues(name);\n    },\n\n    initQuestions(name) {\n      const defaultChartValue = this.versionInfo[name];\n      const startingChartValue = this.initYamlEditor(name);\n\n      return {\n        ...defaultChartValue,\n        values: startingChartValue,\n      };\n    },\n\n    initYamlEditor(name) {\n      const defaultChartValue = this.versionInfo[name];\n      const key = this.chartVersionKey(name);\n\n      return merge({}, defaultChartValue?.values || {}, this.userChartValues[key] || {});\n    },\n\n    initServerAgentArgs() {\n      for ( const k in this.serverArgs ) {\n        if ( this.serverConfig[k] === undefined ) {\n          const def = this.serverArgs[k].default;\n\n          set(this.serverConfig, k, (def !== undefined ? def : undefined));\n        }\n      }\n\n      for ( const k in this.agentArgs ) {\n        if ( this.agentConfig[k] === undefined ) {\n          const def = this.agentArgs[k].default;\n\n          set(this.agentConfig, k, (def !== undefined ? def : undefined));\n        }\n      }\n\n      if ( !this.serverConfig.profile ) {\n        set(this.serverConfig, 'profile', null);\n      }\n    },\n\n    chartVersionKey(name) {\n      const addonVersion = this.addonVersions.find(av => av.name === name);\n\n      return addonVersion ? `${ name }-${ addonVersion.version }` : name;\n    },\n\n    onMembershipUpdate(update) {\n      this.$set(this, 'membershipUpdate', update);\n    },\n\n    canRemoveKubeletRow(row, idx) {\n      return idx !== 0;\n    },\n\n    async initRegistry() {\n      let registryMode = PUBLIC;\n      let registryHost = this.agentConfig?.['system-default-registry'] || '';\n      let registrySecret = null;\n      let regs = this.rkeConfig.registries;\n\n      this.systemRegistry = (await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.SYSTEM_DEFAULT_REGISTRY })).value || '';\n\n      if ( !regs ) {\n        regs = {};\n        set(this.rkeConfig, 'registries', regs);\n      }\n\n      if ( !regs.configs ) {\n        set(regs, 'configs', {});\n      }\n\n      if ( !regs.mirrors ) {\n        set(regs, 'mirrors', {});\n      }\n\n      if ( registryHost ) {\n        registryMode = PRIVATE;\n      } else if ( this.systemRegistry ) {\n        registryHost = this.systemRegistry;\n        registryMode = PRIVATE;\n      }\n\n      if ( Object.keys(regs.mirrors || {}).length || Object.keys(regs.configs || {}).length > 1 ) {\n        registryMode = ADVANCED;\n      } else {\n        const hostname = Object.keys(regs.configs)[0];\n        const config = regs.configs[hostname];\n\n        if ( config ) {\n          if ( hostname !== registryHost || config.caBundle || config.insecureSkipVerify || config.tlsSecretName ) {\n            registryMode = ADVANCED;\n          } else {\n            registryMode = PRIVATE;\n            registrySecret = config.authConfigSecretName;\n          }\n        }\n      }\n\n      this.registryHost = registryHost;\n      this.registryMode = registryMode;\n      this.registrySecret = registrySecret;\n    },\n\n    setRegistryConfig() {\n      const hostname = (this.registryHost || '').trim();\n\n      if ( this.registryMode === PUBLIC ) {\n        if ( this.systemRegistry ) {\n          // Empty string overrides the system default to nothing\n          set(this.agentConfig, 'system-default-registry', '');\n        } else {\n          // No need to set anything\n          set(this.agentConfig, 'system-default-registry', undefined);\n        }\n      } else if ( !hostname || hostname === this.systemRegistry ) {\n        // Undefined removes the key which uses the global setting without hardcoding it into the config\n        set(this.agentConfig, 'system-default-registry', undefined);\n      } else {\n        set(this.agentConfig, 'system-default-registry', hostname);\n      }\n\n      if ( this.registryMode === ADVANCED ) {\n        // Leave it alone...\n      } else if ( this.registryMode === PRIVATE ) {\n        set(this.rkeConfig.registries, 'mirrors', {});\n\n        if ( this.registrySecret ) {\n          set(this.rkeConfig.registries, 'configs', {\n            [hostname]: {\n              authConfigSecretName: this.registrySecret,\n              caBundle:             null,\n              insecureSkipVerify:   false,\n              tlsSecretName:        null,\n            }\n          });\n        } else {\n          set(this.rkeConfig.registries, 'configs', {});\n        }\n      } else {\n        set(this.rkeConfig.registries, 'configs', {});\n        set(this.rkeConfig.registries, 'mirrors', {});\n      }\n    },\n\n    getAllOptionsAfterMinVersion(versions, minVersion, defaultVersion) {\n      const out = (versions || []).filter(obj => !!obj.serverArgs).map((obj) => {\n        let disabled = false;\n        let experimental = false;\n\n        if ( minVersion ) {\n          disabled = compare(obj.id, minVersion) < 0;\n        }\n\n        if ( defaultVersion ) {\n          experimental = compare(defaultVersion, obj.id) < 0;\n        }\n\n        return {\n          label:      obj.id + (experimental ? ` (${ this.t('cluster.kubernetesVersion.experimental') })` : ''),\n          value:      obj.id,\n          sort:       sortable(obj.id),\n          serverArgs: obj.serverArgs,\n          agentArgs:  obj.agentArgs,\n          charts:     obj.charts,\n          disabled,\n        };\n      });\n      const sorted = sortBy(out, 'sort:desc');\n\n      const mostRecentPatchVersions = this.getMostRecentPatchVersions(sorted);\n\n      const sortedWithDeprecatedLabel = sorted.map((optionData) => {\n        const majorMinor = `${ semver.major(optionData.value) }.${ semver.minor(optionData.value) }`;\n\n        if (mostRecentPatchVersions[majorMinor] === optionData.value) {\n          return optionData;\n        }\n\n        return {\n          ...optionData,\n          label: `${ optionData.label } (${ this.t('cluster.kubernetesVersion.deprecated') })`\n        };\n      });\n\n      return sortedWithDeprecatedLabel;\n    },\n\n    getMostRecentPatchVersions(sortedVersions) {\n      // Get the most recent patch version for each Kubernetes minor version.\n      const versionMap = {};\n\n      sortedVersions.forEach((version) => {\n        const majorMinor = `${ semver.major(version.value) }.${ semver.minor(version.value) }`;\n\n        if (!versionMap[majorMinor]) {\n          // Because we start with a sorted list of versions, we know the\n          // highest patch version is first in the list, so we only keep the\n          // first of each minor version in the list.\n          versionMap[majorMinor] = version.value;\n        }\n      });\n\n      return versionMap;\n    },\n\n    filterOutDeprecatedPatchVersions(allVersions, currentVersion) {\n      // Get the most recent patch version for each Kubernetes minor version.\n      const mostRecentPatchVersions = this.getMostRecentPatchVersions(allVersions);\n\n      const filteredVersions = allVersions.filter((version) => {\n        // Always show pre-releases\n        if (semver.prerelease(version.value)) {\n          return true;\n        }\n\n        const majorMinor = `${ semver.major(version.value) }.${ semver.minor(version.value) }`;\n\n        // Always show current version, else show if we haven't shown anything for this major.minor version yet\n        if (version === currentVersion || mostRecentPatchVersions[majorMinor] === version.value) {\n          return true;\n        }\n\n        return false;\n      });\n\n      return filteredVersions;\n    },\n\n    generateYaml() {\n      const resource = this.value;\n      const inStore = this.$store.getters['currentStore'](resource);\n      const schemas = this.$store.getters[`${ inStore }/all`](SCHEMA);\n      const clonedResource = clone(resource);\n\n      this.applyChartValues(clonedResource.spec.rkeConfig);\n\n      const out = createYaml(schemas, resource.type, clonedResource);\n\n      return out;\n    },\n\n    applyChartValues(rkeConfig) {\n      rkeConfig.chartValues = {};\n      this.addonNames.forEach((name) => {\n        const key = this.chartVersionKey(name);\n        const userValues = this.userChartValues[key];\n\n        if (userValues) {\n          set(rkeConfig.chartValues, name, userValues);\n        }\n      });\n    },\n    get,\n\n    setHarvesterDefaultCloudProvider() {\n      if (this.isHarvesterDriver &&\n        this.mode === _CREATE &&\n        !this.agentConfig['cloud-provider-name'] &&\n        !this.isHarvesterExternalCredential &&\n        !this.isHarvesterIncompatible\n      ) {\n        this.agentConfig['cloud-provider-name'] = HARVESTER;\n      } else {\n        this.agentConfig['cloud-provider-name'] = '';\n      }\n    },\n\n    async setHarvesterVersionRange() {\n      const clusterId = this.credential?.decodedData?.clusterId;\n      const clusterType = this.credential?.decodedData?.clusterType;\n\n      if (clusterId && clusterType === 'imported') {\n        const url = `/k8s/clusters/${ clusterId }/v1`;\n        const res = await this.$store.dispatch('cluster/request', { url: `${ url }/${ HCI.SETTING }s` });\n\n        const version = (res?.data || []).find(s => s.id === 'harvester-csi-ccm-versions');\n\n        if (version) {\n          this.harvesterVersionRange = JSON.parse(version.value || version.default || '{}');\n        } else {\n          this.harvesterVersionRange = {};\n        }\n      }\n      this.setHarvesterDefaultCloudProvider();\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending && !loadedOnce\" />\n  <Banner v-else-if=\"$fetchState.error\" color=\"error\" :label=\"$fetchState.error\" />\n  <CruResource\n    v-else\n    ref=\"cruresource\"\n    :mode=\"mode\"\n    :validation-passed=\"validationPassed() && fvFormIsValid\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :cancel-event=\"true\"\n    :done-route=\"doneRoute\"\n    :apply-hooks=\"applyHooks\"\n    :generate-yaml=\"generateYaml\"\n    class=\"rke2\"\n    component-testid=\"rke2-custom-create\"\n    @done=\"done\"\n    @finish=\"saveOverride\"\n    @cancel=\"cancel\"\n    @error=\"fvUnreportedValidationErrors\"\n  >\n    <Banner\n      v-if=\"isEdit\"\n      color=\"warning\"\n    >\n      <span v-html=\"t('cluster.banner.rke2-k3-reprovisioning', {}, true)\" />\n    </Banner>\n    <SelectCredential\n      v-if=\"needCredential\"\n      v-model=\"credentialId\"\n      :mode=\"mode\"\n      :provider=\"provider\"\n      :cancel=\"cancelCredential\"\n      :showing-form=\"showForm\"\n    />\n\n    <div v-if=\"showForm\" class=\"mt-20\">\n      <NameNsDescription\n        v-if=\"!isView\"\n        v-model=\"value\"\n        :mode=\"mode\"\n        :namespaced=\"false\"\n        name-label=\"cluster.name.label\"\n        name-placeholder=\"cluster.name.placeholder\"\n        description-label=\"cluster.description.label\"\n        description-placeholder=\"cluster.description.placeholder\"\n        :rules=\"{name:fvGetAndReportPathRules('metadata.name')}\"\n      />\n\n      <Banner v-if=\"appsOSWarning\" color=\"error\">\n        {{ appsOSWarning }}\n      </Banner>\n\n      <template v-if=\"hasMachinePools\">\n        <div class=\"clearfix\">\n          <h2 v-t=\"'cluster.tabs.machinePools'\" class=\"pull-left\" />\n          <div v-if=\"!isView\" class=\"pull-right\">\n            <BadgeState\n              v-tooltip=\"nodeTotals.tooltip.etcd\"\n              :color=\"nodeTotals.color.etcd\"\n              :icon=\"nodeTotals.icon.etcd\"\n              :label=\"nodeTotals.label.etcd\"\n              class=\"mr-10\"\n            />\n            <BadgeState\n              v-tooltip=\"nodeTotals.tooltip.controlPlane\"\n              :color=\"nodeTotals.color.controlPlane\"\n              :icon=\"nodeTotals.icon.controlPlane\"\n              :label=\"nodeTotals.label.controlPlane\"\n              class=\"mr-10\"\n            />\n            <BadgeState\n              v-tooltip=\"nodeTotals.tooltip.worker\"\n              :color=\"nodeTotals.color.worker\"\n              :icon=\"nodeTotals.icon.worker\"\n              :label=\"nodeTotals.label.worker\"\n            />\n          </div>\n        </div>\n\n        <Tabbed\n          ref=\"pools\"\n          :side-tabs=\"true\"\n          :show-tabs-add-remove=\"!isView\"\n          @addTab=\"addMachinePool($event)\"\n          @removeTab=\"removeMachinePool($event)\"\n        >\n          <template v-for=\"(obj, idx) in machinePools\">\n            <Tab v-if=\"!obj.remove\" :key=\"obj.id\" :name=\"obj.id\" :label=\"obj.pool.name || '(Not Named)'\" :show-header=\"false\">\n              <MachinePool\n                ref=\"pool\"\n                :value=\"obj\"\n                :cluster=\"value\"\n                :mode=\"mode\"\n                :provider=\"provider\"\n                :credential-id=\"credentialId\"\n                :idx=\"idx\"\n                :machine-pools=\"machinePools\"\n                @error=\"e=>errors = e\"\n              />\n            </Tab>\n          </template>\n          <div v-if=\"!unremovedMachinePools.length\">\n            {{ t('cluster.machinePool.noPoolsDisclaimer') }}\n          </div>\n        </Tabbed>\n        <div class=\"spacer\" />\n      </template>\n\n      <h2 v-t=\"'cluster.tabs.cluster'\" />\n      <Tabbed :side-tabs=\"true\">\n        <Tab name=\"basic\" label-key=\"cluster.tabs.basic\" :weight=\"11\" @active=\"refreshYamls\">\n          <Banner v-if=\"!haveArgInfo\" color=\"warning\" label=\"Configuration information is not available for the selected Kubernetes version.  The options available in this screen will be limited, you may want to use the YAML editor.\" />\n          <Banner v-if=\"showk8s21LegacyWarning\" color=\"warning\" :label=\"t('cluster.legacyWarning')\" />\n          <Banner\n            v-if=\"isHarvesterDriver && isHarvesterIncompatible && showCloudProvider\"\n            color=\"warning\"\n          >\n            <span\n              v-html=\"t('cluster.harvester.warning.cloudProvider.incompatible', null, true)\"\n            />\n          </Banner>\n          <div class=\"row mb-10\">\n            <div class=\"col span-6\">\n              <LabeledSelect\n                v-model=\"value.spec.kubernetesVersion\"\n                :mode=\"mode\"\n                :options=\"versionOptions\"\n                label-key=\"cluster.kubernetesVersion.label\"\n              />\n              <Checkbox\n                v-model=\"showDeprecatedPatchVersions\"\n                :label=\"t('cluster.kubernetesVersion.deprecatedPatches')\"\n                :tooltip=\"t('cluster.kubernetesVersion.deprecatedPatchWarning')\"\n                class=\"patch-version\"\n              />\n            </div>\n            <div v-if=\"showCloudProvider\" class=\"col span-6\">\n              <LabeledSelect\n                v-model=\"agentConfig['cloud-provider-name']\"\n                :mode=\"mode\"\n                :disabled=\"clusterIsAlreadyCreated\"\n                :options=\"cloudProviderOptions\"\n                :label=\"t('cluster.rke2.cloudProvider.label')\"\n              />\n            </div>\n          </div>\n          <div v-if=\"showCni\" :style=\"{'align-items':'center'}\" class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledSelect\n                v-model=\"serverConfig.cni\"\n                :mode=\"mode\"\n                :disabled=\"clusterIsAlreadyCreated\"\n                :options=\"serverArgs.cni.options\"\n                :label=\"t('cluster.rke2.cni.label')\"\n              />\n            </div>\n            <div v-if=\"serverConfig.cni === 'cilium' || serverConfig.cni === 'multus,cilium'\" class=\"col\">\n              <Checkbox v-model=\"ciliumIpv6\" :mode=\"mode\" :label=\"t('cluster.rke2.address.ipv6.enable')\" />\n            </div>\n          </div>\n          <template v-if=\"showVsphereNote\">\n            <Banner color=\"warning\" label-key=\"cluster.cloudProvider.rancher-vsphere.note\" />\n          </template>\n          <template v-else-if=\"showCloudConfigYaml\">\n            <div class=\"spacer\" />\n\n            <div class=\"col span-12\">\n              <h3>\n                {{ t('cluster.rke2.cloudProvider.header') }}\n              </h3>\n              <YamlEditor\n                ref=\"yaml\"\n                v-model=\"agentConfig['cloud-provider-config']\"\n                :editor-mode=\"mode === 'view' ? 'VIEW_CODE' : 'EDIT_CODE'\"\n                initial-yaml-values=\"# Cloud Provider Config\"\n                class=\"yaml-editor\"\n              />\n            </div>\n          </template>\n\n          <div class=\"spacer\" />\n\n          <h3>\n            {{ t('cluster.rke2.security.header') }}\n          </h3>\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledSelect\n                v-if=\"pspOptions\"\n                v-model=\"value.spec.defaultPodSecurityPolicyTemplateName\"\n                :mode=\"mode\"\n                :options=\"pspOptions\"\n                :label=\"t('cluster.rke2.defaultPodSecurityPolicyTemplateName.label')\"\n              />\n            </div>\n            <div v-if=\"showCisProfile\" class=\"col span-6\">\n              <LabeledSelect\n                v-if=\"serverArgs.profile\"\n                v-model=\"serverConfig.profile\"\n                :mode=\"mode\"\n                :options=\"profileOptions\"\n                label=\"Server CIS Profile\"\n              />\n              <LabeledSelect\n                v-else-if=\"agentArgs.profile\"\n                v-model=\"agentConfig.profile\"\n                :mode=\"mode\"\n                :options=\"profileOptions\"\n                label=\"Worker CIS Profile\"\n              />\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col span-12 mt-20\">\n              <Checkbox v-if=\"serverArgs['secrets-encryption']\" v-model=\"serverConfig['secrets-encryption']\" :mode=\"mode\" label=\"Encrypt Secrets\" />\n              <Checkbox v-model=\"value.spec.enableNetworkPolicy\" :mode=\"mode\" :label=\"t('cluster.rke2.enableNetworkPolicy.label')\" />\n              <!-- <Checkbox v-if=\"agentArgs.selinux\" v-model=\"agentConfig.selinux\" :mode=\"mode\" label=\"SELinux\" /> -->\n            </div>\n          </div>\n\n          <div v-if=\"serverConfig.cni === 'cilium' && value.spec.enableNetworkPolicy\" class=\"row\">\n            <div class=\"col span-12\">\n              <Banner color=\"info\" :label=\"t('cluster.rke2.enableNetworkPolicy.warning')\" />\n            </div>\n          </div>\n\n          <div class=\"spacer\" />\n\n          <div v-if=\"serverArgs.disable\" class=\"row\">\n            <div class=\"col span-12\">\n              <div>\n                <h3>\n                  {{ t('cluster.rke2.systemService.header') }}\n                </h3>\n              </div>\n              <Checkbox\n                v-for=\"opt in disableOptions\"\n                :key=\"opt.value\"\n                v-model=\"enabledSystemServices\"\n                :mode=\"mode\"\n                :label=\"opt.label\"\n                :value-when-true=\"opt.value\"\n              />\n            </div>\n          </div>\n        </Tab>\n\n        <Tab v-if=\"canManageMembers\" name=\"memberRoles\" label-key=\"cluster.tabs.memberRoles\" :weight=\"10\">\n          <Banner v-if=\"isEdit\" color=\"info\">\n            {{ t('cluster.memberRoles.removeMessage') }}\n          </Banner>\n          <ClusterMembershipEditor :mode=\"mode\" :parent-id=\"value.mgmt ? value.mgmt.id : null\" @membership-update=\"onMembershipUpdate\" />\n        </Tab>\n\n        <Tab name=\"etcd\" label-key=\"cluster.tabs.etcd\">\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <RadioGroup\n                v-model=\"rkeConfig.etcd.disableSnapshots\"\n                name=\"etcd-disable-snapshots\"\n                :options=\"[true, false]\"\n                :label=\"t('cluster.rke2.etcd.disableSnapshots.label')\"\n                :labels=\"[t('generic.disable'), t('generic.enable')]\"\n                :mode=\"mode\"\n              />\n            </div>\n          </div>\n          <div v-if=\"rkeConfig.etcd.disableSnapshots !== true\" class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"rkeConfig.etcd.snapshotScheduleCron\"\n                type=\"cron\"\n                placeholder=\"0 * * * *\"\n                :mode=\"mode\"\n                :label=\"t('cluster.rke2.etcd.snapshotScheduleCron.label')\"\n              />\n            </div>\n            <div class=\"col span-6\">\n              <UnitInput\n                v-model=\"rkeConfig.etcd.snapshotRetention\"\n                :mode=\"mode\"\n                :label=\"t('cluster.rke2.etcd.snapshotRetention.label')\"\n                :suffix=\"t('cluster.rke2.snapshots.suffix')\"\n              />\n            </div>\n          </div>\n\n          <template v-if=\"rkeConfig.etcd.disableSnapshots !== true\">\n            <div class=\"spacer\" />\n\n            <RadioGroup\n              v-model=\"s3Backup\"\n              name=\"etcd-s3\"\n              :options=\"[false, true]\"\n              label=\"Backup Snapshots to S3\"\n              :labels=\"['Disable','Enable']\"\n              :mode=\"mode\"\n            />\n\n            <S3Config\n              v-if=\"s3Backup\"\n              v-model=\"rkeConfig.etcd.s3\"\n              :namespace=\"value.metadata.namespace\"\n              :register-before-hook=\"registerBeforeHook\"\n              :mode=\"mode\"\n            />\n          </template>\n\n          <div class=\"spacer\" />\n\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <RadioGroup\n                v-if=\"serverArgs['etcd-expose-metrics']\"\n                v-model=\"serverConfig['etcd-expose-metrics']\"\n                name=\"etcd-expose-metrics\"\n                :options=\"[false, true]\"\n                :label=\"t('cluster.rke2.etcd.exportMetric.label')\"\n                :labels=\"[t('cluster.rke2.etcd.exportMetric.false'), t('cluster.rke2.etcd.exportMetric.true')]\"\n                :mode=\"mode\"\n              />\n            </div>\n          </div>\n        </Tab>\n\n        <Tab v-if=\"haveArgInfo\" name=\"networking\" label-key=\"cluster.tabs.networking\">\n          <h3>\n            {{ t('cluster.rke2.address.header') }}\n            <i v-tooltip=\"t('cluster.rke2.address.tooltip')\" class=\"icon icon-info\" />\n          </h3>\n          <Banner v-if=\"showIpv6Warning\" color=\"warning\">\n            {{ t('cluster.rke2.address.ipv6.warning') }}\n          </Banner>\n          <div class=\"row mb-20\">\n            <div v-if=\"serverArgs['cluster-cidr']\" class=\"col span-6\">\n              <LabeledInput\n                v-model=\"serverConfig['cluster-cidr']\"\n                :mode=\"mode\"\n                :disabled=\"clusterIsAlreadyCreated\"\n                :label=\"t('cluster.rke2.address.clusterCidr.label')\"\n              />\n            </div>\n            <div v-if=\"serverArgs['service-cidr']\" class=\"col span-6\">\n              <LabeledInput\n                v-model=\"serverConfig['service-cidr']\"\n                :mode=\"mode\"\n                :disabled=\"clusterIsAlreadyCreated\"\n                :label=\"t('cluster.rke2.address.serviceCidr.label')\"\n              />\n            </div>\n          </div>\n\n          <div class=\"row mb-20\">\n            <div v-if=\"serverArgs['cluster-dns']\" class=\"col span-6\">\n              <LabeledInput\n                v-model=\"serverConfig['cluster-dns']\"\n                :mode=\"mode\"\n                :disabled=\"clusterIsAlreadyCreated\"\n                :label=\"t('cluster.rke2.address.dns.label')\"\n              />\n            </div>\n            <div v-if=\"serverArgs['cluster-domain']\" class=\"col span-6\">\n              <LabeledInput\n                v-model=\"serverConfig['cluster-domain']\"\n                :mode=\"mode\"\n                :disabled=\"clusterIsAlreadyCreated\"\n                :label=\"t('cluster.rke2.address.domain.label')\"\n              />\n            </div>\n          </div>\n\n          <div v-if=\"serverArgs['service-node-port-range']\" class=\"row mb-20\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"serverConfig['service-node-port-range']\"\n                :mode=\"mode\"\n                :label=\"t('cluster.rke2.address.nodePortRange.label')\"\n              />\n            </div>\n          </div>\n\n          <div v-if=\"serverArgs['tls-san']\" class=\"row mb-20\">\n            <div class=\"col span-6\">\n              <ArrayList\n                v-model=\"serverConfig['tls-san']\"\n                :protip=\"false\"\n                :mode=\"mode\"\n                :title=\"t('cluster.rke2.address.tlsSan.label')\"\n              />\n            </div>\n          </div>\n\n          <ACE v-model=\"value\" :mode=\"mode\" />\n        </Tab>\n\n        <Tab name=\"upgrade\" label-key=\"cluster.tabs.upgrade\">\n          <Banner v-if=\"get(rkeConfig, 'upgradeStrategy.controlPlaneDrainOptions.deleteEmptyDirData')\" color=\"warning\">\n            {{ t('cluster.rke2.deleteEmptyDir', {}, true) }}\n          </Banner>\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <h3>Control Plane</h3>\n              <LabeledInput\n                v-model=\"rkeConfig.upgradeStrategy.controlPlaneConcurrency\"\n                :mode=\"mode\"\n                :label=\"t('cluster.rke2.controlPlaneConcurrency.label')\"\n                :tooltip=\"t('cluster.rke2.controlPlaneConcurrency.toolTip')\"\n              />\n              <div class=\"spacer\" />\n              <DrainOptions v-model=\"rkeConfig.upgradeStrategy.controlPlaneDrainOptions\" :mode=\"mode\" />\n            </div>\n            <div class=\"col span-6\">\n              <h3>\n                {{ t('cluster.rke2.workNode.label') }}\n              </h3>\n              <LabeledInput\n                v-model=\"rkeConfig.upgradeStrategy.workerConcurrency\"\n                :mode=\"mode\"\n                :label=\"t('cluster.rke2.workerConcurrency.label')\"\n                :tooltip=\"t('cluster.rke2.workerConcurrency.toolTip')\"\n              />\n              <div class=\"spacer\" />\n              <DrainOptions v-model=\"rkeConfig.upgradeStrategy.workerDrainOptions\" :mode=\"mode\" />\n            </div>\n          </div>\n        </Tab>\n\n        <Tab name=\"registry\" label-key=\"cluster.tabs.registry\">\n          <RadioGroup\n            v-model=\"registryMode\"\n            name=\"registry-mode\"\n            :options=\"registryOptions\"\n            :mode=\"mode\"\n          />\n\n          <LabeledInput\n            v-if=\"registryMode !== PUBLIC\"\n            v-model=\"registryHost\"\n            class=\"mt-20\"\n            :mode=\"mode\"\n            :required=\"true\"\n            :label=\"t('cluster.privateRegistry.systemDefaultRegistry.label')\"\n          />\n\n          <SelectOrCreateAuthSecret\n            v-if=\"registryMode === PRIVATE\"\n            v-model=\"registrySecret\"\n            :register-before-hook=\"registerBeforeHook\"\n            :hook-priority=\"1\"\n            :mode=\"mode\"\n            in-store=\"management\"\n            :allow-ssh=\"false\"\n            :allow-rke=\"true\"\n            :vertical=\"true\"\n            :namespace=\"value.metadata.namespace\"\n            generate-name=\"registryconfig-auth-\"\n          />\n          <template v-else-if=\"registryMode === ADVANCED\">\n            <RegistryMirrors\n              v-model=\"value\"\n              class=\"mt-20\"\n              :mode=\"mode\"\n            />\n\n            <RegistryConfigs\n              v-model=\"value\"\n              class=\"mt-20\"\n              :mode=\"mode\"\n              :cluster-register-before-hook=\"registerBeforeHook\"\n            />\n          </template>\n        </Tab>\n\n        <Tab name=\"addons\" label-key=\"cluster.tabs.addons\" @active=\"showAddons\">\n          <Banner\n            v-if=\"isEdit\"\n            color=\"warning\"\n          >\n            {{ t('cluster.addOns.dependencyBanner') }}\n          </Banner>\n          <div v-if=\"versionInfo && addonVersions.length\" :key=\"addonsRev\">\n            <div v-for=\"v in addonVersions\" :key=\"v._key\">\n              <h3>{{ labelForAddon(v.name) }}</h3>\n              <Questions\n                v-if=\"versionInfo[v.name] && versionInfo[v.name].questions && v.name && userChartValuesTemp[v.name]\"\n                v-model=\"userChartValuesTemp[v.name]\"\n                :emit=\"true\"\n                in-store=\"management\"\n                :mode=\"mode\"\n                :tabbed=\"false\"\n                :source=\"versionInfo[v.name]\"\n                :target-namespace=\"value.metadata.namespace\"\n                @updated=\"updateQuestions(v.name)\"\n              />\n              <YamlEditor\n                v-else\n                ref=\"yaml-values\"\n                :value=\"initYamlEditor(v.name)\"\n                :scrolling=\"true\"\n                :as-object=\"true\"\n                :editor-mode=\"mode === 'view' ? 'VIEW_CODE' : 'EDIT_CODE'\"\n                :hide-preview-buttons=\"true\"\n                @input=\"data => updateValues(v.name, data)\"\n              />\n              <div class=\"spacer\" />\n            </div>\n          </div>\n\n          <div>\n            <h3>\n              {{ t('cluster.addOns.additionalManifest.title') }}\n              <i\n                v-tooltip=\"t('cluster.addOns.additionalManifest.tooltip')\"\n                class=\"icon icon-info\"\n              />\n            </h3>\n            <YamlEditor\n              ref=\"yaml-additional\"\n              v-model=\"rkeConfig.additionalManifest\"\n              :editor-mode=\"mode === 'view' ? 'VIEW_CODE' : 'EDIT_CODE'\"\n              initial-yaml-values=\"# Additional Manifest YAML\"\n              class=\"yaml-editor\"\n            />\n          </div>\n        </Tab>\n\n        <Tab\n          v-if=\"haveArgInfo || agentArgs['protect-kernel-defaults']\"\n          name=\"advanced\"\n          label-key=\"cluster.tabs.advanced\"\n          :weight=\"-1\"\n          @active=\"refreshYamls\"\n        >\n          <template v-if=\"haveArgInfo\">\n            <h3>{{ t('cluster.advanced.argInfo.title') }}</h3>\n            <ArrayListGrouped\n              v-if=\"agentArgs['kubelet-arg']\"\n              v-model=\"rkeConfig.machineSelectorConfig\"\n              class=\"mb-20\"\n              :add-label=\"t('cluster.advanced.argInfo.machineSelector.label')\"\n              :can-remove=\"canRemoveKubeletRow\"\n              :default-add-value=\"{machineLabelSelector: { matchExpressions: [], matchLabels: {} }, config: {'kubelet-arg': []}}\"\n            >\n              <template #default=\"{row}\">\n                <template v-if=\"row.value.machineLabelSelector\">\n                  <h3>{{ t('cluster.advanced.argInfo.machineSelector.title') }}</h3>\n                  <MatchExpressions\n                    v-model=\"row.value.machineLabelSelector\"\n                    class=\"mb-20\"\n                    :mode=\"mode\"\n                    :show-remove=\"false\"\n                    :initial-empty-row=\"true\"\n                  />\n                  <h3>{{ t('cluster.advanced.argInfo.machineSelector.subTitle') }}</h3>\n                </template>\n                <h3 v-else>\n                  {{ advancedTitleAlt }}\n                </h3>\n\n                <ArrayList\n                  v-model=\"row.value.config['kubelet-arg']\"\n                  :mode=\"mode\"\n                  :add-label=\"t('cluster.advanced.argInfo.machineSelector.listLabel')\"\n                  :initial-empty-row=\"!!row.value.machineLabelSelector\"\n                />\n              </template>\n            </ArrayListGrouped>\n            <Banner\n              v-if=\"rkeConfig.machineSelectorConfig.length > 1\"\n              color=\"info\"\n              :label=\"t('cluster.advanced.argInfo.machineSelector.bannerLabel')\"\n            />\n\n            <ArrayList\n              v-if=\"serverArgs['kube-controller-manager-arg']\"\n              v-model=\"serverConfig['kube-controller-manager-arg']\"\n              :mode=\"mode\"\n              :title=\"t('cluster.advanced.argInfo.machineSelector.kubeControllerManagerTitle')\"\n              class=\"mb-20\"\n            />\n            <ArrayList\n              v-if=\"serverArgs['kube-apiserver-arg']\"\n              v-model=\"serverConfig['kube-apiserver-arg']\"\n              :mode=\"mode\"\n              :title=\"t('cluster.advanced.argInfo.machineSelector.kubeApiServerTitle')\"\n              class=\"mb-20\"\n            />\n            <ArrayList\n              v-if=\"serverArgs['kube-scheduler-arg']\"\n              v-model=\"serverConfig['kube-scheduler-arg']\"\n              :mode=\"mode\"\n              :title=\"t('cluster.advanced.argInfo.machineSelector.kubeSchedulerTitle')\"\n            />\n          </template>\n          <template v-if=\"agentArgs['protect-kernel-defaults']\">\n            <div class=\"spacer\" />\n\n            <div class=\"row\">\n              <div class=\"col span-12\">\n                <Checkbox\n                  v-model=\"agentConfig['protect-kernel-defaults']\"\n                  :mode=\"mode\"\n                  :label=\"t('cluster.advanced.agentArgs.label')\"\n                />\n              </div>\n            </div>\n          </template>\n        </Tab>\n\n        <AgentEnv v-model=\"value\" :mode=\"mode\" />\n        <Labels v-model=\"value\" :mode=\"mode\" />\n      </Tabbed>\n    </div>\n\n    <Banner\n      v-if=\"unsupportedSelectorConfig\"\n      color=\"warning\"\n      :label=\"t('cluster.banner.warning')\"\n    />\n\n    <template v-if=\"needCredential && !credentialId\" #form-footer>\n      <div><!-- Hide the outer footer --></div>\n    </template>\n  </CruResource>\n</template>\n\n<style lang=\"scss\" scoped>\n  .patch-version {\n    margin-top: 5px;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./rke2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./rke2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rke2.vue?vue&type=template&id=ce1d46be&scoped=true&\"\nimport script from \"./rke2.vue?vue&type=script&lang=js&\"\nexport * from \"./rke2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rke2.vue?vue&type=style&index=0&id=ce1d46be&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ce1d46be\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport Loading from '@shell/components/Loading';\nimport CruResource from '@shell/components/CruResource';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport EmberPage from '@shell/components/EmberPage';\nimport { ToggleSwitch } from '@components/Form/ToggleSwitch';\nimport {\n  CHART, FROM_CLUSTER, SUB_TYPE, _EDIT, _IMPORT, _CONFIG, _VIEW\n} from '@shell/config/query-params';\nimport { mapGetters } from 'vuex';\nimport { sortBy } from '@shell/utils/sort';\nimport { set } from '@shell/utils/object';\nimport { mapPref, PROVISIONER, _RKE1, _RKE2 } from '@shell/store/prefs';\nimport { filterAndArrangeCharts } from '@shell/store/catalog';\nimport { CATALOG } from '@shell/config/labels-annotations';\nimport { CAPI, MANAGEMENT, DEFAULT_WORKSPACE } from '@shell/config/types';\nimport { mapFeature, RKE2 as RKE2_FEATURE } from '@shell/store/features';\nimport { allHash } from '@shell/utils/promise';\nimport { BLANK_CLUSTER } from '@shell/store';\nimport Import from '@shell/edit/provisioning.cattle.io.cluster/import';\nimport { ELEMENTAL_PRODUCT_NAME, ELEMENTAL_CLUSTER_PROVIDER } from '../../config/elemental-types';\nimport Rke2Config from './rke2';\n\nconst SORT_GROUPS = {\n  template:  1,\n  kontainer: 2,\n  rke1:      3,\n  rke2:      3,\n  register:  4,\n  custom:    5,\n  custom1:   5,\n  custom2:   5,\n};\n\n// uSed to proxy stylesheets for custom drviers that provide custom UI (RKE1)\nconst PROXY_ENDPOINT = '/meta/proxy';\n\nexport default {\n  name: 'CruCluster',\n\n  components: {\n    CruResource,\n    EmberPage,\n    Import,\n    Loading,\n    Rke2Config,\n    SelectIconGrid,\n    ToggleSwitch\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    realMode: {\n      type:     String,\n      required: true,\n    },\n\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:    Object,\n      default: null,\n    }\n  },\n\n  async fetch() {\n    const hash = {\n      // These aren't explicitly used, but need to be listening for change events\n      mgmtClusters:     this.$store.dispatch('management/findAll', { type: MANAGEMENT.CLUSTER }),\n      provClusters:     this.$store.dispatch('management/findAll', { type: CAPI.RANCHER_CLUSTER }),\n\n      catalog: this.$store.dispatch('catalog/load'),\n    };\n\n    if (this.$store.getters[`management/canList`](MANAGEMENT.NODE_DRIVER)) {\n      hash.nodeDrivers = this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_DRIVER });\n    }\n\n    if (this.$store.getters[`management/canList`](MANAGEMENT.KONTAINER_DRIVER)) {\n      hash.kontainerDrivers = this.$store.dispatch('management/findAll', { type: MANAGEMENT.KONTAINER_DRIVER });\n    }\n\n    if ( this.value.id && !this.value.isRke2 ) {\n      // These are needed to resolve references in the mgmt cluster -> node pool -> node template to figure out what provider the cluster is using\n      // so that the edit iframe for ember pages can go to the right place.\n      if (this.$store.getters[`management/canList`](MANAGEMENT.NODE_POOL)) {\n        hash.rke1NodePools = this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_POOL });\n      }\n\n      if (this.$store.getters[`management/canList`](MANAGEMENT.NODE_TEMPLATE)) {\n        hash.rke1NodeTemplates = this.$store.dispatch('management/findAll', { type: MANAGEMENT.NODE_TEMPLATE });\n      }\n    }\n\n    const res = await allHash(hash);\n\n    this.nodeDrivers = res.nodeDrivers || [];\n    this.kontainerDrivers = res.kontainerDrivers || [];\n\n    if ( !this.value.spec ) {\n      set(this.value, 'spec', {});\n    }\n\n    if ( !this.value.id ) {\n      if ( !this.value.metadata ) {\n        set(this.value, 'metadata', {});\n      }\n\n      set(this.value.metadata, 'namespace', DEFAULT_WORKSPACE);\n    }\n\n    // For the node drivers, look for custom UI that we can use to show an icon (if not built-in)\n    this.nodeDrivers.forEach((driver) => {\n      if (!driver.spec?.builtin && driver.spec?.uiUrl && driver.spec?.active) {\n        const name = driver.spec?.displayName || driver.id;\n        let cssUrl = driver.spec.uiUrl.replace(/\\.js$/, '.css');\n\n        if (cssUrl.startsWith('http://') || cssUrl.startsWith('https://')) {\n          cssUrl = `${ PROXY_ENDPOINT }/${ cssUrl }`;\n        }\n\n        this.loadStylesheet(cssUrl, `driver-ui-css-${ driver.id }`);\n\n        this.iconClasses[name] = `machine-driver ${ name }`;\n      }\n    });\n  },\n\n  data() {\n    const subType = this.$route.query[SUB_TYPE] || null;\n    const chart = this.$route.query[CHART] || null;\n    const isImport = this.realMode === _IMPORT;\n\n    return {\n      nodeDrivers:      [],\n      kontainerDrivers: [],\n      subType,\n      chart,\n      isImport,\n      providerCluster:  null,\n      iconClasses:      {},\n    };\n  },\n\n  computed: {\n    ...mapGetters({ allCharts: 'catalog/charts' }),\n    ...mapGetters('type-map', ['activeProducts']),\n    preferredProvisioner: mapPref(PROVISIONER),\n    _RKE1:                () => _RKE1,\n    _RKE2:                () => _RKE2,\n\n    emberLink() {\n      if (this.value) {\n        // For custom RKE2 clusters, don't load an Ember page.\n        // It should be the dashboard.\n        if ( this.value.isRke2 && ((this.value.isCustom && this.mode === _EDIT) || (this.value.isCustom && this.as === _CONFIG && this.mode === _VIEW) || (this.subType || '').toLowerCase() === 'custom')) {\n          // For admins, this.value.isCustom is used to check if it is a custom cluster.\n          // For cluster owners, this.subtype is used.\n          this.selectType('custom', false);\n\n          return '';\n        }\n        // For RKE2/K3s clusters provisioned in Rancher with node pools,\n        // do not use an iFramed Ember page.\n        if ( this.value.isRke2 && this.value.machineProvider ) {\n          // Edit existing RKE2\n          this.selectType(this.value.machineProvider, false);\n\n          return '';\n        }\n        if ( this.subType ) {\n          // For RKE1 and hosted Kubernetes Clusters, set the ember link\n          // so that we load the page rather than using RKE2 create\n          const selected = this.subTypes.find(s => s.id === this.subType);\n\n          if (selected?.link) {\n            return selected.link;\n          }\n\n          this.selectType(this.subType, false);\n\n          return '';\n        }\n\n        if ( this.value.mgmt?.emberEditPath ) {\n          // Iframe an old page\n          return this.value.mgmt.emberEditPath;\n        }\n      }\n\n      return '';\n    },\n\n    rke2Enabled: mapFeature(RKE2_FEATURE),\n\n    showRkeToggle() {\n      return this.rke2Enabled && !this.isImport;\n    },\n\n    provisioner: {\n      get() {\n        // This can incorrectly return rke1 instead\n        // of rke2 for cluster owners.\n        if ( !this.rke2Enabled ) {\n          return _RKE1;\n        }\n\n        return this.preferredProvisioner;\n      },\n\n      set(neu) {\n        this.preferredProvisioner = neu;\n      },\n    },\n\n    isRke1() {\n      return this.provisioner === _RKE1;\n    },\n\n    isRke2() {\n      return this.value.isRke2;\n    },\n\n    templateOptions() {\n      if ( !this.rke2Enabled ) {\n        return [];\n      }\n\n      const out = filterAndArrangeCharts(this.allCharts, { showTypes: CATALOG._CLUSTER_TPL });\n\n      return out;\n    },\n\n    subTypes() {\n      const getters = this.$store.getters;\n      const isImport = this.isImport;\n      const isElementalActive = !!this.activeProducts.find(item => item.name === ELEMENTAL_PRODUCT_NAME);\n\n      const out = [];\n\n      const templates = this.templateOptions;\n      const vueKontainerTypes = getters['plugins/clusterDrivers'];\n      const machineTypes = this.nodeDrivers.filter(x => x.spec.active && x.state === 'active').map(x => x.spec.displayName || x.id);\n\n      this.kontainerDrivers.filter(x => (isImport ? x.showImport : x.showCreate)).forEach((obj) => {\n        if ( vueKontainerTypes.includes(obj.driverName) ) {\n          addType(obj.driverName, 'kontainer', false);\n        } else {\n          addType(obj.driverName, 'kontainer', false, (isImport ? obj.emberImportPath : obj.emberCreatePath));\n        }\n      });\n\n      if ( isImport ) {\n        addType('import', 'custom', false);\n      } else {\n        templates.forEach((chart) => {\n          out.push({\n            id:          `chart:${ chart.id }`,\n            label:       chart.chartNameDisplay,\n            description: chart.chartDescription,\n            icon:        chart.icon || require('~shell/assets/images/generic-catalog.svg'),\n            group:       'template',\n            tag:         getters['i18n/t']('generic.techPreview')\n          });\n        });\n\n        if (this.isRke1 ) {\n          machineTypes.forEach((id) => {\n            addType(id, 'rke1', false, `/g/clusters/add/launch/${ id }`, this.iconClasses[id]);\n          });\n\n          addType('custom', 'custom1', false, '/g/clusters/add/launch/custom');\n        } else {\n          machineTypes.forEach((id) => {\n            addType(id, 'rke2', false);\n          });\n\n          addType('custom', 'custom2', false);\n\n          if (isElementalActive) {\n            addType(ELEMENTAL_CLUSTER_PROVIDER, 'custom2', false);\n          }\n        }\n      }\n\n      return out;\n\n      function addType(id, group, disabled = false, link = null, iconClass = undefined) {\n        const label = getters['i18n/withFallback'](`cluster.provider.\"${ id }\"`, null, id);\n        const description = getters['i18n/withFallback'](`cluster.providerDescription.\"${ id }\"`, null, '');\n        const tag = '';\n\n        let icon;\n\n        try {\n          icon = require(`~shell/assets/images/providers/${ id }.svg`);\n        } catch (e) {}\n\n        if (icon) {\n          iconClass = undefined;\n        } else if (!iconClass) {\n          icon = require('~shell/assets/images/generic-driver.svg');\n        }\n\n        const subtype = {\n          id,\n          label,\n          description,\n          icon,\n          iconClass,\n          group,\n          disabled,\n          link,\n          tag\n        };\n\n        out.push(subtype);\n      }\n    },\n\n    groupedSubTypes() {\n      const out = {};\n\n      for ( const row of this.subTypes ) {\n        const name = row.group;\n        let entry = out[name];\n\n        if ( !entry ) {\n          entry = {\n            name,\n            label: this.$store.getters['i18n/withFallback'](`cluster.providerGroup.\"${ this.isImport ? 'register-' : 'create-' }${ name }\"`, null, name),\n            types: [],\n            sort:  SORT_GROUPS[name],\n          };\n\n          out[name] = entry;\n        }\n\n        entry.types.push(row);\n      }\n\n      for ( const k in out ) {\n        out[k].types = sortBy(out[k].types, 'label');\n      }\n\n      return sortBy(Object.values(out), 'sort');\n    },\n  },\n\n  methods: {\n    loadStylesheet(url, id) {\n      if ( !id ) {\n        console.error('loadStylesheet called without an id'); // eslint-disable-line no-console\n\n        return;\n      }\n\n      // Check if the stylesheet has already been loaded\n      if ( $(`#${id}`).length > 0 ) { // eslint-disable-line\n        return;\n      }\n\n      const link = document.createElement('link');\n\n      link.onerror = () => {\n        link.remove();\n      };\n      link.rel = 'stylesheet';\n      link.src = url;\n      link.href = url;\n      link.id = id;\n      document.getElementsByTagName('HEAD')[0].appendChild(link);\n    },\n\n    cancel() {\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster:  this.$route.params.cluster,\n          product:  this.$store.getters['productId'],\n          resource: CAPI.RANCHER_CLUSTER,\n        },\n      });\n    },\n\n    colorFor(obj) {\n      return `color${ SORT_GROUPS[obj.group] || 1 }`;\n    },\n\n    clickedType(obj) {\n      const id = obj.id;\n      const parts = id.split(':', 2);\n\n      if ( parts[0] === 'chart' ) {\n        const chart = this.$store.getters['catalog/chart']({ key: parts[1] });\n        let localCluster;\n\n        if (this.$store.getters[`management/canList`](MANAGEMENT.CLUSTER)) {\n          localCluster = this.$store.getters['management/all'](MANAGEMENT.CLUSTER).find(x => x.isLocal);\n        }\n\n        chart.goToInstall(FROM_CLUSTER, localCluster?.id || BLANK_CLUSTER, true);\n\n        return;\n      }\n\n      this.$router.applyQuery({ [SUB_TYPE]: id });\n      this.selectType(id);\n    },\n\n    selectType(type, fetch = true) {\n      const parts = type.split(':', 2);\n\n      if ( parts[0] === 'chart' ) {\n        this.subType = 'chart';\n        this.$emit('set-subtype', this.$store.getters['i18n/withFallback'](`cluster.provider.chart`));\n      } else {\n        this.subType = type;\n        this.$emit('set-subtype', this.$store.getters['i18n/withFallback'](`cluster.provider.\"${ type }\"`, null, type));\n      }\n\n      if ( fetch ) {\n        this.$fetch();\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div\n    v-else-if=\"emberLink\"\n    class=\"embed\"\n  >\n    <EmberPage\n      :force-new=\"true\"\n      :src=\"emberLink\"\n    />\n  </div>\n  <CruResource\n    v-else\n    :mode=\"mode\"\n    :validation-passed=\"true\"\n    :selected-subtype=\"subType\"\n    :resource=\"value\"\n    :errors=\"errors\"\n    :subtypes=\"subTypes\"\n    :cancel-event=\"true\"\n    class=\"create-cluster\"\n    @finish=\"save\"\n    @cancel=\"cancel\"\n    @select-type=\"selectType\"\n    @error=\"e=>errors = e\"\n  >\n    <template #subtypes>\n      <div\n        v-for=\"(obj, i) in groupedSubTypes\"\n        :key=\"obj.id\"\n        class=\"mb-20\"\n        style=\"width: 100%;\"\n      >\n        <h4>\n          <div\n            v-if=\"showRkeToggle && [_RKE1,_RKE2].includes(obj.name)\"\n            class=\"grouped-type\"\n          >\n            <ToggleSwitch\n              v-model=\"provisioner\"\n              data-testid=\"cluster-manager-create-rke-switch\"\n              class=\"rke-switch\"\n              off-value=\"rke1\"\n              :off-label=\"t('cluster.toggle.v1')\"\n              on-value=\"rke2\"\n              :on-label=\"t('cluster.toggle.v2')\"\n            />\n          </div>\n          {{ obj.label }}\n        </h4>\n        <SelectIconGrid\n          :rows=\"obj.types\"\n          key-field=\"id\"\n          name-field=\"label\"\n          side-label-field=\"tag\"\n          :color-for=\"colorFor\"\n          :component-testid=\"'cluster-manager-create-grid-' + i\"\n          @clicked=\"clickedType\"\n        />\n      </div>\n    </template>\n\n    <Import\n      v-if=\"isImport\"\n      v-model=\"value\"\n      :mode=\"mode\"\n      :provider=\"subType\"\n    />\n    <Rke2Config\n      v-else-if=\"subType\"\n      v-model=\"value\"\n      :initial-value=\"initialValue\"\n      :live-value=\"liveValue\"\n      :mode=\"mode\"\n      :provider=\"subType\"\n    />\n\n    <template\n      v-if=\"subType\"\n      #form-footer\n    >\n      <div><!-- Hide the outer footer --></div>\n    </template>\n  </CruResource>\n</template>\n\n<style lang='scss'>\n  .grouped-type {\n    position: relative;\n  }\n\n  .rke-switch {\n    margin-top: -10px;\n    position: absolute;\n    right: 0;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--2-0!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=526eb57c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=526eb57c&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}
(("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_0"]=("undefined"!==typeof self?self:this)["webpackJsonpelemental_1_0_0"]||[]).push([[5],{"0461":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("h2",{directives:[{name:"t",rawName:"v-t",value:"elemental.clusterGroup.selector.label",expression:"'elemental.clusterGroup.selector.label'"}],staticClass:"mt-20 mb-20"}),s("MatchExpressions",{attrs:{mode:e.mode,value:e.expressions,"show-remove":!1,"keys-select-options":e.machineInventorySelectorKeyOptions},on:{input:function(t){return e.matchChanged(t)}}}),e.matchingMachineInventories?s("Banner",{attrs:{color:e.matchingMachineInventories.isNone||e.matchingMachineInventories.isAll?"warning":"success"}},[e.matchingMachineInventories.isAll?s("span",{domProps:{innerHTML:e._s(e.t("elemental.clusterGroup.selector.matchesAll",e.matchingMachineInventories))}}):e.matchingMachineInventories.isNone?s("span",{domProps:{innerHTML:e._s(e.t("elemental.clusterGroup.selector.matchesNone",e.matchingMachineInventories))}}):s("span",{domProps:{innerHTML:e._s(e.t("elemental.clusterGroup.selector.matchesSome",e.matchingMachineInventories))}})]):e._e()],1)},n=[],l=s("711b"),c=s("305c"),i=s("6418"),o=s("e24b"),r=s("2879"),h=s("05ca"),p=s.n(h),u=s("c41f"),m={components:{MatchExpressions:l["a"],Banner:i["a"]},mixins:[c["a"]],async fetch(){this.machineInventories=await this.$store.dispatch("management/findAll",{type:u["c"].MACHINE_INVENTORIES}),this.machineInventorySelectorKeyOptions=this.getUniqueLabels(this.machineInventories).map(e=>({label:e,value:e})),this.updateMatchingMachineInventories()},data(){var e,t,s;null!==(e=this.value.spec)&&void 0!==e&&null!==(t=e.template)&&void 0!==t&&null!==(s=t.spec)&&void 0!==s&&s.selector||(this.value.spec.template.spec=this.value.spec.template.spec||{},this.value.spec.template.spec.selector={matchExpressions:[],matchLabels:{}});const a=this.$store.getters["elemental/createClusterElements"];var n,l,c,i;a.length&&(this.value.spec.template.spec.selector.matchExpressions.push({key:"create-cluster-selector",operator:"In",values:[a[0].metadata.labels["create-cluster-selector"]]}),null!==(n=this.value.spec)&&void 0!==n&&null!==(l=n.template)&&void 0!==l&&null!==(c=l.spec)&&void 0!==c&&null!==(i=c.selector)&&void 0!==i&&i.matchLabels||(this.value.spec.template.spec.selector.matchLabels={}),this.value.spec.template.spec.selector.matchLabels["create-cluster-selector"]=a[0].metadata.labels["create-cluster-selector"],this.$store.dispatch("elemental/updateCreateClusterElements",[]));const o=Object(r["a"])(this.value.spec.template.spec.selector.matchLabels||{},this.value.spec.template.spec.selector.matchExpressions||[]);return{machineInventories:null,matchingMachineInventories:null,machineInventorySelectorKeyOptions:null,expressions:o}},methods:{set:o["j"],getUniqueLabels(e){const t=[];return e.forEach(e=>{var s,a;if(null!==(s=e.metadata)&&void 0!==s&&s.labels&&Object.keys(null===(a=e.metadata)||void 0===a?void 0:a.labels).length){var n;const s=Object.keys(null===(n=e.metadata)||void 0===n?void 0:n.labels);s.forEach(e=>{t.includes(e)||t.push(e)})}}),t},matchChanged(e){const{matchLabels:t,matchExpressions:s}=Object(r["d"])(e);Object(o["j"])(this,"expressions",e),Object(o["j"])(this,"value.spec.template.spec.selector.matchLabels",t),Object(o["j"])(this,"value.spec.template.spec.selector.matchExpressions",s),this.updateMatchingMachineInventories()},updateMatchingMachineInventories:p()((function(){var e;const t=this.machineInventories,s=Object(r["c"])(t,this.expressions),a=s.length||0,n=null===(e=s[0])||void 0===e?void 0:e.nameDisplay;this.matchingMachineInventories={matched:a,total:t.length,isAll:a===t.length,isNone:0===a,sample:n},this.$emit("updateMachineCount",a)}),250,{leading:!0})}},v=m,d=s("d802"),b=Object(d["a"])(v,a,n,!1,null,null,null);t["default"]=b.exports},"305c":function(e,t,s){"use strict";var a=s("da25"),n=s("cd6d");t["a"]={...n["a"],props:{mode:{type:String,default:a["o"]},realMode:{type:String,default:a["o"]},as:{type:String,default:a["v"]},value:{type:Object,required:!0},initialValue:{type:Object,default:null},liveValue:{type:Object,default:null},doneEvent:{type:Boolean,default:!1}}}}}]);
//# sourceMappingURL=elemental-1.0.0.umd.min.machine-config.js.map
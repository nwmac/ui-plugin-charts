{"version":3,"sources":["webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?a380","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/utils/selector.js","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?3478","webpack://elemental-1.0.0/../../node_modules/@rancher/shell/components/form/Select.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?fabc","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?1d70","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?7c56","webpack://elemental-1.0.0/../../node_modules/@rancher/shell/components/form/MatchExpressions.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?4524","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?8b98","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?b92a","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/MatchExpressions.vue?9a04","webpack://elemental-1.0.0//home/runner/work/elemental-ui/elemental-ui/node_modules/@rancher/shell/components/form/Select.vue?d28b"],"names":["content","__esModule","default","module","i","locals","exports","add","parseCache","OP_MAP","parse","labelSelector","replace","match","out","parens","length","str","val","split","push","parts","filter","x","rule","trim","key","operator","toLowerCase","values","startsWith","substr","convert","matchLabelsObj","matchExpressions","keys","Object","value","existing","findBy","addObject","simplify","matchExpressionsInput","matchLabels","impossible","seen","expr","includes","assign","matches","obj","selector","rules","isArray","labels","metadata","asInt","parseInt","exists","isNaN","Math","min","apply","max","matching","ary","render","_obj","_vm","this","_h","$createElement","_c","_self","ref","staticClass","class","disabled","isView","focused","mode","status","taggable","$attrs","multiple","on","focusSearch","_g","_b","attrs","appendToBody","positionDropdown","opt","getOptionKey","getOptionLabel","optionLabel","options","closeOnSelect","mappedKeys","placeholder","reduce","isSearchable","selectable","onBlur","onFocus","resizeHandler","e","$emit","scopedSlots","_u","fn","option","onClickOption","_v","_s","label","_l","_","slot","scope","_t","$listeners","tooltip","hoverTooltip","_e","validationMessage","staticRenderFns","components","LabeledTooltip","mixins","props","type","getKeyForOption","optionKey","placement","popperOverride","methods","width","calculatePosition","focus","el","get","report","alert","computed","requiredField","ruleMessages","___CSS_LOADER_API_IMPORT___","showRemove","$event","t","row","index","id","hasKeySelectOptions","keysSelectOptions","model","callback","$$v","$set","expression","directives","name","rawName","domProps","target","composing","update","ops","style","padding","removeRule","addRule","Select","LabeledSelect","initialEmptyRow","data","newRule","custom","node","pod","removeObject","matchExpression","component"],"mappings":"gLAGA,IAAIA,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,kBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,QAE5C,IAAIE,EAAM,EAAQ,QAAwDL,QAC7DK,EAAI,WAAYP,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,kCCT5E,wJAEA,MAAMQ,EAAa,GAEbC,EAAS,CACb,IAAM,KACN,KAAM,KACN,KAAM,QACN,IAAM,KACN,IAAM,MAID,SAASC,EAAMC,GAsBpB,GAFAA,EAAgBA,EAAcC,QAAQ,MAAO,KAExCJ,EAAWG,GACd,OAAOH,EAAWG,GAGpB,IAAIE,EACJ,MAAMC,EAAM,GACNC,EAAS,GAIf,GADAF,EAAQF,EAAcE,MAAM,cACvBA,GAASA,EAAMG,OAClB,IAAM,MAAMC,KAAOJ,EAAQ,CACzB,MAAMK,EAAMD,EAAIL,QAAQ,YAAa,IAAIA,QAAQ,YAAa,IAAIO,MAAM,WAExEJ,EAAOK,KAAKF,GACZP,EAAgBA,EAAcC,QAAQK,EAAM,KAAKF,EAAOC,OAAS,MAIrE,MAAMK,EAAQV,EAAcQ,MAAM,WAAWG,OAAOC,KAAOA,GAE3D,IAAM,IAAIC,KAAQH,EAChBG,EAAOA,EAAKC,OAEZZ,EAAQW,EAAKX,MAAM,sCAEdA,EACHC,EAAIM,KAAK,CACPM,IAAUb,EAAM,GAAGY,OACnBE,SAAwD,UAA9Cd,EAAM,GAAGe,cAAchB,QAAQ,MAAO,IAAkB,QAAU,KAC5EiB,OAAUd,EAAOF,EAAM,GAAGY,WAM9BZ,EAAQW,EAAKX,MAAM,0CACdA,EACHC,EAAIM,KAAK,CACPM,IAAUb,EAAM,GAAGY,OACnBE,SAAUlB,EAAOI,EAAM,IACvBgB,OAAU,CAAChB,EAAM,GAAGY,UAMnBD,EAAKM,WAAW,KACnBhB,EAAIM,KAAK,CACPM,IAAUF,EAAKO,OAAO,GAAGN,OACzBE,SAAU,iBAMdb,EAAIM,KAAK,CACPM,IAAUF,EAAKC,OACfE,SAAU,YAMd,OAFAnB,EAAWG,GAAiBG,EAErBA,EAUF,SAASkB,EAAQC,EAAgBC,GACtC,MAAMC,EAAOC,OAAOD,KAAKF,GAAkB,IACrCnB,EAAMoB,GAAoB,GAEhC,IAAM,MAAMR,KAAOS,EAAO,CACxB,MAAME,EAAQJ,EAAeP,GACvBY,EAAWC,eAAOzB,EAAK,CAAEY,MAAKC,SAAU,OAEzCW,EACHE,eAAUF,EAAST,OAAQQ,GAE3BvB,EAAIM,KAAK,CACPM,MACAC,SAAU,KACVE,OAAU,CAACQ,KAKjB,OAAOvB,EAKF,SAAS2B,EAASC,GACvB,MAAMC,EAAc,GACdT,EAAmB,GAGnBU,EAAa,GACbC,EAAO,GAEb,IAAM,MAAMC,KAAQJ,EACK,OAAlBI,EAAKnB,WAILkB,EAAKC,EAAKpB,KACbc,eAAUI,EAAYE,EAAKpB,KAE3BmB,EAAKC,EAAKpB,MAAO,GAIrB,IAAM,MAAMoB,KAAQJ,EACK,OAAlBI,EAAKnB,UAA4C,IAAvBmB,EAAKjB,OAAOb,QAAiB4B,EAAWG,SAASD,EAAKpB,KAGnFQ,EAAiBd,KAAKgB,OAAOY,OAAO,GAAIF,IAFxCH,EAAYG,EAAKpB,KAAOoB,EAAKjB,OAAO,GAMxC,MAAO,CAAEc,cAAaT,oBAGjB,SAASe,EAAQC,EAAKC,GAAU,MACrC,IAAIC,EAAQ,GAEZ,GAAyB,kBAAbD,EAEVC,EAAQ1C,EAAMyC,QACT,GAAKE,eAAQF,GAElBC,EAAQD,MACH,IAAyB,kBAAbA,IAAyBA,EAI1C,OAAO,EAFPC,EAAQpB,EAAQmB,GAKlB,MAAMG,GAAY,OAAHJ,QAAG,IAAHA,GAAa,QAAV,EAAHA,EAAKK,gBAAQ,WAAV,EAAH,EAAeD,SAAU,GAExC,IAAM,MAAM9B,KAAQ4B,EAAQ,CAC1B,MAAMf,EAAQiB,EAAO9B,EAAKE,KACpB8B,EAAQC,SAASpB,EAAO,IACxBqB,EAAqC,qBAArBJ,EAAO9B,EAAKE,KAElC,OAASF,EAAKG,UACd,IAAK,SACH,IAAM+B,EACJ,OAAO,EAET,MACF,IAAK,eACH,GAAKA,EACH,OAAO,EAET,MACF,IAAK,KACH,IAAMrB,IAAUb,EAAKK,OAAOb,SAAWQ,EAAKK,OAAOkB,SAASV,GAC1D,OAAO,EAET,MACF,IAAK,QACH,GAAKb,EAAKK,OAAOkB,SAASV,GACxB,OAAO,EAET,MACF,IAAK,KACH,GAAKsB,MAAMH,IAAUA,GAASI,KAAKC,IAAIC,MAAM,KAAMtC,EAAKK,QACtD,OAAO,EAET,MACF,IAAK,KACH,GAAK8B,MAAMH,IAAUA,GAASI,KAAKG,IAAID,MAAM,KAAMtC,EAAKK,QACtD,OAAO,EAET,OAIJ,OAAO,EAGF,SAASmC,EAASC,EAAKd,GAC5B,OAAOc,EAAI3C,OAAO4B,GAAOD,EAAQC,EAAKC,M,oCCjOxC,IAAIe,EAAS,WACb,IAAIC,EACAC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,IAAI,SAASC,YAAY,mBAAmBC,OAAQT,EAAO,CACvIU,SAAUT,EAAIS,WAAaT,EAAIU,OAC/BC,QAASX,EAAIW,SACZZ,EAAKC,EAAIY,OAAQ,EAAMb,EAAKC,EAAIa,QAAUb,EAAIa,OAAQd,EAAKe,SAAWd,EAAIe,OAAOD,SAAUf,EAAKe,SAAWd,EAAIe,OAAOC,SAAUjB,GAAOkB,GAAG,CAAC,MAAQjB,EAAIkB,cAAc,CAACd,EAAG,WAAWJ,EAAImB,GAAGnB,EAAIoB,GAAG,CAACd,IAAI,eAAeC,YAAY,SAASC,MAAM,CAAC,oBAAkC,SAAbR,EAAIY,MAAiBS,MAAM,CAAC,YAAa,EAAK,iBAAiBrB,EAAIsB,aAAa,qBAAqBtB,EAAIuB,iBAAiB,SAAWvB,EAAIU,QAAUV,EAAIS,SAAS,iBAAiB,SAAUe,GAAO,OAAOxB,EAAIyB,aAAaD,IAAQ,mBAAmB,SAAUA,GAAO,OAAOxB,EAAI0B,eAAeF,IAAQ,MAAQxB,EAAI2B,YAAY,QAAU3B,EAAI4B,QAAQ,kBAAkB5B,EAAI6B,cAAc,cAAc7B,EAAI8B,WAAW,YAAc9B,EAAI+B,YAAY,OAAS,SAAU5E,GAAK,OAAO6C,EAAIgC,OAAO7E,IAAM,WAAa6C,EAAIiC,aAAa,WAAajC,EAAIkC,WAAW,MAAqB,MAAblC,EAAI/B,MAAgB+B,EAAI/B,MAAQ,IAAIgD,GAAG,CAAC,cAAcjB,EAAImC,OAAO,eAAenC,EAAIoC,QAAQ,KAAOpC,EAAIqC,cAAc,iBAAiB,SAAUC,GAAK,OAAOtC,EAAIuC,MAAM,kBAAmBD,KAAOE,YAAYxC,EAAIyC,GAAG,CAAC,CAACnF,IAAI,SAASoF,GAAG,SAASC,GAAQ,MAAO,CAACvC,EAAG,MAAM,CAACa,GAAG,CAAC,UAAY,SAAUqB,GAAK,OAAOtC,EAAI4C,cAAcD,EAAQL,MAAQ,CAACtC,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAGH,EAAOI,OAAO,UAAU/C,EAAIgD,GAAIhD,EAAgB,cAAE,SAASiD,EAAEC,GAAM,MAAO,CAAC5F,IAAI4F,EAAKR,GAAG,SAASS,GAAO,MAAO,CAACnD,EAAIoD,GAAGF,EAAK,KAAK,KAAKC,UAAa,MAAK,IAAO,WAAWnD,EAAIe,QAAO,GAAOf,EAAIqD,aAAcrD,EAAIsD,UAAYtD,EAAIW,QAASP,EAAG,iBAAiB,CAACiB,MAAM,CAAC,MAAQrB,EAAIuD,aAAa,MAAQvD,EAAIsD,QAAQ,OAAStD,EAAIa,UAAUb,EAAIwD,KAAQxD,EAAIyD,kBAAmBrD,EAAG,iBAAiB,CAACiB,MAAM,CAAC,MAAQrB,EAAIuD,aAAa,MAAQvD,EAAIyD,qBAAqBzD,EAAIwD,MAAM,IAC/lDE,EAAkB,G,4DCCP,GACfC,YAAAC,uBACAC,uBACAC,OACAxC,cACAxF,WACAiI,cAEAtD,UACA3E,WACAiI,cAEAC,iBACAlI,aACAiI,eAEAnD,MACA9E,eACAiI,aAEAE,WACAnI,aACAiI,aAEApC,aACA7F,gBACAiI,aAEAG,WACApI,aACAiI,aAEAhC,aACAgC,YACAjI,YAEAqI,gBACAJ,cACAjI,cAEAkG,QACAlG,WACA,yCACA,QAGA,EAEAiI,eAEAT,SACAS,YACAjI,cAGAyH,cACAQ,aACAjI,YAGA+E,QACAkD,YACAjI,cAEAmC,OACAnC,aACAiI,2CAEAlC,eACAkC,aACAjI,aAIAsI,SAEA1C,kBACA,uCACA,mCAEA,mCACA,oBACA,kEAEA,mCAGA,GAIAH,4BAAA8C,IACA,uBACA,gCAAAA,UAGAC,sCAGAC,QACA,oBAGArD,cACA,0BACA,4EAEA,GACAsD,aAKAC,WAEA7B,mBACAA,uBAEAV,cAGA,WACA,8DAOAT,gBACA,eACA,qCAGA,+BAGA,+CACA,EAEA,kBAGAiD,UACAC,WAGAC,UACAC,gBAEA,6FAEApB,oBAEA,8EACA,KACA,+CAEA,mCACA,aAEA,KACA,SAIA,2BACA,aAEA,wBACAqB,UAGA,gDACA,kBAEA,KCvL2U,I,wBCQvU,EAAY,eACd,EACAhF,EACA4D,GACA,EACA,KACA,WACA,MAIa,S,gCClBf,IAAIqB,EAA8B,EAAQ,QAC1C7I,EAAU6I,GAA4B,GAEtC7I,EAAQc,KAAK,CAACjB,EAAOC,EAAI,8/CAAigD,KAE1hDD,EAAOG,QAAUA,G,oCCNjB,IAAI4D,EAAS,WAAa,IAAIE,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAEJ,EAAIgF,aAAehF,EAAIU,OAAQN,EAAG,SAAS,CAACG,YAAY,kCAAkCc,MAAM,CAAC,KAAO,UAAUJ,GAAG,CAAC,MAAQ,SAASgE,GAAQ,OAAOjF,EAAIuC,MAAM,aAAa,CAACnC,EAAG,IAAI,CAACG,YAAY,kBAAkBP,EAAIwD,KAAMxD,EAAIhB,MAAY,OAAEoB,EAAG,MAAM,CAACG,YAAY,0BAA0BC,MAAM,CAAC,KAAOR,EAAIU,SAAS,CAACN,EAAG,QAAQ,CAACJ,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAG9C,EAAIkF,EAAE,sDAAsD,OAAO9E,EAAG,QAAQ,CAACJ,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAG9C,EAAIkF,EAAE,2DAA2D,OAAO9E,EAAG,QAAQ,CAACJ,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAG9C,EAAIkF,EAAE,wDAAwD,OAAO9E,EAAG,UAAUJ,EAAIwD,KAAKxD,EAAIgD,GAAIhD,EAAS,OAAE,SAASmF,EAAIC,GAAO,OAAOhF,EAAG,MAAM,CAAC9C,IAAI6H,EAAIE,GAAG9E,YAAY,uBAAuBC,MAAM,CAAC,KAAOR,EAAIU,OAAQ,QAAS0E,IAAUpF,EAAIhB,MAAMpC,OAAS,IAAI,CAACwD,EAAG,MAAM,CAACiB,MAAM,CAAC,cAAe,8BAAgC+D,IAAS,CAAEpF,EAAU,OAAEI,EAAG,MAAM,CAACJ,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAGqC,EAAI7H,KAAK,OAAS0C,EAAIsF,oBAAuSlF,EAAG,gBAAgB,CAACiB,MAAM,CAAC,KAAOrB,EAAIY,KAAK,QAAUZ,EAAIuF,mBAAmBC,MAAM,CAACvH,MAAOkH,EAAO,IAAEM,SAAS,SAAUC,GAAM1F,EAAI2F,KAAKR,EAAK,MAAOO,IAAME,WAAW,aAApbxF,EAAG,QAAQ,CAACyF,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAU9H,MAAOkH,EAAO,IAAES,WAAW,YAAYvE,MAAM,CAAC,KAAOrB,EAAIY,MAAMoF,SAAS,CAAC,MAASb,EAAO,KAAGlE,GAAG,CAAC,MAAQ,CAAC,SAASgE,GAAWA,EAAOgB,OAAOC,WAAqBlG,EAAI2F,KAAKR,EAAK,MAAOF,EAAOgB,OAAOhI,QAAQ+B,EAAImG,YAA2L,GAAG/F,EAAG,MAAM,CAACiB,MAAM,CAAC,cAAe,mCAAqC+D,IAAS,CAAEpF,EAAU,OAAEI,EAAG,MAAM,CAACJ,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAGqC,EAAI5H,UAAU,OAAO6C,EAAG,SAAS,CAACG,YAAY,kBAAkBc,MAAM,CAAC,QAAUrB,EAAIoG,IAAI,WAAY,EAAM,OAAS,SAAU5E,GAAM,OAAOA,EAAIvD,OAAS,KAAO+B,EAAIY,MAAMK,GAAG,CAAC,MAAQjB,EAAImG,QAAQX,MAAM,CAACvH,MAAOkH,EAAY,SAAEM,SAAS,SAAUC,GAAM1F,EAAI2F,KAAKR,EAAK,WAAYO,IAAME,WAAW,mBAAmB,GAAmB,WAAfT,EAAI5H,UAAsC,iBAAf4H,EAAI5H,SAA2B6C,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,QAAQ,CAACG,YAAY,cAAc,CAACP,EAAI6C,GAAG,SAASzC,EAAG,MAAM,CAACiB,MAAM,CAAC,cAAe,iCAAmC+D,IAAS,CAAEpF,EAAU,OAAEI,EAAG,MAAM,CAACJ,EAAI6C,GAAG,IAAI7C,EAAI8C,GAAGqC,EAAI1H,QAAQ,OAAO2C,EAAG,QAAQ,CAACyF,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAU9H,MAAOkH,EAAU,OAAES,WAAW,eAAevE,MAAM,CAAC,KAAOrB,EAAIY,KAAK,SAA0B,WAAfuE,EAAI5H,UAAsC,iBAAf4H,EAAI5H,UAA2ByI,SAAS,CAAC,MAASb,EAAU,QAAGlE,GAAG,CAAC,MAAQ,CAAC,SAASgE,GAAWA,EAAOgB,OAAOC,WAAqBlG,EAAI2F,KAAKR,EAAK,SAAUF,EAAOgB,OAAOhI,QAAQ+B,EAAImG,aAAa/F,EAAG,MAAM,CAACG,YAAY,oBAAoB,CAAGP,EAAIU,OAAqOV,EAAIwD,KAAjOpD,EAAG,SAAS,CAACG,YAAY,gBAAgB8F,MAAM,CAAEC,QAAQ,OAAQjF,MAAM,CAAC,KAAO,SAAS,SAAsB,SAAXrB,EAAIY,MAAeK,GAAG,CAAC,MAAQ,SAASgE,GAAQ,OAAOjF,EAAIuG,WAAWpB,MAAQ,CAAC/E,EAAG,IAAI,CAACiB,MAAM,CAAC,EAAI,qBAAqB,UAAoBrB,EAAIU,OAAgOV,EAAIwD,KAA5NpD,EAAG,MAAM,CAACG,YAAY,SAAS,CAACH,EAAG,SAAS,CAACG,YAAY,wBAAwBc,MAAM,CAAC,KAAO,UAAUJ,GAAG,CAAC,MAAQjB,EAAIwG,UAAU,CAACpG,EAAG,IAAI,CAACiB,MAAM,CAAC,EAAI,4DAA4D,MAAe,IACvjGqC,EAAkB,G,oFCQP,GACfC,YAAA8C,cAAAC,sBACA5C,OAGA7F,OACA8F,oBACAjI,gBAIA8E,MACAmD,YACAjI,gBAIAiI,MACAA,YACAjI,gBAIA6K,iBACA5C,aACAjI,YAIAkJ,YACAjB,aACAjI,YAIAyJ,mBACAxB,WACAjI,iBAIA8K,OACA,sCAEA,GACA,CAAA7D,4DAAA9E,YACA,CAAA8E,+DAAA9E,eACA,CAAA8E,gEAAA9E,gBACA,CAAA8E,sEAAA9E,uBAGA,GACA,CAAA8E,4DAAA9E,YACA,CAAA8E,+DAAA9E,eACA,CAAA8E,gEAAA9E,gBACA,CAAA8E,sEAAA9E,sBACA,CAAA8E,kEAAA9E,YACA,CAAA8E,qEAAA9E,aAGA,yBAEA,MA0BA,OAvBAe,EADA,2BACAA,gBAEAA,mEAGAA,YACA,0BAMA,OAJA,uCACA6H,8BAGA,IAGA,8CACA7H,QACA1B,OACAC,cACAE,YAIA,CACA2I,MACApH,QACA8H,YAIAlC,UACAlE,SACA,0BAGAqG,OACA,eAGAC,MACA,eAGA1B,sBAAA,MACA,sEAGA,gBAAAJ,cAGAd,SACAmC,cACAU,6BACA,eAGAT,UACA,iBACAlJ,OACAC,cACAE,aAIA0I,SACA,oBACA,2BACA,SAAA7I,UAAAC,qBACA,4BAEA,sDACAT,YACA,MACA,OAOA,OAJA,WACAoK,4CAGA,IACA,eAEA,2BACA,sBAEA,2CChKqV,I,wBCQjVC,EAAY,eACd,EACArH,EACA4D,GACA,EACA,KACA,WACA,MAIa,OAAAyD,E,gCChBf,IAAIvL,EAAU,EAAQ,QACnBA,EAAQC,aAAYD,EAAUA,EAAQE,SACnB,kBAAZF,IAAsBA,EAAU,CAAC,CAACG,EAAOC,EAAIJ,EAAS,MAC7DA,EAAQK,SAAQF,EAAOG,QAAUN,EAAQK,QAE5C,IAAIE,EAAM,EAAQ,QAAwDL,QAC7DK,EAAI,WAAYP,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCR5E,IAAImJ,EAA8B,EAAQ,QAC1C7I,EAAU6I,GAA4B,GAEtC7I,EAAQc,KAAK,CAACjB,EAAOC,EAAI,+tFAAkuF,KAE3vFD,EAAOG,QAAUA,G,kCCNjB,W,kCCAA","file":"elemental-1.0.0.umd.min.vendors~edit~machine-config.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=style&index=0&id=12c9124a&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"e36df586\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","import { isArray, addObject, findBy } from '@shell/utils/array';\n\nconst parseCache = {};\n\nconst OP_MAP = {\n  '=':  'In',\n  '==': 'In',\n  '!=': 'NotIn',\n  '<':  'Lt',\n  '>':  'Gt',\n};\n\n// Parse a labelSelector string\nexport function parse(labelSelector) {\n  // matchLabels:\n  // comma-separated list, all rules ANDed together\n  // spaces may be encoded as +\n  //\n  // Equals:      foo = bar\n  // Not Equals:  bar != baz\n  // Key Exists:  optional.prefix/just-some-key\n  // Key Doesn't: !optional.prefix/just-some-key\n  // In Set:      environment in (production,qa)\n  // Not in Set:  environment notin (production,qa)\n\n  // Convert into matchExpressions, which newer resources support\n  // and express the same things\n  //\n  // Object of:\n  // key: optional.prefix/some-key\n  // operator: In, NotIn, Exists, or DoesNotExist\n  // values:  [array, of, values, even, if, only, one]\n\n  labelSelector = labelSelector.replace(/\\+/g, ' ');\n\n  if ( parseCache[labelSelector] ) {\n    return parseCache[labelSelector];\n  }\n\n  let match;\n  const out = [];\n  const parens = [];\n\n  // Substitute out all the parenthetical lists because they might have commas in them\n  match = labelSelector.match(/\\([^)]+\\)/g);\n  if ( match && match.length ) {\n    for ( const str of match ) {\n      const val = str.replace(/^\\s*\\(\\s*/, '').replace(/\\s*\\)\\s*$/, '').split(/\\s*,\\s*/);\n\n      parens.push(val);\n      labelSelector = labelSelector.replace(str, ` @${ parens.length - 1 } `);\n    }\n  }\n\n  const parts = labelSelector.split(/\\s*,\\s*/).filter(x => !!x);\n\n  for ( let rule of parts ) {\n    rule = rule.trim();\n\n    match = rule.match(/^(.*?)\\s+((not\\s*)?in)\\s+@(\\d+)*$/i);\n\n    if ( match ) {\n      out.push({\n        key:      match[1].trim(),\n        operator: match[2].toLowerCase().replace(/\\s/g, '') === 'notin' ? 'NotIn' : 'In',\n        values:   parens[match[4].trim()],\n      });\n\n      continue;\n    }\n\n    match = rule.match(/^([^!=]*)\\s*(\\!=|=|==|>|<)\\s*([^!=]*)$/);\n    if ( match ) {\n      out.push({\n        key:      match[1].trim(),\n        operator: OP_MAP[match[2]],\n        values:   [match[3].trim()],\n      });\n\n      continue;\n    }\n\n    if ( rule.startsWith('!') ) {\n      out.push({\n        key:      rule.substr(1).trim(),\n        operator: 'DoesNotExist'\n      });\n\n      continue;\n    }\n\n    out.push({\n      key:      rule.trim(),\n      operator: 'Exists'\n    });\n  }\n\n  parseCache[labelSelector] = out;\n\n  return out;\n}\n\n// Convert a Selector object to matchExpressions\nexport function convertSelectorObj(obj) {\n  return convert(obj.matchLabels || {}, obj.matchExpressions || []);\n}\n\n// Convert matchLabels to matchExpressions\n// Optionally combining with an existing set of matchExpressions\nexport function convert(matchLabelsObj, matchExpressions) {\n  const keys = Object.keys(matchLabelsObj || {});\n  const out = matchExpressions || [];\n\n  for ( const key of keys ) {\n    const value = matchLabelsObj[key];\n    const existing = findBy(out, { key, operator: 'In' });\n\n    if ( existing ) {\n      addObject(existing.values, value);\n    } else {\n      out.push({\n        key,\n        operator: 'In',\n        values:   [value],\n      });\n    }\n  }\n\n  return out;\n}\n\n// Convert matchExpressions to matchLabels when possible,\n// returning the simplest combination of them.\nexport function simplify(matchExpressionsInput) {\n  const matchLabels = {};\n  const matchExpressions = [];\n\n  // Look for keys with more than one \"In\" expression and disqualify them from simplifying\n  const impossible = [];\n  const seen = {};\n\n  for ( const expr of matchExpressionsInput ) {\n    if ( expr.operator !== 'In' ) {\n      continue;\n    }\n\n    if ( seen[expr.key] ) {\n      addObject(impossible, expr.key);\n    } else {\n      seen[expr.key] = true;\n    }\n  }\n\n  for ( const expr of matchExpressionsInput ) {\n    if ( expr.operator === 'In' && expr.values.length === 1 && !impossible.includes(expr.key) ) {\n      matchLabels[expr.key] = expr.values[0];\n    } else {\n      matchExpressions.push(Object.assign({}, expr));\n    }\n  }\n\n  return { matchLabels, matchExpressions };\n}\n\nexport function matches(obj, selector) {\n  let rules = [];\n\n  if ( typeof selector === 'string' ) {\n    // labelSelector string\n    rules = parse(selector);\n  } else if ( isArray(selector) ) {\n    // Already matchExpression\n    rules = selector;\n  } else if ( typeof selector === 'object' && selector ) {\n    // matchLabels object\n    rules = convert(selector);\n  } else {\n    return false;\n  }\n\n  const labels = obj?.metadata?.labels || {};\n\n  for ( const rule of rules ) {\n    const value = labels[rule.key];\n    const asInt = parseInt(value, 10);\n    const exists = typeof labels[rule.key] !== 'undefined';\n\n    switch ( rule.operator ) {\n    case 'Exists':\n      if ( !exists ) {\n        return false;\n      }\n      break;\n    case 'DoesNotExist':\n      if ( exists ) {\n        return false;\n      }\n      break;\n    case 'In':\n      if ( !value || !rule.values.length || !rule.values.includes(value) ) {\n        return false;\n      }\n      break;\n    case 'NotIn':\n      if ( rule.values.includes(value) ) {\n        return false;\n      }\n      break;\n    case 'Lt':\n      if ( isNaN(asInt) || asInt >= Math.min.apply(null, rule.values) ) {\n        return false;\n      }\n      break;\n    case 'Gt':\n      if ( isNaN(asInt) || asInt <= Math.max.apply(null, rule.values) ) {\n        return false;\n      }\n      break;\n    }\n  }\n\n  return true;\n}\n\nexport function matching(ary, selector) {\n  return ary.filter(obj => matches(obj, selector));\n}\n","var render = function () {\nvar _obj;\nvar _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"select\",staticClass:\"unlabeled-select\",class:( _obj = {\n    disabled: _vm.disabled && !_vm.isView,\n    focused: _vm.focused\n  }, _obj[_vm.mode] = true, _obj[_vm.status] = _vm.status, _obj.taggable = _vm.$attrs.taggable, _obj.taggable = _vm.$attrs.multiple, _obj ),on:{\"focus\":_vm.focusSearch}},[_c('v-select',_vm._g(_vm._b({ref:\"select-input\",staticClass:\"inline\",class:{'select-input-view': _vm.mode === 'view'},attrs:{\"autoscroll\":true,\"append-to-body\":_vm.appendToBody,\"calculate-position\":_vm.positionDropdown,\"disabled\":_vm.isView || _vm.disabled,\"get-option-key\":function (opt) { return _vm.getOptionKey(opt); },\"get-option-label\":function (opt) { return _vm.getOptionLabel(opt); },\"label\":_vm.optionLabel,\"options\":_vm.options,\"close-on-select\":_vm.closeOnSelect,\"map-keydown\":_vm.mappedKeys,\"placeholder\":_vm.placeholder,\"reduce\":function (x) { return _vm.reduce(x); },\"searchable\":_vm.isSearchable,\"selectable\":_vm.selectable,\"value\":_vm.value != null ? _vm.value : ''},on:{\"search:blur\":_vm.onBlur,\"search:focus\":_vm.onFocus,\"open\":_vm.resizeHandler,\"option:created\":function (e) { return _vm.$emit('createdListItem', e); }},scopedSlots:_vm._u([{key:\"option\",fn:function(option){return [_c('div',{on:{\"mousedown\":function (e) { return _vm.onClickOption(option, e); }}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])]}},_vm._l((_vm.$scopedSlots),function(_,slot){return {key:slot,fn:function(scope){return [_vm._t(slot,null,null,scope)]}}})],null,true)},'v-select',_vm.$attrs,false),_vm.$listeners)),(_vm.tooltip && !_vm.focused)?_c('LabeledTooltip',{attrs:{\"hover\":_vm.hoverTooltip,\"value\":_vm.tooltip,\"status\":_vm.status}}):_vm._e(),(!!_vm.validationMessage)?_c('LabeledTooltip',{attrs:{\"hover\":_vm.hoverTooltip,\"value\":_vm.validationMessage}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { get } from '@shell/utils/object';\nimport LabeledFormElement from '@shell/mixins/labeled-form-element';\nimport VueSelectOverrides from '@shell/mixins/vue-select-overrides';\nimport { LabeledTooltip } from '@components/LabeledTooltip';\nimport { onClickOption, calculatePosition } from '@shell/utils/select';\n\nexport default {\n  components: { LabeledTooltip },\n  mixins:     [LabeledFormElement, VueSelectOverrides],\n  props:      {\n    appendToBody: {\n      default: true,\n      type:    Boolean,\n    },\n    disabled: {\n      default: false,\n      type:    Boolean,\n    },\n    getKeyForOption: {\n      default: null,\n      type:    Function\n    },\n    mode: {\n      default: 'edit',\n      type:    String,\n    },\n    optionKey: {\n      default: null,\n      type:    String,\n    },\n    optionLabel: {\n      default: 'label',\n      type:    String,\n    },\n    placement: {\n      default: null,\n      type:    String,\n    },\n    placeholder: {\n      type:    String,\n      default: '',\n    },\n    popperOverride: {\n      type:    Function,\n      default: null,\n    },\n    reduce: {\n      default: (e) => {\n        if (e && typeof e === 'object' && e.value !== undefined) {\n          return e.value;\n        }\n\n        return e;\n      },\n      type: Function,\n    },\n    tooltip: {\n      type:    String,\n      default: null,\n    },\n\n    hoverTooltip: {\n      type:    Boolean,\n      default: true,\n    },\n\n    status: {\n      type:    String,\n      default: null,\n    },\n    value: {\n      default: null,\n      type:    [String, Object, Number, Array, Boolean],\n    },\n    closeOnSelect: {\n      type:    Boolean,\n      default: true\n    },\n  },\n\n  methods: {\n    // resizeHandler = in mixin\n    getOptionLabel(option) {\n      if (this.$attrs['get-option-label']) {\n        return this.$attrs['get-option-label'](option);\n      }\n      if (get(option, this.optionLabel)) {\n        if (this.localizedLabel) {\n          return this.$store.getters['i18n/t'](get(option, this.optionLabel));\n        } else {\n          return get(option, this.optionLabel);\n        }\n      } else {\n        return option;\n      }\n    },\n\n    positionDropdown(dropdownList, component, { width }) {\n      if (this.popperOverride) {\n        return this.popperOverride(dropdownList, component, { width });\n      }\n\n      calculatePosition(dropdownList, component, width, this.placement);\n    },\n\n    focus() {\n      this.focusSearch();\n    },\n\n    focusSearch() {\n      this.$nextTick(() => {\n        const el = this.$refs['select-input']?.searchEl;\n\n        if ( el ) {\n          el.focus();\n        }\n      });\n    },\n\n    get,\n\n    onClickOption(option, event) {\n      onClickOption.call(this, option, event);\n    },\n    selectable(opt) {\n      // Lets you disable options that are used\n      // for headings on groups of options.\n      if ( opt ) {\n        if ( opt.disabled || opt.kind === 'group' || opt.kind === 'divider' || opt.loading ) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    getOptionKey(opt) {\n      if (opt.optionKey) {\n        return get(opt, opt.optionKey);\n      }\n\n      const label = this.getOptionLabel(opt);\n\n      // label may be type of object\n      if (typeof label === 'string' || typeof label === 'number') {\n        return label;\n      } else {\n        return Math.random(100000);\n      }\n    },\n    report(e) {\n      alert(e);\n    }\n  },\n  computed: {\n    requiredField() {\n      // using \"any\" for a type on \"rule\" here is dirty but the use of the optional chaining operator makes it safe for what we're doing here.\n      return (this.required || this.rules.some(rule => rule?.name === 'required'));\n    },\n    validationMessage() {\n      // we want to grab the required rule passed in if we can but if it's not there then we can just grab it from the formRulesGenerator\n      const requiredRule = this.rules.find(rule => rule?.name === 'required');\n      const ruleMessages = [];\n      const value = this?.value;\n\n      if (requiredRule && this.blurred && !this.focused) {\n        const message = requiredRule(value);\n\n        if (!!message) {\n          return message;\n        }\n      }\n\n      for (const rule of this.rules) {\n        const message = rule(value);\n\n        if (!!message && rule.name !== 'required') { // we're catching 'required' above so we can ignore it here\n          ruleMessages.push(message);\n        }\n      }\n      if (ruleMessages.length > 0 && (this.blurred || this.focused)) {\n        return ruleMessages.join(', ');\n      } else {\n        return undefined;\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div\n    ref=\"select\"\n    class=\"unlabeled-select\"\n    :class=\"{\n      disabled: disabled && !isView,\n      focused,\n      [mode]: true,\n      [status]: status,\n      taggable: $attrs.taggable,\n      taggable: $attrs.multiple,\n    }\"\n    @focus=\"focusSearch\"\n  >\n    <v-select\n      ref=\"select-input\"\n      v-bind=\"$attrs\"\n      class=\"inline\"\n      :class=\"{'select-input-view': mode === 'view'}\"\n      :autoscroll=\"true\"\n      :append-to-body=\"appendToBody\"\n      :calculate-position=\"positionDropdown\"\n      :disabled=\"isView || disabled\"\n      :get-option-key=\"(opt) => getOptionKey(opt)\"\n      :get-option-label=\"(opt) => getOptionLabel(opt)\"\n      :label=\"optionLabel\"\n      :options=\"options\"\n      :close-on-select=\"closeOnSelect\"\n      :map-keydown=\"mappedKeys\"\n      :placeholder=\"placeholder\"\n      :reduce=\"(x) => reduce(x)\"\n      :searchable=\"isSearchable\"\n      :selectable=\"selectable\"\n      :value=\"value != null ? value : ''\"\n      v-on=\"$listeners\"\n      @search:blur=\"onBlur\"\n      @search:focus=\"onFocus\"\n      @open=\"resizeHandler\"\n      @option:created=\"(e) => $emit('createdListItem', e)\"\n    >\n      <template #option=\"option\">\n        <div @mousedown=\"(e) => onClickOption(option, e)\">\n          {{ option.label }}\n        </div>\n      </template>\n      <!-- Pass down templates provided by the caller -->\n      <template\n        v-for=\"(_, slot) of $scopedSlots\"\n        v-slot:[slot]=\"scope\"\n      >\n        <slot\n          :name=\"slot\"\n          v-bind=\"scope\"\n        />\n      </template>\n    </v-select>\n    <LabeledTooltip\n      v-if=\"tooltip && !focused\"\n      :hover=\"hoverTooltip\"\n      :value=\"tooltip\"\n      :status=\"status\"\n    />\n    <LabeledTooltip\n      v-if=\"!!validationMessage\"\n      :hover=\"hoverTooltip\"\n      :value=\"validationMessage\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .unlabeled-select {\n    position: relative;\n\n    ::v-deep .v-select.select-input-view {\n      .vs__actions {\n        visibility: hidden;\n      }\n    }\n\n    & .vs--multiple ::v-deep .vs__selected-options .vs__selected {\n      width: auto;\n    }\n\n    ::v-deep .labeled-tooltip.error .status-icon {\n      top: 7px;\n      right: 2px;\n    }\n\n    ::v-deep .vs__selected-options {\n      display: flex;\n\n      .vs__selected {\n          width: 100%;\n      }\n    }\n\n    ::v-deep .v-select.vs--open {\n      .vs__dropdown-toggle {\n        color: var(--outline) !important;\n      }\n    }\n\n    ::v-deep .v-select.vs--open {\n      .vs__dropdown-toggle {\n        color: var(--outline) !important;\n      }\n    }\n\n    @include input-status-color;\n  }\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Select.vue?vue&type=template&id=6c7f989b&scoped=true&\"\nimport script from \"./Select.vue?vue&type=script&lang=js&\"\nexport * from \"./Select.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Select.vue?vue&type=style&index=0&id=6c7f989b&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c7f989b\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-12c9124a]:after,.clearfix[data-v-12c9124a]:before{content:\\\" \\\";display:table}.clearfix[data-v-12c9124a]:after{clear:both}.list-unstyled[data-v-12c9124a]{margin:0;padding:0;list-style-type:none}.no-select[data-v-12c9124a]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-12c9124a]{resize:none}.hand[data-v-12c9124a]{cursor:pointer;cursor:hand}.fixed[data-v-12c9124a]{table-layout:fixed}.clip[data-v-12c9124a]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-12c9124a],.force-wrap[data-v-12c9124a]{word-wrap:break-word}.force-wrap[data-v-12c9124a]{white-space:normal}.bordered-section[data-v-12c9124a]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-12c9124a]{margin-bottom:20px;margin-top:20px}.operator .vs__dropdown-option[data-v-12c9124a]{padding:3px 6px 3px 6px!important}.remove-expression[data-v-12c9124a]{padding:8px;position:absolute;margin-bottom:10px;right:0;top:0;z-index:2}.remove-expression i[data-v-12c9124a]{font-size:2em}.remove-container[data-v-12c9124a]{display:flex;justify-content:center}.match-expression-header[data-v-12c9124a],.match-expression-row[data-v-12c9124a]{display:grid;grid-template-columns:1fr 1fr 1fr;margin:5px 0;grid-gap:10px}.match-expression-header>LABEL[data-v-12c9124a],.match-expression-row>LABEL[data-v-12c9124a]{margin:0}.match-expression-header[data-v-12c9124a]:not(.view),.match-expression-row[data-v-12c9124a]:not(.view){grid-template-columns:1fr 1fr 1fr 100px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.showRemove && !_vm.isView)?_c('button',{staticClass:\"btn role-link remove-expression\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('remove')}}},[_c('i',{staticClass:\"icon icon-x\"})]):_vm._e(),(_vm.rules.length)?_c('div',{staticClass:\"match-expression-header\",class:{'view':_vm.isView}},[_c('label',[_vm._v(\" \"+_vm._s(_vm.t('workload.scheduling.affinity.matchExpressions.key'))+\" \")]),_c('label',[_vm._v(\" \"+_vm._s(_vm.t('workload.scheduling.affinity.matchExpressions.operator'))+\" \")]),_c('label',[_vm._v(\" \"+_vm._s(_vm.t('workload.scheduling.affinity.matchExpressions.value'))+\" \")]),_c('span')]):_vm._e(),_vm._l((_vm.rules),function(row,index){return _c('div',{key:row.id,staticClass:\"match-expression-row\",class:{'view':_vm.isView, 'mb-10': index !== _vm.rules.length - 1}},[_c('div',{attrs:{\"data-testid\":(\"input-match-expression-key-\" + index)}},[(_vm.isView)?_c('div',[_vm._v(\" \"+_vm._s(row.key)+\" \")]):(!_vm.hasKeySelectOptions)?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.key),expression:\"row.key\"}],attrs:{\"mode\":_vm.mode},domProps:{\"value\":(row.key)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(row, \"key\", $event.target.value)},_vm.update]}}):_c('LabeledSelect',{attrs:{\"mode\":_vm.mode,\"options\":_vm.keysSelectOptions},model:{value:(row.key),callback:function ($$v) {_vm.$set(row, \"key\", $$v)},expression:\"row.key\"}})],1),_c('div',{attrs:{\"data-testid\":(\"input-match-expression-operator-\" + index)}},[(_vm.isView)?_c('div',[_vm._v(\" \"+_vm._s(row.operator)+\" \")]):_c('Select',{staticClass:\"operator single\",attrs:{\"options\":_vm.ops,\"clearable\":false,\"reduce\":function (opt){ return opt.value; },\"mode\":_vm.mode},on:{\"input\":_vm.update},model:{value:(row.operator),callback:function ($$v) {_vm.$set(row, \"operator\", $$v)},expression:\"row.operator\"}})],1),(row.operator==='Exists' || row.operator==='DoesNotExist')?_c('div',{staticClass:\"no-value\"},[_c('label',{staticClass:\"text-muted\"},[_vm._v(\"…\")])]):_c('div',{attrs:{\"data-testid\":(\"input-match-expression-values-\" + index)}},[(_vm.isView)?_c('div',[_vm._v(\" \"+_vm._s(row.values)+\" \")]):_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(row.values),expression:\"row.values\"}],attrs:{\"mode\":_vm.mode,\"disabled\":row.operator==='Exists' || row.operator==='DoesNotExist'},domProps:{\"value\":(row.values)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(row, \"values\", $event.target.value)},_vm.update]}})]),_c('div',{staticClass:\"remove-container\"},[(!_vm.isView)?_c('button',{staticClass:\"btn role-link\",style:({padding:'0px'}),attrs:{\"type\":\"button\",\"disabled\":_vm.mode==='view'},on:{\"click\":function($event){return _vm.removeRule(row)}}},[_c('t',{attrs:{\"k\":\"generic.remove\"}})],1):_vm._e()])])}),(!_vm.isView)?_c('div',{staticClass:\"mt-20\"},[_c('button',{staticClass:\"btn role-tertiary add\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addRule}},[_c('t',{attrs:{\"k\":\"workload.scheduling.affinity.matchExpressions.addRule\"}})],1)]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { NODE, POD } from '@shell/config/types';\nimport Select from '@shell/components/form/Select';\nimport { mapGetters } from 'vuex';\nimport { isArray, removeObject } from '@shell/utils/array';\nimport { clone } from '@shell/utils/object';\nimport { convert, simplify } from '@shell/utils/selector';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nexport default {\n  components: { Select, LabeledSelect },\n  props:      {\n    // Array of actual match expressions\n    // or k8s selector Object of {matchExpressions, matchLabels}\n    value: {\n      type:    [Array, Object],\n      default: () => []\n    },\n\n    // CRU mode\n    mode: {\n      type:    String,\n      default: 'edit'\n    },\n\n    // pod/node affinity types have different operator options\n    type: {\n      type:    String,\n      default: NODE\n    },\n\n    // whether or not to show an initial empty row of inputs when value is empty in editing modes\n    initialEmptyRow: {\n      type:    Boolean,\n      default: false,\n    },\n\n    // whether or not to show remove button in upper right\n    showRemove: {\n      type:    Boolean,\n      default: true\n    },\n\n    // if options are passed for keys, then the key's input will become a select\n    keysSelectOptions: {\n      type:    Array,\n      default: () => []\n    }\n  },\n\n  data() {\n    const t = this.$store.getters['i18n/t'];\n\n    const podOptions = [\n      { label: t('workload.scheduling.affinity.matchExpressions.in'), value: 'In' },\n      { label: t('workload.scheduling.affinity.matchExpressions.notIn'), value: 'NotIn' },\n      { label: t('workload.scheduling.affinity.matchExpressions.exists'), value: 'Exists' },\n      { label: t('workload.scheduling.affinity.matchExpressions.doesNotExist'), value: 'DoesNotExist' },\n    ];\n\n    const nodeOptions = [\n      { label: t('workload.scheduling.affinity.matchExpressions.in'), value: 'In' },\n      { label: t('workload.scheduling.affinity.matchExpressions.notIn'), value: 'NotIn' },\n      { label: t('workload.scheduling.affinity.matchExpressions.exists'), value: 'Exists' },\n      { label: t('workload.scheduling.affinity.matchExpressions.doesNotExist'), value: 'DoesNotExist' },\n      { label: t('workload.scheduling.affinity.matchExpressions.lessThan'), value: 'Lt' },\n      { label: t('workload.scheduling.affinity.matchExpressions.greaterThan'), value: 'Gt' },\n    ];\n\n    const ops = this.type === NODE ? nodeOptions : podOptions;\n\n    let rules;\n\n    if ( isArray(this.value) ) {\n      rules = [...this.value];\n    } else {\n      rules = convert(this.value.matchLabels, this.value.matchExpressions);\n    }\n\n    rules = rules.map((rule) => {\n      const newRule = clone(rule);\n\n      if (newRule.values && typeof newRule.values !== 'string') {\n        newRule.values = newRule.values.join(', ');\n      }\n\n      return newRule;\n    });\n\n    if (!rules.length && this.initialEmptyRow && !this.isView) {\n      rules.push({\n        key:      '',\n        operator: 'In',\n        values:   ''\n      });\n    }\n\n    return {\n      ops,\n      rules,\n      custom: []\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === 'view';\n    },\n\n    node() {\n      return NODE;\n    },\n\n    pod() {\n      return POD;\n    },\n\n    hasKeySelectOptions() {\n      return !!this.keysSelectOptions?.length;\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  methods: {\n    removeRule(row) {\n      removeObject(this.rules, row);\n      this.update();\n    },\n\n    addRule() {\n      this.rules.push({\n        key:      '',\n        operator: 'In',\n        values:   ''\n      });\n    },\n\n    update() {\n      this.$nextTick(() => {\n        const out = this.rules.map((rule) => {\n          const matchExpression = { key: rule.key, operator: rule.operator };\n          let val = (rule.values || '').trim();\n\n          if ( rule.operator === 'Exists' || rule.operator === 'DoesNotExist') {\n            val = null;\n          } else if (!val) {\n            return;\n          }\n\n          if ( val !== null ) {\n            matchExpression.values = val.split(/\\s*,\\s*/).filter(x => !!x);\n          }\n\n          return matchExpression;\n        }).filter(x => !!x);\n\n        if ( isArray(this.value) ) {\n          this.$emit('input', out);\n        } else {\n          this.$emit('input', simplify(out));\n        }\n      });\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <button\n      v-if=\"showRemove && !isView\"\n      type=\"button\"\n      class=\"btn role-link remove-expression\"\n      @click=\"$emit('remove')\"\n    >\n      <i class=\"icon icon-x\" />\n    </button>\n\n    <div\n      v-if=\"rules.length\"\n      class=\"match-expression-header\"\n      :class=\"{'view':isView}\"\n    >\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.key') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.operator') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.value') }}\n      </label>\n      <span />\n    </div>\n    <div\n      v-for=\"(row, index) in rules\"\n      :key=\"row.id\"\n      class=\"match-expression-row\"\n      :class=\"{'view':isView, 'mb-10': index !== rules.length - 1}\"\n    >\n      <div\n        :data-testid=\"`input-match-expression-key-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.key }}\n        </div>\n        <input\n          v-else-if=\"!hasKeySelectOptions\"\n          v-model=\"row.key\"\n          :mode=\"mode\"\n          @input=\"update\"\n        >\n        <LabeledSelect\n          v-else\n          v-model=\"row.key\"\n          :mode=\"mode\"\n          :options=\"keysSelectOptions\"\n        />\n      </div>\n      <div\n        :data-testid=\"`input-match-expression-operator-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.operator }}\n        </div>\n        <Select\n          v-else\n          v-model=\"row.operator\"\n          class=\"operator single\"\n          :options=\"ops\"\n          :clearable=\"false\"\n          :reduce=\"opt=>opt.value\"\n          :mode=\"mode\"\n          @input=\"update\"\n        />\n      </div>\n\n      <div\n        v-if=\"row.operator==='Exists' || row.operator==='DoesNotExist'\"\n        class=\"no-value\"\n      >\n        <label class=\"text-muted\">&hellip;</label>\n      </div>\n      <div\n        v-else\n        :data-testid=\"`input-match-expression-values-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.values }}\n        </div>\n        <input\n          v-else\n          v-model=\"row.values\"\n          :mode=\"mode\"\n          :disabled=\"row.operator==='Exists' || row.operator==='DoesNotExist'\"\n          @input=\"update\"\n        >\n      </div>\n      <div class=\"remove-container\">\n        <button\n          v-if=\"!isView\"\n          type=\"button\"\n          class=\"btn role-link\"\n          :style=\"{padding:'0px'}\"\n\n          :disabled=\"mode==='view'\"\n          @click=\"removeRule(row)\"\n        >\n          <t k=\"generic.remove\" />\n        </button>\n      </div>\n    </div>\n    <div\n      v-if=\"!isView\"\n      class=\"mt-20\"\n    >\n      <button\n        type=\"button\"\n        class=\"btn role-tertiary add\"\n        @click=\"addRule\"\n      >\n        <t k=\"workload.scheduling.affinity.matchExpressions.addRule\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  $separator: 20;\n  $remove: 75;\n  $spacing: 10px;\n\n  .operator {\n    & .vs__dropdown-option{\n      padding: 3px 6px 3px 6px !important\n    }\n  }\n\n  .remove-expression {\n    padding:  8px;\n    position: absolute;\n    margin-bottom:10px;\n    right: 0px;\n    top: 0px;\n    z-index: z-index('overContent');\n\n    i {\n      font-size:2em;\n    }\n  }\n\n  .remove-container {\n    display: flex;\n    justify-content: center;\n  }\n\n  .match-expression-row, .match-expression-header {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 5px 0;\n    grid-gap: 10px;\n\n    & > LABEL {\n      margin: 0;\n    }\n\n    &:not(.view){\n      grid-template-columns: 1fr 1fr 1fr 100px;\n    }\n  }\n</style>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--14-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MatchExpressions.vue?vue&type=template&id=12c9124a&scoped=true&\"\nimport script from \"./MatchExpressions.vue?vue&type=script&lang=js&\"\nexport * from \"./MatchExpressions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MatchExpressions.vue?vue&type=style&index=0&id=12c9124a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"12c9124a\",\n  null\n  \n)\n\nexport default component.exports","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=style&index=0&id=6c7f989b&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3b41d2ac\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".clearfix[data-v-6c7f989b]:after,.clearfix[data-v-6c7f989b]:before{content:\\\" \\\";display:table}.clearfix[data-v-6c7f989b]:after{clear:both}.list-unstyled[data-v-6c7f989b]{margin:0;padding:0;list-style-type:none}.no-select[data-v-6c7f989b]{-webkit-user-select:none;-moz-user-select:none;user-select:none}.no-resize[data-v-6c7f989b]{resize:none}.hand[data-v-6c7f989b]{cursor:pointer;cursor:hand}.fixed[data-v-6c7f989b]{table-layout:fixed}.clip[data-v-6c7f989b]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.clip[data-v-6c7f989b],.force-wrap[data-v-6c7f989b]{word-wrap:break-word}.force-wrap[data-v-6c7f989b]{white-space:normal}.bordered-section[data-v-6c7f989b]{border-bottom:1px solid var(--border);margin-bottom:20px;padding-bottom:20px}.section-divider[data-v-6c7f989b]{margin-bottom:20px;margin-top:20px}.unlabeled-select[data-v-6c7f989b]{position:relative}.unlabeled-select[data-v-6c7f989b]  .v-select.select-input-view .vs__actions{visibility:hidden}.unlabeled-select .vs--multiple[data-v-6c7f989b]  .vs__selected-options .vs__selected{width:auto}.unlabeled-select[data-v-6c7f989b]  .labeled-tooltip.error .status-icon{top:7px;right:2px}.unlabeled-select[data-v-6c7f989b]  .vs__selected-options{display:flex}.unlabeled-select[data-v-6c7f989b]  .vs__selected-options .vs__selected{width:100%}.unlabeled-select[data-v-6c7f989b]  .v-select.vs--open .vs__dropdown-toggle{color:var(--outline)!important}.unlabeled-select.focused.success[data-v-6c7f989b],.unlabeled-select.success[data-v-6c7f989b]{border:solid 1px var(--success)}.unlabeled-select.focused.success .selected[data-v-6c7f989b],.unlabeled-select.focused.success .vs__actions[data-v-6c7f989b]:after,.unlabeled-select.focused.success input[data-v-6c7f989b],.unlabeled-select.success .selected[data-v-6c7f989b],.unlabeled-select.success .vs__actions[data-v-6c7f989b]:after,.unlabeled-select.success input[data-v-6c7f989b]{color:var(--success)}.unlabeled-select.focused.warning[data-v-6c7f989b],.unlabeled-select.warning[data-v-6c7f989b]{border:solid 1px var(--warning)}.unlabeled-select.focused.warning .selected[data-v-6c7f989b],.unlabeled-select.focused.warning .vs__actions[data-v-6c7f989b]:after,.unlabeled-select.focused.warning input[data-v-6c7f989b],.unlabeled-select.warning .selected[data-v-6c7f989b],.unlabeled-select.warning .vs__actions[data-v-6c7f989b]:after,.unlabeled-select.warning input[data-v-6c7f989b]{color:var(--warning)}.unlabeled-select.error[data-v-6c7f989b],.unlabeled-select.focused.error[data-v-6c7f989b]{border:solid 1px var(--error)}.unlabeled-select.error .vs__actions[data-v-6c7f989b]:after,.unlabeled-select.error>label[data-v-6c7f989b],.unlabeled-select.focused.error .vs__actions[data-v-6c7f989b]:after,.unlabeled-select.focused.error>label[data-v-6c7f989b]{color:var(--error)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./MatchExpressions.vue?vue&type=style&index=0&id=12c9124a&prod&lang=scss&scoped=true&\"","export * from \"-!../../../../vue-style-loader/index.js??ref--10-oneOf-1-0!../../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../sass-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../cache-loader/dist/cjs.js??ref--2-0!../../../../@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Select.vue?vue&type=style&index=0&id=6c7f989b&prod&lang=scss&scoped=true&\""],"sourceRoot":""}